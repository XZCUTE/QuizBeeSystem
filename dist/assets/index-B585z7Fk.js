function ZE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var eC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function g_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y_={exports:{}},Lc={},v_={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=Symbol.for("react.element"),tC=Symbol.for("react.portal"),nC=Symbol.for("react.fragment"),rC=Symbol.for("react.strict_mode"),sC=Symbol.for("react.profiler"),iC=Symbol.for("react.provider"),oC=Symbol.for("react.context"),aC=Symbol.for("react.forward_ref"),lC=Symbol.for("react.suspense"),cC=Symbol.for("react.memo"),uC=Symbol.for("react.lazy"),ug=Symbol.iterator;function dC(t){return t===null||typeof t!="object"?null:(t=ug&&t[ug]||t["@@iterator"],typeof t=="function"?t:null)}var __={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x_=Object.assign,w_={};function vi(t,e,n){this.props=t,this.context=e,this.refs=w_,this.updater=n||__}vi.prototype.isReactComponent={};vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function b_(){}b_.prototype=vi.prototype;function kf(t,e,n){this.props=t,this.context=e,this.refs=w_,this.updater=n||__}var Nf=kf.prototype=new b_;Nf.constructor=kf;x_(Nf,vi.prototype);Nf.isPureReactComponent=!0;var dg=Array.isArray,S_=Object.prototype.hasOwnProperty,If={current:null},E_={key:!0,ref:!0,__self:!0,__source:!0};function C_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)S_.call(e,r)&&!E_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:aa,type:t,key:i,ref:o,props:s,_owner:If.current}}function hC(t,e){return{$$typeof:aa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pf(t){return typeof t=="object"&&t!==null&&t.$$typeof===aa}function fC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hg=/\/+/g;function Iu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fC(""+t.key):e.toString(36)}function il(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case aa:case tC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Iu(o,0):r,dg(s)?(n="",t!=null&&(n=t.replace(hg,"$&/")+"/"),il(s,e,n,"",function(c){return c})):s!=null&&(Pf(s)&&(s=hC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(hg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",dg(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Iu(i,a);o+=il(i,e,n,l,s)}else if(l=dC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Iu(i,a++),o+=il(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Aa(t,e,n){if(t==null)return t;var r=[],s=0;return il(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yt={current:null},ol={transition:null},mC={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:ol,ReactCurrentOwner:If};function T_(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Aa,forEach:function(t,e,n){Aa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Aa(t,function(){e++}),e},toArray:function(t){return Aa(t,function(e){return e})||[]},only:function(t){if(!Pf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=vi;te.Fragment=nC;te.Profiler=sC;te.PureComponent=kf;te.StrictMode=rC;te.Suspense=lC;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mC;te.act=T_;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=x_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=If.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)S_.call(e,l)&&!E_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:aa,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:oC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iC,_context:t},t.Consumer=t};te.createElement=C_;te.createFactory=function(t){var e=C_.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:aC,render:t}};te.isValidElement=Pf;te.lazy=function(t){return{$$typeof:uC,_payload:{_status:-1,_result:t},_init:pC}};te.memo=function(t,e){return{$$typeof:cC,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=ol.transition;ol.transition={};try{t()}finally{ol.transition=e}};te.unstable_act=T_;te.useCallback=function(t,e){return yt.current.useCallback(t,e)};te.useContext=function(t){return yt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return yt.current.useDeferredValue(t)};te.useEffect=function(t,e){return yt.current.useEffect(t,e)};te.useId=function(){return yt.current.useId()};te.useImperativeHandle=function(t,e,n){return yt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return yt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return yt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return yt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return yt.current.useReducer(t,e,n)};te.useRef=function(t){return yt.current.useRef(t)};te.useState=function(t){return yt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return yt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return yt.current.useTransition()};te.version="18.3.1";v_.exports=te;var _=v_.exports;const On=g_(_),gC=ZE({__proto__:null,default:On},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC=_,vC=Symbol.for("react.element"),_C=Symbol.for("react.fragment"),xC=Object.prototype.hasOwnProperty,wC=yC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bC={key:!0,ref:!0,__self:!0,__source:!0};function k_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xC.call(e,r)&&!bC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:vC,type:t,key:i,ref:o,props:s,_owner:wC.current}}Lc.Fragment=_C;Lc.jsx=k_;Lc.jsxs=k_;y_.exports=Lc;var d=y_.exports,Od={},N_={exports:{}},At={},I_={exports:{}},P_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,T){var R=P.length;P.push(T);e:for(;0<R;){var D=R-1>>>1,V=P[D];if(0<s(V,T))P[D]=T,P[R]=V,R=D;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var T=P[0],R=P.pop();if(R!==T){P[0]=R;e:for(var D=0,V=P.length,X=V>>>1;D<X;){var le=2*(D+1)-1,ue=P[le],de=le+1,U=P[de];if(0>s(ue,R))de<V&&0>s(U,ue)?(P[D]=U,P[de]=R,D=de):(P[D]=ue,P[le]=R,D=le);else if(de<V&&0>s(U,R))P[D]=U,P[de]=R,D=de;else break e}}return T}function s(P,T){var R=P.sortIndex-T.sortIndex;return R!==0?R:P.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,g=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var T=n(c);T!==null;){if(T.callback===null)r(c);else if(T.startTime<=P)r(c),T.sortIndex=T.expirationTime,e(l,T);else break;T=n(c)}}function b(P){if(x=!1,v(P),!g)if(n(l)!==null)g=!0,ae(E);else{var T=n(c);T!==null&&Y(b,T.startTime-P)}}function E(P,T){g=!1,x&&(x=!1,m(k),k=-1),p=!0;var R=f;try{for(v(T),h=n(l);h!==null&&(!(h.expirationTime>T)||P&&!q());){var D=h.callback;if(typeof D=="function"){h.callback=null,f=h.priorityLevel;var V=D(h.expirationTime<=T);T=t.unstable_now(),typeof V=="function"?h.callback=V:h===n(l)&&r(l),v(T)}else r(l);h=n(l)}if(h!==null)var X=!0;else{var le=n(c);le!==null&&Y(b,le.startTime-T),X=!1}return X}finally{h=null,f=R,p=!1}}var C=!1,S=null,k=-1,F=5,B=-1;function q(){return!(t.unstable_now()-B<F)}function ye(){if(S!==null){var P=t.unstable_now();B=P;var T=!0;try{T=S(!0,P)}finally{T?ve():(C=!1,S=null)}}else C=!1}var ve;if(typeof y=="function")ve=function(){y(ye)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,H=Oe.port2;Oe.port1.onmessage=ye,ve=function(){H.postMessage(null)}}else ve=function(){w(ye,0)};function ae(P){S=P,C||(C=!0,ve())}function Y(P,T){k=w(function(){P(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,ae(E))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var R=f;f=T;try{return P()}finally{f=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,T){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var R=f;f=P;try{return T()}finally{f=R}},t.unstable_scheduleCallback=function(P,T,R){var D=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?D+R:D):R=D,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=R+V,P={id:u++,callback:T,priorityLevel:P,startTime:R,expirationTime:V,sortIndex:-1},R>D?(P.sortIndex=R,e(c,P),n(l)===null&&P===n(c)&&(x?(m(k),k=-1):x=!0,Y(b,R-D))):(P.sortIndex=V,e(l,P),g||p||(g=!0,ae(E))),P},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(P){var T=f;return function(){var R=f;f=T;try{return P.apply(this,arguments)}finally{f=R}}}})(P_);I_.exports=P_;var SC=I_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC=_,Pt=SC;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A_=new Set,So={};function fs(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(So[t]=e,t=0;t<e.length;t++)A_.add(e[t])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jd=Object.prototype.hasOwnProperty,CC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fg={},pg={};function TC(t){return jd.call(pg,t)?!0:jd.call(fg,t)?!1:CC.test(t)?pg[t]=!0:(fg[t]=!0,!1)}function kC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NC(t,e,n,r){if(e===null||typeof e>"u"||kC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Af=/[\-:]([a-z])/g;function Rf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Af,Rf);rt[e]=new vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Af,Rf);rt[e]=new vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Af,Rf);rt[e]=new vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new vt(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Of(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NC(e,n,s,r)&&(n=null),r||s===null?TC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qn=EC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ra=Symbol.for("react.element"),Ss=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),jf=Symbol.for("react.strict_mode"),Md=Symbol.for("react.profiler"),R_=Symbol.for("react.provider"),O_=Symbol.for("react.context"),Mf=Symbol.for("react.forward_ref"),Dd=Symbol.for("react.suspense"),Ld=Symbol.for("react.suspense_list"),Df=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),j_=Symbol.for("react.offscreen"),mg=Symbol.iterator;function ji(t){return t===null||typeof t!="object"?null:(t=mg&&t[mg]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Pu;function Gi(t){if(Pu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pu=e&&e[1]||""}return`
`+Pu+t}var Au=!1;function Ru(t,e){if(!t||Au)return"";Au=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Au=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gi(t):""}function IC(t){switch(t.tag){case 5:return Gi(t.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 2:case 15:return t=Ru(t.type,!1),t;case 11:return t=Ru(t.type.render,!1),t;case 1:return t=Ru(t.type,!0),t;default:return""}}function Fd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Es:return"Fragment";case Ss:return"Portal";case Md:return"Profiler";case jf:return"StrictMode";case Dd:return"Suspense";case Ld:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case O_:return(t.displayName||"Context")+".Consumer";case R_:return(t._context.displayName||"Context")+".Provider";case Mf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Df:return e=t.displayName||null,e!==null?e:Fd(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return Fd(t(e))}catch{}}return null}function PC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fd(e);case 8:return e===jf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function M_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AC(t){var e=M_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oa(t){t._valueTracker||(t._valueTracker=AC(t))}function D_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=M_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bd(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function L_(t,e){e=e.checked,e!=null&&Of(t,"checked",e,!1)}function Vd(t,e){L_(t,e);var n=Cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zd(t,e.type,n):e.hasOwnProperty("defaultValue")&&zd(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zd(t,e,n){(e!=="number"||Rl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ki=Array.isArray;function Us(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ud(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Ki(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function F_(t,e){var n=Cr(e.value),r=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _g(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function B_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $d(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?B_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ja,V_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ja=ja||document.createElement("div"),ja.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ja.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var no={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RC=["Webkit","ms","Moz","O"];Object.keys(no).forEach(function(t){RC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),no[e]=no[t]})});function z_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||no.hasOwnProperty(t)&&no[t]?(""+e).trim():e+"px"}function U_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=z_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var OC=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wd(t,e){if(e){if(OC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function Hd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qd=null;function Lf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qd=null,$s=null,Ws=null;function xg(t){if(t=ua(t)){if(typeof qd!="function")throw Error(j(280));var e=t.stateNode;e&&(e=Uc(e),qd(t.stateNode,t.type,e))}}function $_(t){$s?Ws?Ws.push(t):Ws=[t]:$s=t}function W_(){if($s){var t=$s,e=Ws;if(Ws=$s=null,xg(t),e)for(t=0;t<e.length;t++)xg(e[t])}}function H_(t,e){return t(e)}function Q_(){}var Ou=!1;function q_(t,e,n){if(Ou)return t(e,n);Ou=!0;try{return H_(t,e,n)}finally{Ou=!1,($s!==null||Ws!==null)&&(Q_(),W_())}}function Co(t,e){var n=t.stateNode;if(n===null)return null;var r=Uc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Gd=!1;if(Dn)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){Gd=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{Gd=!1}function jC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ro=!1,Ol=null,jl=!1,Kd=null,MC={onError:function(t){ro=!0,Ol=t}};function DC(t,e,n,r,s,i,o,a,l){ro=!1,Ol=null,jC.apply(MC,arguments)}function LC(t,e,n,r,s,i,o,a,l){if(DC.apply(this,arguments),ro){if(ro){var c=Ol;ro=!1,Ol=null}else throw Error(j(198));jl||(jl=!0,Kd=c)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function G_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wg(t){if(ps(t)!==t)throw Error(j(188))}function FC(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return wg(s),t;if(i===r)return wg(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function K_(t){return t=FC(t),t!==null?Y_(t):null}function Y_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Y_(t);if(e!==null)return e;t=t.sibling}return null}var X_=Pt.unstable_scheduleCallback,bg=Pt.unstable_cancelCallback,BC=Pt.unstable_shouldYield,VC=Pt.unstable_requestPaint,Be=Pt.unstable_now,zC=Pt.unstable_getCurrentPriorityLevel,Ff=Pt.unstable_ImmediatePriority,J_=Pt.unstable_UserBlockingPriority,Ml=Pt.unstable_NormalPriority,UC=Pt.unstable_LowPriority,Z_=Pt.unstable_IdlePriority,Fc=null,dn=null;function $C(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Fc,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:QC,WC=Math.log,HC=Math.LN2;function QC(t){return t>>>=0,t===0?32:31-(WC(t)/HC|0)|0}var Ma=64,Da=4194304;function Yi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Yi(a):(i&=o,i!==0&&(r=Yi(i)))}else o=n&~s,o!==0?r=Yi(o):i!==0&&(r=Yi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function qC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=qC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Yd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ex(){var t=Ma;return Ma<<=1,!(Ma&4194240)&&(Ma=64),t}function ju(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function la(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function KC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Bf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function tx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nx,Vf,rx,sx,ix,Xd=!1,La=[],dr=null,hr=null,fr=null,To=new Map,ko=new Map,Zn=[],YC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sg(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":To.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(e.pointerId)}}function Di(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ua(e),e!==null&&Vf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function XC(t,e,n,r,s){switch(e){case"focusin":return dr=Di(dr,t,e,n,r,s),!0;case"dragenter":return hr=Di(hr,t,e,n,r,s),!0;case"mouseover":return fr=Di(fr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return To.set(i,Di(To.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ko.set(i,Di(ko.get(i)||null,t,e,n,r,s)),!0}return!1}function ox(t){var e=Qr(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=G_(n),e!==null){t.blockedOn=e,ix(t.priority,function(){rx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function al(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Jd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qd=r,n.target.dispatchEvent(r),Qd=null}else return e=ua(n),e!==null&&Vf(e),t.blockedOn=n,!1;e.shift()}return!0}function Eg(t,e,n){al(t)&&n.delete(e)}function JC(){Xd=!1,dr!==null&&al(dr)&&(dr=null),hr!==null&&al(hr)&&(hr=null),fr!==null&&al(fr)&&(fr=null),To.forEach(Eg),ko.forEach(Eg)}function Li(t,e){t.blockedOn===e&&(t.blockedOn=null,Xd||(Xd=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,JC)))}function No(t){function e(s){return Li(s,t)}if(0<La.length){Li(La[0],t);for(var n=1;n<La.length;n++){var r=La[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dr!==null&&Li(dr,t),hr!==null&&Li(hr,t),fr!==null&&Li(fr,t),To.forEach(e),ko.forEach(e),n=0;n<Zn.length;n++)r=Zn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)ox(n),n.blockedOn===null&&Zn.shift()}var Hs=Qn.ReactCurrentBatchConfig,Ll=!0;function ZC(t,e,n,r){var s=ge,i=Hs.transition;Hs.transition=null;try{ge=1,zf(t,e,n,r)}finally{ge=s,Hs.transition=i}}function eT(t,e,n,r){var s=ge,i=Hs.transition;Hs.transition=null;try{ge=4,zf(t,e,n,r)}finally{ge=s,Hs.transition=i}}function zf(t,e,n,r){if(Ll){var s=Jd(t,e,n,r);if(s===null)Wu(t,e,r,Fl,n),Sg(t,r);else if(XC(s,t,e,n,r))r.stopPropagation();else if(Sg(t,r),e&4&&-1<YC.indexOf(t)){for(;s!==null;){var i=ua(s);if(i!==null&&nx(i),i=Jd(t,e,n,r),i===null&&Wu(t,e,r,Fl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wu(t,e,r,null,n)}}var Fl=null;function Jd(t,e,n,r){if(Fl=null,t=Lf(r),t=Qr(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=G_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fl=t,null}function ax(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zC()){case Ff:return 1;case J_:return 4;case Ml:case UC:return 16;case Z_:return 536870912;default:return 16}default:return 16}}var or=null,Uf=null,ll=null;function lx(){if(ll)return ll;var t,e=Uf,n=e.length,r,s="value"in or?or.value:or.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ll=s.slice(t,1<r?1-r:void 0)}function cl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fa(){return!0}function Cg(){return!1}function Rt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fa:Cg,this.isPropagationStopped=Cg,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),e}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$f=Rt(_i),ca=Re({},_i,{view:0,detail:0}),tT=Rt(ca),Mu,Du,Fi,Bc=Re({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fi&&(Fi&&t.type==="mousemove"?(Mu=t.screenX-Fi.screenX,Du=t.screenY-Fi.screenY):Du=Mu=0,Fi=t),Mu)},movementY:function(t){return"movementY"in t?t.movementY:Du}}),Tg=Rt(Bc),nT=Re({},Bc,{dataTransfer:0}),rT=Rt(nT),sT=Re({},ca,{relatedTarget:0}),Lu=Rt(sT),iT=Re({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),oT=Rt(iT),aT=Re({},_i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lT=Rt(aT),cT=Re({},_i,{data:0}),kg=Rt(cT),uT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hT[t])?!!e[t]:!1}function Wf(){return fT}var pT=Re({},ca,{key:function(t){if(t.key){var e=uT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wf,charCode:function(t){return t.type==="keypress"?cl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mT=Rt(pT),gT=Re({},Bc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ng=Rt(gT),yT=Re({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wf}),vT=Rt(yT),_T=Re({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),xT=Rt(_T),wT=Re({},Bc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bT=Rt(wT),ST=[9,13,27,32],Hf=Dn&&"CompositionEvent"in window,so=null;Dn&&"documentMode"in document&&(so=document.documentMode);var ET=Dn&&"TextEvent"in window&&!so,cx=Dn&&(!Hf||so&&8<so&&11>=so),Ig=" ",Pg=!1;function ux(t,e){switch(t){case"keyup":return ST.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cs=!1;function CT(t,e){switch(t){case"compositionend":return dx(e);case"keypress":return e.which!==32?null:(Pg=!0,Ig);case"textInput":return t=e.data,t===Ig&&Pg?null:t;default:return null}}function TT(t,e){if(Cs)return t==="compositionend"||!Hf&&ux(t,e)?(t=lx(),ll=Uf=or=null,Cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cx&&e.locale!=="ko"?null:e.data;default:return null}}var kT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ag(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kT[t.type]:e==="textarea"}function hx(t,e,n,r){$_(r),e=Bl(e,"onChange"),0<e.length&&(n=new $f("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var io=null,Io=null;function NT(t){Sx(t,0)}function Vc(t){var e=Ns(t);if(D_(e))return t}function IT(t,e){if(t==="change")return e}var fx=!1;if(Dn){var Fu;if(Dn){var Bu="oninput"in document;if(!Bu){var Rg=document.createElement("div");Rg.setAttribute("oninput","return;"),Bu=typeof Rg.oninput=="function"}Fu=Bu}else Fu=!1;fx=Fu&&(!document.documentMode||9<document.documentMode)}function Og(){io&&(io.detachEvent("onpropertychange",px),Io=io=null)}function px(t){if(t.propertyName==="value"&&Vc(Io)){var e=[];hx(e,Io,t,Lf(t)),q_(NT,e)}}function PT(t,e,n){t==="focusin"?(Og(),io=e,Io=n,io.attachEvent("onpropertychange",px)):t==="focusout"&&Og()}function AT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vc(Io)}function RT(t,e){if(t==="click")return Vc(e)}function OT(t,e){if(t==="input"||t==="change")return Vc(e)}function jT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:jT;function Po(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!jd.call(e,s)||!an(t[s],e[s]))return!1}return!0}function jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mg(t,e){var n=jg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jg(n)}}function mx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gx(){for(var t=window,e=Rl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rl(t.document)}return e}function Qf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function MT(t){var e=gx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mx(n.ownerDocument.documentElement,n)){if(r!==null&&Qf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Mg(n,i);var o=Mg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DT=Dn&&"documentMode"in document&&11>=document.documentMode,Ts=null,Zd=null,oo=null,eh=!1;function Dg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eh||Ts==null||Ts!==Rl(r)||(r=Ts,"selectionStart"in r&&Qf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oo&&Po(oo,r)||(oo=r,r=Bl(Zd,"onSelect"),0<r.length&&(e=new $f("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ts)))}function Ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ks={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionend:Ba("Transition","TransitionEnd")},Vu={},yx={};Dn&&(yx=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function zc(t){if(Vu[t])return Vu[t];if(!ks[t])return t;var e=ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yx)return Vu[t]=e[n];return t}var vx=zc("animationend"),_x=zc("animationiteration"),xx=zc("animationstart"),wx=zc("transitionend"),bx=new Map,Lg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){bx.set(t,e),fs(e,[t])}for(var zu=0;zu<Lg.length;zu++){var Uu=Lg[zu],LT=Uu.toLowerCase(),FT=Uu[0].toUpperCase()+Uu.slice(1);Rr(LT,"on"+FT)}Rr(vx,"onAnimationEnd");Rr(_x,"onAnimationIteration");Rr(xx,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(wx,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function Fg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LC(r,e,void 0,t),t.currentTarget=null}function Sx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Fg(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Fg(s,a,c),i=l}}}if(jl)throw t=Kd,jl=!1,Kd=null,t}function Te(t,e){var n=e[ih];n===void 0&&(n=e[ih]=new Set);var r=t+"__bubble";n.has(r)||(Ex(e,t,2,!1),n.add(r))}function $u(t,e,n){var r=0;e&&(r|=4),Ex(n,t,r,e)}var Va="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[Va]){t[Va]=!0,A_.forEach(function(n){n!=="selectionchange"&&(BT.has(n)||$u(n,!1,t),$u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Va]||(e[Va]=!0,$u("selectionchange",!1,e))}}function Ex(t,e,n,r){switch(ax(e)){case 1:var s=ZC;break;case 4:s=eT;break;default:s=zf}n=s.bind(null,e,n,t),s=void 0,!Gd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Qr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}q_(function(){var c=i,u=Lf(n),h=[];e:{var f=bx.get(t);if(f!==void 0){var p=$f,g=t;switch(t){case"keypress":if(cl(n)===0)break e;case"keydown":case"keyup":p=mT;break;case"focusin":g="focus",p=Lu;break;case"focusout":g="blur",p=Lu;break;case"beforeblur":case"afterblur":p=Lu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Tg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=rT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=vT;break;case vx:case _x:case xx:p=oT;break;case wx:p=xT;break;case"scroll":p=tT;break;case"wheel":p=bT;break;case"copy":case"cut":case"paste":p=lT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ng}var x=(e&4)!==0,w=!x&&t==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var y=c,v;y!==null;){v=y;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,m!==null&&(b=Co(y,m),b!=null&&x.push(Ro(y,b,v)))),w)break;y=y.return}0<x.length&&(f=new p(f,g,null,n,u),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Qd&&(g=n.relatedTarget||n.fromElement)&&(Qr(g)||g[Ln]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Qr(g):null,g!==null&&(w=ps(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(x=Tg,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ng,b="onPointerLeave",m="onPointerEnter",y="pointer"),w=p==null?f:Ns(p),v=g==null?f:Ns(g),f=new x(b,y+"leave",p,n,u),f.target=w,f.relatedTarget=v,b=null,Qr(u)===c&&(x=new x(m,y+"enter",g,n,u),x.target=v,x.relatedTarget=w,b=x),w=b,p&&g)t:{for(x=p,m=g,y=0,v=x;v;v=ws(v))y++;for(v=0,b=m;b;b=ws(b))v++;for(;0<y-v;)x=ws(x),y--;for(;0<v-y;)m=ws(m),v--;for(;y--;){if(x===m||m!==null&&x===m.alternate)break t;x=ws(x),m=ws(m)}x=null}else x=null;p!==null&&Bg(h,f,p,x,!1),g!==null&&w!==null&&Bg(h,w,g,x,!0)}}e:{if(f=c?Ns(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=IT;else if(Ag(f))if(fx)E=OT;else{E=AT;var C=PT}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=RT);if(E&&(E=E(t,c))){hx(h,E,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&zd(f,"number",f.value)}switch(C=c?Ns(c):window,t){case"focusin":(Ag(C)||C.contentEditable==="true")&&(Ts=C,Zd=c,oo=null);break;case"focusout":oo=Zd=Ts=null;break;case"mousedown":eh=!0;break;case"contextmenu":case"mouseup":case"dragend":eh=!1,Dg(h,n,u);break;case"selectionchange":if(DT)break;case"keydown":case"keyup":Dg(h,n,u)}var S;if(Hf)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Cs?ux(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(cx&&n.locale!=="ko"&&(Cs||k!=="onCompositionStart"?k==="onCompositionEnd"&&Cs&&(S=lx()):(or=u,Uf="value"in or?or.value:or.textContent,Cs=!0)),C=Bl(c,k),0<C.length&&(k=new kg(k,t,null,n,u),h.push({event:k,listeners:C}),S?k.data=S:(S=dx(n),S!==null&&(k.data=S)))),(S=ET?CT(t,n):TT(t,n))&&(c=Bl(c,"onBeforeInput"),0<c.length&&(u=new kg("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=S))}Sx(h,e)})}function Ro(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Co(t,n),i!=null&&r.unshift(Ro(t,i,s)),i=Co(t,e),i!=null&&r.push(Ro(t,i,s))),t=t.return}return r}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Co(n,i),l!=null&&o.unshift(Ro(n,l,a))):s||(l=Co(n,i),l!=null&&o.push(Ro(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VT=/\r\n?/g,zT=/\u0000|\uFFFD/g;function Vg(t){return(typeof t=="string"?t:""+t).replace(VT,`
`).replace(zT,"")}function za(t,e,n){if(e=Vg(e),Vg(t)!==e&&n)throw Error(j(425))}function Vl(){}var th=null,nh=null;function rh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sh=typeof setTimeout=="function"?setTimeout:void 0,UT=typeof clearTimeout=="function"?clearTimeout:void 0,zg=typeof Promise=="function"?Promise:void 0,$T=typeof queueMicrotask=="function"?queueMicrotask:typeof zg<"u"?function(t){return zg.resolve(null).then(t).catch(WT)}:sh;function WT(t){setTimeout(function(){throw t})}function Hu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),No(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);No(e)}function pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ug(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xi=Math.random().toString(36).slice(2),un="__reactFiber$"+xi,Oo="__reactProps$"+xi,Ln="__reactContainer$"+xi,ih="__reactEvents$"+xi,HT="__reactListeners$"+xi,QT="__reactHandles$"+xi;function Qr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ln]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ug(t);t!==null;){if(n=t[un])return n;t=Ug(t)}return e}t=n,n=t.parentNode}return null}function ua(t){return t=t[un]||t[Ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function Uc(t){return t[Oo]||null}var oh=[],Is=-1;function Or(t){return{current:t}}function ke(t){0>Is||(t.current=oh[Is],oh[Is]=null,Is--)}function Ee(t,e){Is++,oh[Is]=t.current,t.current=e}var Tr={},ut=Or(Tr),St=Or(!1),rs=Tr;function ei(t,e){var n=t.type.contextTypes;if(!n)return Tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function zl(){ke(St),ke(ut)}function $g(t,e,n){if(ut.current!==Tr)throw Error(j(168));Ee(ut,e),Ee(St,n)}function Cx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(j(108,PC(t)||"Unknown",s));return Re({},n,r)}function Ul(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tr,rs=ut.current,Ee(ut,t),Ee(St,St.current),!0}function Wg(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=Cx(t,e,rs),r.__reactInternalMemoizedMergedChildContext=t,ke(St),ke(ut),Ee(ut,t)):ke(St),Ee(St,n)}var Tn=null,$c=!1,Qu=!1;function Tx(t){Tn===null?Tn=[t]:Tn.push(t)}function qT(t){$c=!0,Tx(t)}function jr(){if(!Qu&&Tn!==null){Qu=!0;var t=0,e=ge;try{var n=Tn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,$c=!1}catch(s){throw Tn!==null&&(Tn=Tn.slice(t+1)),X_(Ff,jr),s}finally{ge=e,Qu=!1}}return null}var Ps=[],As=0,$l=null,Wl=0,Dt=[],Lt=0,ss=null,kn=1,Nn="";function Vr(t,e){Ps[As++]=Wl,Ps[As++]=$l,$l=t,Wl=e}function kx(t,e,n){Dt[Lt++]=kn,Dt[Lt++]=Nn,Dt[Lt++]=ss,ss=t;var r=kn;t=Nn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kn=1<<32-rn(e)+s|n<<s|r,Nn=i+t}else kn=1<<i|n<<s|r,Nn=t}function qf(t){t.return!==null&&(Vr(t,1),kx(t,1,0))}function Gf(t){for(;t===$l;)$l=Ps[--As],Ps[As]=null,Wl=Ps[--As],Ps[As]=null;for(;t===ss;)ss=Dt[--Lt],Dt[Lt]=null,Nn=Dt[--Lt],Dt[Lt]=null,kn=Dt[--Lt],Dt[Lt]=null}var Nt=null,kt=null,Ne=!1,en=null;function Nx(t,e){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nt=t,kt=pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nt=t,kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ss!==null?{id:kn,overflow:Nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nt=t,kt=null,!0):!1;default:return!1}}function ah(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lh(t){if(Ne){var e=kt;if(e){var n=e;if(!Hg(t,e)){if(ah(t))throw Error(j(418));e=pr(n.nextSibling);var r=Nt;e&&Hg(t,e)?Nx(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Nt=t)}}else{if(ah(t))throw Error(j(418));t.flags=t.flags&-4097|2,Ne=!1,Nt=t}}}function Qg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nt=t}function Ua(t){if(t!==Nt)return!1;if(!Ne)return Qg(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rh(t.type,t.memoizedProps)),e&&(e=kt)){if(ah(t))throw Ix(),Error(j(418));for(;e;)Nx(t,e),e=pr(e.nextSibling)}if(Qg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kt=pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kt=null}}else kt=Nt?pr(t.stateNode.nextSibling):null;return!0}function Ix(){for(var t=kt;t;)t=pr(t.nextSibling)}function ti(){kt=Nt=null,Ne=!1}function Kf(t){en===null?en=[t]:en.push(t)}var GT=Qn.ReactCurrentBatchConfig;function Bi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function $a(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qg(t){var e=t._init;return e(t._payload)}function Px(t){function e(m,y){if(t){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function s(m,y){return m=vr(m,y),m.index=0,m.sibling=null,m}function i(m,y,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,v,b){return y===null||y.tag!==6?(y=Zu(v,m.mode,b),y.return=m,y):(y=s(y,v),y.return=m,y)}function l(m,y,v,b){var E=v.type;return E===Es?u(m,y,v.props.children,b,v.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xn&&qg(E)===y.type)?(b=s(y,v.props),b.ref=Bi(m,y,v),b.return=m,b):(b=gl(v.type,v.key,v.props,null,m.mode,b),b.ref=Bi(m,y,v),b.return=m,b)}function c(m,y,v,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=ed(v,m.mode,b),y.return=m,y):(y=s(y,v.children||[]),y.return=m,y)}function u(m,y,v,b,E){return y===null||y.tag!==7?(y=Zr(v,m.mode,b,E),y.return=m,y):(y=s(y,v),y.return=m,y)}function h(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Zu(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ra:return v=gl(y.type,y.key,y.props,null,m.mode,v),v.ref=Bi(m,null,y),v.return=m,v;case Ss:return y=ed(y,m.mode,v),y.return=m,y;case Xn:var b=y._init;return h(m,b(y._payload),v)}if(Ki(y)||ji(y))return y=Zr(y,m.mode,v,null),y.return=m,y;$a(m,y)}return null}function f(m,y,v,b){var E=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(m,y,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ra:return v.key===E?l(m,y,v,b):null;case Ss:return v.key===E?c(m,y,v,b):null;case Xn:return E=v._init,f(m,y,E(v._payload),b)}if(Ki(v)||ji(v))return E!==null?null:u(m,y,v,b,null);$a(m,v)}return null}function p(m,y,v,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(v)||null,a(y,m,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ra:return m=m.get(b.key===null?v:b.key)||null,l(y,m,b,E);case Ss:return m=m.get(b.key===null?v:b.key)||null,c(y,m,b,E);case Xn:var C=b._init;return p(m,y,v,C(b._payload),E)}if(Ki(b)||ji(b))return m=m.get(v)||null,u(y,m,b,E,null);$a(y,b)}return null}function g(m,y,v,b){for(var E=null,C=null,S=y,k=y=0,F=null;S!==null&&k<v.length;k++){S.index>k?(F=S,S=null):F=S.sibling;var B=f(m,S,v[k],b);if(B===null){S===null&&(S=F);break}t&&S&&B.alternate===null&&e(m,S),y=i(B,y,k),C===null?E=B:C.sibling=B,C=B,S=F}if(k===v.length)return n(m,S),Ne&&Vr(m,k),E;if(S===null){for(;k<v.length;k++)S=h(m,v[k],b),S!==null&&(y=i(S,y,k),C===null?E=S:C.sibling=S,C=S);return Ne&&Vr(m,k),E}for(S=r(m,S);k<v.length;k++)F=p(S,m,k,v[k],b),F!==null&&(t&&F.alternate!==null&&S.delete(F.key===null?k:F.key),y=i(F,y,k),C===null?E=F:C.sibling=F,C=F);return t&&S.forEach(function(q){return e(m,q)}),Ne&&Vr(m,k),E}function x(m,y,v,b){var E=ji(v);if(typeof E!="function")throw Error(j(150));if(v=E.call(v),v==null)throw Error(j(151));for(var C=E=null,S=y,k=y=0,F=null,B=v.next();S!==null&&!B.done;k++,B=v.next()){S.index>k?(F=S,S=null):F=S.sibling;var q=f(m,S,B.value,b);if(q===null){S===null&&(S=F);break}t&&S&&q.alternate===null&&e(m,S),y=i(q,y,k),C===null?E=q:C.sibling=q,C=q,S=F}if(B.done)return n(m,S),Ne&&Vr(m,k),E;if(S===null){for(;!B.done;k++,B=v.next())B=h(m,B.value,b),B!==null&&(y=i(B,y,k),C===null?E=B:C.sibling=B,C=B);return Ne&&Vr(m,k),E}for(S=r(m,S);!B.done;k++,B=v.next())B=p(S,m,k,B.value,b),B!==null&&(t&&B.alternate!==null&&S.delete(B.key===null?k:B.key),y=i(B,y,k),C===null?E=B:C.sibling=B,C=B);return t&&S.forEach(function(ye){return e(m,ye)}),Ne&&Vr(m,k),E}function w(m,y,v,b){if(typeof v=="object"&&v!==null&&v.type===Es&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ra:e:{for(var E=v.key,C=y;C!==null;){if(C.key===E){if(E=v.type,E===Es){if(C.tag===7){n(m,C.sibling),y=s(C,v.props.children),y.return=m,m=y;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xn&&qg(E)===C.type){n(m,C.sibling),y=s(C,v.props),y.ref=Bi(m,C,v),y.return=m,m=y;break e}n(m,C);break}else e(m,C);C=C.sibling}v.type===Es?(y=Zr(v.props.children,m.mode,b,v.key),y.return=m,m=y):(b=gl(v.type,v.key,v.props,null,m.mode,b),b.ref=Bi(m,y,v),b.return=m,m=b)}return o(m);case Ss:e:{for(C=v.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(m,y.sibling),y=s(y,v.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=ed(v,m.mode,b),y.return=m,m=y}return o(m);case Xn:return C=v._init,w(m,y,C(v._payload),b)}if(Ki(v))return g(m,y,v,b);if(ji(v))return x(m,y,v,b);$a(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(m,y.sibling),y=s(y,v),y.return=m,m=y):(n(m,y),y=Zu(v,m.mode,b),y.return=m,m=y),o(m)):n(m,y)}return w}var ni=Px(!0),Ax=Px(!1),Hl=Or(null),Ql=null,Rs=null,Yf=null;function Xf(){Yf=Rs=Ql=null}function Jf(t){var e=Hl.current;ke(Hl),t._currentValue=e}function ch(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){Ql=t,Yf=Rs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xt=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(Yf!==t)if(t={context:t,memoizedValue:e,next:null},Rs===null){if(Ql===null)throw Error(j(308));Rs=t,Ql.dependencies={lanes:0,firstContext:t}}else Rs=Rs.next=t;return e}var qr=null;function Zf(t){qr===null?qr=[t]:qr.push(t)}function Rx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Zf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Fn(t,r)}function Fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jn=!1;function ep(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ox(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Fn(t,n)}return s=r.interleaved,s===null?(e.next=e,Zf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Fn(t,n)}function ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bf(t,n)}}function Gg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ql(t,e,n,r){var s=t.updateQueue;Jn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,x=a;switch(f=e,p=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=Re({},h,f);break e;case 2:Jn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);os|=o,t.lanes=o,t.memoizedState=h}}function Kg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(j(191,s));s.call(r)}}}var da={},hn=Or(da),jo=Or(da),Mo=Or(da);function Gr(t){if(t===da)throw Error(j(174));return t}function tp(t,e){switch(Ee(Mo,e),Ee(jo,t),Ee(hn,da),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$d(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$d(e,t)}ke(hn),Ee(hn,e)}function ri(){ke(hn),ke(jo),ke(Mo)}function jx(t){Gr(Mo.current);var e=Gr(hn.current),n=$d(e,t.type);e!==n&&(Ee(jo,t),Ee(hn,n))}function np(t){jo.current===t&&(ke(hn),ke(jo))}var Ie=Or(0);function Gl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qu=[];function rp(){for(var t=0;t<qu.length;t++)qu[t]._workInProgressVersionPrimary=null;qu.length=0}var dl=Qn.ReactCurrentDispatcher,Gu=Qn.ReactCurrentBatchConfig,is=0,Ae=null,$e=null,Ge=null,Kl=!1,ao=!1,Do=0,KT=0;function it(){throw Error(j(321))}function sp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function ip(t,e,n,r,s,i){if(is=i,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dl.current=t===null||t.memoizedState===null?ZT:ek,t=n(r,s),ao){i=0;do{if(ao=!1,Do=0,25<=i)throw Error(j(301));i+=1,Ge=$e=null,e.updateQueue=null,dl.current=tk,t=n(r,s)}while(ao)}if(dl.current=Yl,e=$e!==null&&$e.next!==null,is=0,Ge=$e=Ae=null,Kl=!1,e)throw Error(j(300));return t}function op(){var t=Do!==0;return Do=0,t}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Ht(){if($e===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ge===null?Ae.memoizedState:Ge.next;if(e!==null)Ge=e,$e=t;else{if(t===null)throw Error(j(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Lo(t,e){return typeof e=="function"?e(t):e}function Ku(t){var e=Ht(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((is&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ae.lanes|=u,os|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,an(r,e.memoizedState)||(xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ae.lanes|=i,os|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yu(t){var e=Ht(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);an(i,e.memoizedState)||(xt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Mx(){}function Dx(t,e){var n=Ae,r=Ht(),s=e(),i=!an(r.memoizedState,s);if(i&&(r.memoizedState=s,xt=!0),r=r.queue,ap(Bx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Fo(9,Fx.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error(j(349));is&30||Lx(n,e,s)}return s}function Lx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fx(t,e,n,r){e.value=n,e.getSnapshot=r,Vx(e)&&zx(t)}function Bx(t,e,n){return n(function(){Vx(e)&&zx(t)})}function Vx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function zx(t){var e=Fn(t,1);e!==null&&sn(e,t,1,-1)}function Yg(t){var e=cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:t},e.queue=t,t=t.dispatch=JT.bind(null,Ae,t),[e.memoizedState,t]}function Fo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ux(){return Ht().memoizedState}function hl(t,e,n,r){var s=cn();Ae.flags|=t,s.memoizedState=Fo(1|e,n,void 0,r===void 0?null:r)}function Wc(t,e,n,r){var s=Ht();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&sp(r,o.deps)){s.memoizedState=Fo(e,n,i,r);return}}Ae.flags|=t,s.memoizedState=Fo(1|e,n,i,r)}function Xg(t,e){return hl(8390656,8,t,e)}function ap(t,e){return Wc(2048,8,t,e)}function $x(t,e){return Wc(4,2,t,e)}function Wx(t,e){return Wc(4,4,t,e)}function Hx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qx(t,e,n){return n=n!=null?n.concat([t]):null,Wc(4,4,Hx.bind(null,e,t),n)}function lp(){}function qx(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gx(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Kx(t,e,n){return is&21?(an(n,e)||(n=ex(),Ae.lanes|=n,os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xt=!0),t.memoizedState=n)}function YT(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Gu.transition;Gu.transition={};try{t(!1),e()}finally{ge=n,Gu.transition=r}}function Yx(){return Ht().memoizedState}function XT(t,e,n){var r=yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xx(t))Jx(e,n);else if(n=Rx(t,e,n,r),n!==null){var s=pt();sn(n,t,r,s),Zx(n,e,r)}}function JT(t,e,n){var r=yr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xx(t))Jx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,an(a,o)){var l=e.interleaved;l===null?(s.next=s,Zf(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Rx(t,e,s,r),n!==null&&(s=pt(),sn(n,t,r,s),Zx(n,e,r))}}function Xx(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function Jx(t,e){ao=Kl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Zx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bf(t,n)}}var Yl={readContext:Wt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},ZT={readContext:Wt,useCallback:function(t,e){return cn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:Xg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hl(4194308,4,Hx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hl(4194308,4,t,e)},useInsertionEffect:function(t,e){return hl(4,2,t,e)},useMemo:function(t,e){var n=cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=XT.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=cn();return t={current:t},e.memoizedState=t},useState:Yg,useDebugValue:lp,useDeferredValue:function(t){return cn().memoizedState=t},useTransition:function(){var t=Yg(!1),e=t[0];return t=YT.bind(null,t[1]),cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,s=cn();if(Ne){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Ye===null)throw Error(j(349));is&30||Lx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Xg(Bx.bind(null,r,i,t),[t]),r.flags|=2048,Fo(9,Fx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cn(),e=Ye.identifierPrefix;if(Ne){var n=Nn,r=kn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Do++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ek={readContext:Wt,useCallback:qx,useContext:Wt,useEffect:ap,useImperativeHandle:Qx,useInsertionEffect:$x,useLayoutEffect:Wx,useMemo:Gx,useReducer:Ku,useRef:Ux,useState:function(){return Ku(Lo)},useDebugValue:lp,useDeferredValue:function(t){var e=Ht();return Kx(e,$e.memoizedState,t)},useTransition:function(){var t=Ku(Lo)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Mx,useSyncExternalStore:Dx,useId:Yx,unstable_isNewReconciler:!1},tk={readContext:Wt,useCallback:qx,useContext:Wt,useEffect:ap,useImperativeHandle:Qx,useInsertionEffect:$x,useLayoutEffect:Wx,useMemo:Gx,useReducer:Yu,useRef:Ux,useState:function(){return Yu(Lo)},useDebugValue:lp,useDeferredValue:function(t){var e=Ht();return $e===null?e.memoizedState=t:Kx(e,$e.memoizedState,t)},useTransition:function(){var t=Yu(Lo)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Mx,useSyncExternalStore:Dx,useId:Yx,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hc={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=yr(t),i=jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,s),e!==null&&(sn(e,t,s,r),ul(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=yr(t),i=jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,s),e!==null&&(sn(e,t,s,r),ul(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=yr(t),s=jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=mr(t,s,r),e!==null&&(sn(e,t,r,n),ul(e,t,r))}};function Jg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Po(n,r)||!Po(s,i):!0}function ew(t,e,n){var r=!1,s=Tr,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=Et(e)?rs:ut.current,r=e.contextTypes,i=(r=r!=null)?ei(t,s):Tr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Zg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hc.enqueueReplaceState(e,e.state,null)}function dh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ep(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=Et(e)?rs:ut.current,s.context=ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hc.enqueueReplaceState(s,s.state,null),ql(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,e){try{var n="",r=e;do n+=IC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nk=typeof WeakMap=="function"?WeakMap:Map;function tw(t,e,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jl||(Jl=!0,bh=r),hh(t,e)},n}function nw(t,e,n){n=jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hh(t,e),typeof r!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ey(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=gk.bind(null,t,e,n),e.then(t,t))}function ty(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ny(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jn(-1,1),e.tag=2,mr(n,e,1))),n.lanes|=1),t)}var rk=Qn.ReactCurrentOwner,xt=!1;function dt(t,e,n,r){e.child=t===null?Ax(e,null,n,r):ni(e,t.child,n,r)}function ry(t,e,n,r,s){n=n.render;var i=e.ref;return Qs(e,s),r=ip(t,e,n,r,i,s),n=op(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bn(t,e,s)):(Ne&&n&&qf(e),e.flags|=1,dt(t,e,r,s),e.child)}function sy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,rw(t,e,i,r,s)):(t=gl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Po,n(o,r)&&t.ref===e.ref)return Bn(t,e,s)}return e.flags|=1,t=vr(i,r),t.ref=e.ref,t.return=e,e.child=t}function rw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Po(i,r)&&t.ref===e.ref)if(xt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(xt=!0);else return e.lanes=t.lanes,Bn(t,e,s)}return fh(t,e,n,r,s)}function sw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(js,Tt),Tt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(js,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ee(js,Tt),Tt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ee(js,Tt),Tt|=r;return dt(t,e,s,n),e.child}function iw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fh(t,e,n,r,s){var i=Et(n)?rs:ut.current;return i=ei(e,i),Qs(e,s),n=ip(t,e,n,r,i,s),r=op(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bn(t,e,s)):(Ne&&r&&qf(e),e.flags|=1,dt(t,e,n,s),e.child)}function iy(t,e,n,r,s){if(Et(n)){var i=!0;Ul(e)}else i=!1;if(Qs(e,s),e.stateNode===null)fl(t,e),ew(e,n,r),dh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Wt(c):(c=Et(n)?rs:ut.current,c=ei(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Zg(e,o,r,c),Jn=!1;var f=e.memoizedState;o.state=f,ql(e,r,o,s),l=e.memoizedState,a!==r||f!==l||St.current||Jn?(typeof u=="function"&&(uh(e,n,u,r),l=e.memoizedState),(a=Jn||Jg(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ox(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Xt(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Wt(l):(l=Et(n)?rs:ut.current,l=ei(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Zg(e,o,r,l),Jn=!1,f=e.memoizedState,o.state=f,ql(e,r,o,s);var g=e.memoizedState;a!==h||f!==g||St.current||Jn?(typeof p=="function"&&(uh(e,n,p,r),g=e.memoizedState),(c=Jn||Jg(e,n,c,r,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ph(t,e,n,r,i,s)}function ph(t,e,n,r,s,i){iw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Wg(e,n,!1),Bn(t,e,i);r=e.stateNode,rk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ni(e,t.child,null,i),e.child=ni(e,null,a,i)):dt(t,e,a,i),e.memoizedState=r.state,s&&Wg(e,n,!0),e.child}function ow(t){var e=t.stateNode;e.pendingContext?$g(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$g(t,e.context,!1),tp(t,e.containerInfo)}function oy(t,e,n,r,s){return ti(),Kf(s),e.flags|=256,dt(t,e,n,r),e.child}var mh={dehydrated:null,treeContext:null,retryLane:0};function gh(t){return{baseLanes:t,cachePool:null,transitions:null}}function aw(t,e,n){var r=e.pendingProps,s=Ie.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Ie,s&1),t===null)return lh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Gc(o,r,0,null),t=Zr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=gh(n),e.memoizedState=mh,t):cp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return sk(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=vr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=vr(a,i):(i=Zr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?gh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=mh,r}return i=t.child,t=i.sibling,r=vr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cp(t,e){return e=Gc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wa(t,e,n,r){return r!==null&&Kf(r),ni(e,t.child,null,n),t=cp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Xu(Error(j(422))),Wa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Gc({mode:"visible",children:r.children},s,0,null),i=Zr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ni(e,t.child,null,o),e.child.memoizedState=gh(o),e.memoizedState=mh,i);if(!(e.mode&1))return Wa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(j(419)),r=Xu(i,r,void 0),Wa(t,e,o,r)}if(a=(o&t.childLanes)!==0,xt||a){if(r=Ye,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Fn(t,s),sn(r,t,s,-1))}return mp(),r=Xu(Error(j(421))),Wa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,kt=pr(s.nextSibling),Nt=e,Ne=!0,en=null,t!==null&&(Dt[Lt++]=kn,Dt[Lt++]=Nn,Dt[Lt++]=ss,kn=t.id,Nn=t.overflow,ss=e),e=cp(e,r.children),e.flags|=4096,e)}function ay(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ch(t.return,e,n)}function Ju(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ay(t,n,e);else if(t.tag===19)ay(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ju(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ju(e,!0,n,null,i);break;case"together":Ju(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ik(t,e,n){switch(e.tag){case 3:ow(e),ti();break;case 5:jx(e);break;case 1:Et(e.type)&&Ul(e);break;case 4:tp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ee(Hl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?aw(t,e,n):(Ee(Ie,Ie.current&1),t=Bn(t,e,n),t!==null?t.sibling:null);Ee(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,sw(t,e,n)}return Bn(t,e,n)}var cw,yh,uw,dw;cw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yh=function(){};uw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gr(hn.current);var i=null;switch(n){case"input":s=Bd(t,s),r=Bd(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=Ud(t,s),r=Ud(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vl)}Wd(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(So.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(So.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Te("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};dw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vi(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ok(t,e,n){var r=e.pendingProps;switch(Gf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Et(e.type)&&zl(),ot(e),null;case 3:return r=e.stateNode,ri(),ke(St),ke(ut),rp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ua(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(Ch(en),en=null))),yh(t,e),ot(e),null;case 5:np(e);var s=Gr(Mo.current);if(n=e.type,t!==null&&e.stateNode!=null)uw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return ot(e),null}if(t=Gr(hn.current),Ua(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[un]=e,r[Oo]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<Xi.length;s++)Te(Xi[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":gg(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":vg(r,i),Te("invalid",r)}Wd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&za(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&za(r.textContent,a,t),s=["children",""+a]):So.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":Oa(r),yg(r,i,!0);break;case"textarea":Oa(r),_g(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=B_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[un]=e,t[Oo]=r,cw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hd(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xi.length;s++)Te(Xi[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":gg(t,r),s=Bd(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Te("invalid",t);break;case"textarea":vg(t,r),s=Ud(t,r),Te("invalid",t);break;default:s=r}Wd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?U_(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&V_(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Eo(t,l):typeof l=="number"&&Eo(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(So.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Te("scroll",t):l!=null&&Of(t,i,l,o))}switch(n){case"input":Oa(t),yg(t,r,!1);break;case"textarea":Oa(t),_g(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Us(t,!!r.multiple,i,!1):r.defaultValue!=null&&Us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)dw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=Gr(Mo.current),Gr(hn.current),Ua(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(i=r.nodeValue!==n)&&(t=Nt,t!==null))switch(t.tag){case 3:za(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&za(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return ot(e),null;case 13:if(ke(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&kt!==null&&e.mode&1&&!(e.flags&128))Ix(),ti(),e.flags|=98560,i=!1;else if(i=Ua(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[un]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else en!==null&&(Ch(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?Qe===0&&(Qe=3):mp())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return ri(),yh(t,e),t===null&&Ao(e.stateNode.containerInfo),ot(e),null;case 10:return Jf(e.type._context),ot(e),null;case 17:return Et(e.type)&&zl(),ot(e),null;case 19:if(ke(Ie),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Vi(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gl(t),o!==null){for(e.flags|=128,Vi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Ie,Ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>ii&&(e.flags|=128,r=!0,Vi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return ot(e),null}else 2*Be()-i.renderingStartTime>ii&&n!==1073741824&&(e.flags|=128,r=!0,Vi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=Ie.current,Ee(Ie,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return pp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function ak(t,e){switch(Gf(e),e.tag){case 1:return Et(e.type)&&zl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),ke(St),ke(ut),rp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return np(e),null;case 13:if(ke(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ie),null;case 4:return ri(),null;case 10:return Jf(e.type._context),null;case 22:case 23:return pp(),null;case 24:return null;default:return null}}var Ha=!1,lt=!1,lk=typeof WeakSet=="function"?WeakSet:Set,z=null;function Os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function vh(t,e,n){try{n()}catch(r){Me(t,e,r)}}var ly=!1;function ck(t,e){if(th=Ll,t=gx(),Qf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:t,selectionRange:n},Ll=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,w=g.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:Xt(e.type,x),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(b){Me(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return g=ly,ly=!1,g}function lo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vh(e,n,i)}s=s.next}while(s!==r)}}function Qc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _h(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hw(t){var e=t.alternate;e!==null&&(t.alternate=null,hw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[Oo],delete e[ih],delete e[HT],delete e[QT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fw(t){return t.tag===5||t.tag===3||t.tag===4}function cy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vl));else if(r!==4&&(t=t.child,t!==null))for(xh(t,e,n),t=t.sibling;t!==null;)xh(t,e,n),t=t.sibling}function wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wh(t,e,n),t=t.sibling;t!==null;)wh(t,e,n),t=t.sibling}var Je=null,Jt=!1;function qn(t,e,n){for(n=n.child;n!==null;)pw(t,e,n),n=n.sibling}function pw(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Fc,n)}catch{}switch(n.tag){case 5:lt||Os(n,e);case 6:var r=Je,s=Jt;Je=null,qn(t,e,n),Je=r,Jt=s,Je!==null&&(Jt?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Jt?(t=Je,n=n.stateNode,t.nodeType===8?Hu(t.parentNode,n):t.nodeType===1&&Hu(t,n),No(t)):Hu(Je,n.stateNode));break;case 4:r=Je,s=Jt,Je=n.stateNode.containerInfo,Jt=!0,qn(t,e,n),Je=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vh(n,e,o),s=s.next}while(s!==r)}qn(t,e,n);break;case 1:if(!lt&&(Os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,e,a)}qn(t,e,n);break;case 21:qn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,qn(t,e,n),lt=r):qn(t,e,n);break;default:qn(t,e,n)}}function uy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lk),e.forEach(function(r){var s=vk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Je=a.stateNode,Jt=!1;break e;case 3:Je=a.stateNode.containerInfo,Jt=!0;break e;case 4:Je=a.stateNode.containerInfo,Jt=!0;break e}a=a.return}if(Je===null)throw Error(j(160));pw(i,o,s),Je=null,Jt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Me(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mw(e,t),e=e.sibling}function mw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kt(e,t),ln(t),r&4){try{lo(3,t,t.return),Qc(3,t)}catch(x){Me(t,t.return,x)}try{lo(5,t,t.return)}catch(x){Me(t,t.return,x)}}break;case 1:Kt(e,t),ln(t),r&512&&n!==null&&Os(n,n.return);break;case 5:if(Kt(e,t),ln(t),r&512&&n!==null&&Os(n,n.return),t.flags&32){var s=t.stateNode;try{Eo(s,"")}catch(x){Me(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&L_(s,i),Hd(a,o);var c=Hd(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?U_(s,h):u==="dangerouslySetInnerHTML"?V_(s,h):u==="children"?Eo(s,h):Of(s,u,h,c)}switch(a){case"input":Vd(s,i);break;case"textarea":F_(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Us(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Us(s,!!i.multiple,i.defaultValue,!0):Us(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oo]=i}catch(x){Me(t,t.return,x)}}break;case 6:if(Kt(e,t),ln(t),r&4){if(t.stateNode===null)throw Error(j(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Me(t,t.return,x)}}break;case 3:if(Kt(e,t),ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{No(e.containerInfo)}catch(x){Me(t,t.return,x)}break;case 4:Kt(e,t),ln(t);break;case 13:Kt(e,t),ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hp=Be())),r&4&&uy(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(c=lt)||u,Kt(e,t),lt=c):Kt(e,t),ln(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(z=t,u=t.child;u!==null;){for(h=z=u;z!==null;){switch(f=z,p=f.child,f.tag){case 0:case 11:case 14:case 15:lo(4,f,f.return);break;case 1:Os(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){Me(r,n,x)}}break;case 5:Os(f,f.return);break;case 22:if(f.memoizedState!==null){hy(h);continue}}p!==null?(p.return=f,z=p):hy(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=z_("display",o))}catch(x){Me(t,t.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Me(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kt(e,t),ln(t),r&4&&uy(t);break;case 21:break;default:Kt(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fw(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Eo(s,""),r.flags&=-33);var i=cy(t);wh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cy(t);xh(t,a,o);break;default:throw Error(j(161))}}catch(l){Me(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uk(t,e,n){z=t,gw(t)}function gw(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var s=z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ha;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||lt;a=Ha;var c=lt;if(Ha=o,(lt=l)&&!c)for(z=s;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?fy(s):l!==null?(l.return=o,z=l):fy(s);for(;i!==null;)z=i,gw(i),i=i.sibling;z=s,Ha=a,lt=c}dy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,z=i):dy(t)}}function dy(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Qc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Kg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Kg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&No(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}lt||e.flags&512&&_h(e)}catch(f){Me(e,e.return,f)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function hy(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function fy(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qc(4,e)}catch(l){Me(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Me(e,s,l)}}var i=e.return;try{_h(e)}catch(l){Me(e,i,l)}break;case 5:var o=e.return;try{_h(e)}catch(l){Me(e,o,l)}}}catch(l){Me(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var dk=Math.ceil,Xl=Qn.ReactCurrentDispatcher,up=Qn.ReactCurrentOwner,Ut=Qn.ReactCurrentBatchConfig,ce=0,Ye=null,Ve=null,nt=0,Tt=0,js=Or(0),Qe=0,Bo=null,os=0,qc=0,dp=0,co=null,_t=null,hp=0,ii=1/0,Cn=null,Jl=!1,bh=null,gr=null,Qa=!1,ar=null,Zl=0,uo=0,Sh=null,pl=-1,ml=0;function pt(){return ce&6?Be():pl!==-1?pl:pl=Be()}function yr(t){return t.mode&1?ce&2&&nt!==0?nt&-nt:GT.transition!==null?(ml===0&&(ml=ex()),ml):(t=ge,t!==0||(t=window.event,t=t===void 0?16:ax(t.type)),t):1}function sn(t,e,n,r){if(50<uo)throw uo=0,Sh=null,Error(j(185));la(t,n,r),(!(ce&2)||t!==Ye)&&(t===Ye&&(!(ce&2)&&(qc|=n),Qe===4&&er(t,nt)),Ct(t,r),n===1&&ce===0&&!(e.mode&1)&&(ii=Be()+500,$c&&jr()))}function Ct(t,e){var n=t.callbackNode;GC(t,e);var r=Dl(t,t===Ye?nt:0);if(r===0)n!==null&&bg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bg(n),e===1)t.tag===0?qT(py.bind(null,t)):Tx(py.bind(null,t)),$T(function(){!(ce&6)&&jr()}),n=null;else{switch(tx(r)){case 1:n=Ff;break;case 4:n=J_;break;case 16:n=Ml;break;case 536870912:n=Z_;break;default:n=Ml}n=Ew(n,yw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yw(t,e){if(pl=-1,ml=0,ce&6)throw Error(j(327));var n=t.callbackNode;if(qs()&&t.callbackNode!==n)return null;var r=Dl(t,t===Ye?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ec(t,r);else{e=r;var s=ce;ce|=2;var i=_w();(Ye!==t||nt!==e)&&(Cn=null,ii=Be()+500,Jr(t,e));do try{pk();break}catch(a){vw(t,a)}while(!0);Xf(),Xl.current=i,ce=s,Ve!==null?e=0:(Ye=null,nt=0,e=Qe)}if(e!==0){if(e===2&&(s=Yd(t),s!==0&&(r=s,e=Eh(t,s))),e===1)throw n=Bo,Jr(t,0),er(t,r),Ct(t,Be()),n;if(e===6)er(t,r);else{if(s=t.current.alternate,!(r&30)&&!hk(s)&&(e=ec(t,r),e===2&&(i=Yd(t),i!==0&&(r=i,e=Eh(t,i))),e===1))throw n=Bo,Jr(t,0),er(t,r),Ct(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:zr(t,_t,Cn);break;case 3:if(er(t,r),(r&130023424)===r&&(e=hp+500-Be(),10<e)){if(Dl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=sh(zr.bind(null,t,_t,Cn),e);break}zr(t,_t,Cn);break;case 4:if(er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dk(r/1960))-r,10<r){t.timeoutHandle=sh(zr.bind(null,t,_t,Cn),r);break}zr(t,_t,Cn);break;case 5:zr(t,_t,Cn);break;default:throw Error(j(329))}}}return Ct(t,Be()),t.callbackNode===n?yw.bind(null,t):null}function Eh(t,e){var n=co;return t.current.memoizedState.isDehydrated&&(Jr(t,e).flags|=256),t=ec(t,e),t!==2&&(e=_t,_t=n,e!==null&&Ch(e)),t}function Ch(t){_t===null?_t=t:_t.push.apply(_t,t)}function hk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!an(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~dp,e&=~qc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function py(t){if(ce&6)throw Error(j(327));qs();var e=Dl(t,0);if(!(e&1))return Ct(t,Be()),null;var n=ec(t,e);if(t.tag!==0&&n===2){var r=Yd(t);r!==0&&(e=r,n=Eh(t,r))}if(n===1)throw n=Bo,Jr(t,0),er(t,e),Ct(t,Be()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zr(t,_t,Cn),Ct(t,Be()),null}function fp(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(ii=Be()+500,$c&&jr())}}function as(t){ar!==null&&ar.tag===0&&!(ce&6)&&qs();var e=ce;ce|=1;var n=Ut.transition,r=ge;try{if(Ut.transition=null,ge=1,t)return t()}finally{ge=r,Ut.transition=n,ce=e,!(ce&6)&&jr()}}function pp(){Tt=js.current,ke(js)}function Jr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UT(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Gf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zl();break;case 3:ri(),ke(St),ke(ut),rp();break;case 5:np(r);break;case 4:ri();break;case 13:ke(Ie);break;case 19:ke(Ie);break;case 10:Jf(r.type._context);break;case 22:case 23:pp()}n=n.return}if(Ye=t,Ve=t=vr(t.current,null),nt=Tt=e,Qe=0,Bo=null,dp=qc=os=0,_t=co=null,qr!==null){for(e=0;e<qr.length;e++)if(n=qr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}qr=null}return t}function vw(t,e){do{var n=Ve;try{if(Xf(),dl.current=Yl,Kl){for(var r=Ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Kl=!1}if(is=0,Ge=$e=Ae=null,ao=!1,Do=0,up.current=null,n===null||n.return===null){Qe=1,Bo=e,Ve=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=ty(o);if(p!==null){p.flags&=-257,ny(p,o,a,i,e),p.mode&1&&ey(i,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var x=new Set;x.add(l),e.updateQueue=x}else g.add(l);break e}else{if(!(e&1)){ey(i,c,e),mp();break e}l=Error(j(426))}}else if(Ne&&a.mode&1){var w=ty(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),ny(w,o,a,i,e),Kf(si(l,a));break e}}i=l=si(l,a),Qe!==4&&(Qe=2),co===null?co=[i]:co.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=tw(i,l,e);Gg(i,m);break e;case 1:a=l;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(gr===null||!gr.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=nw(i,a,e);Gg(i,b);break e}}i=i.return}while(i!==null)}ww(n)}catch(E){e=E,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function _w(){var t=Xl.current;return Xl.current=Yl,t===null?Yl:t}function mp(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Ye===null||!(os&268435455)&&!(qc&268435455)||er(Ye,nt)}function ec(t,e){var n=ce;ce|=2;var r=_w();(Ye!==t||nt!==e)&&(Cn=null,Jr(t,e));do try{fk();break}catch(s){vw(t,s)}while(!0);if(Xf(),ce=n,Xl.current=r,Ve!==null)throw Error(j(261));return Ye=null,nt=0,Qe}function fk(){for(;Ve!==null;)xw(Ve)}function pk(){for(;Ve!==null&&!BC();)xw(Ve)}function xw(t){var e=Sw(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?ww(t):Ve=e,up.current=null}function ww(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ak(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,Ve=null;return}}else if(n=ok(n,e,Tt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Qe===0&&(Qe=5)}function zr(t,e,n){var r=ge,s=Ut.transition;try{Ut.transition=null,ge=1,mk(t,e,n,r)}finally{Ut.transition=s,ge=r}return null}function mk(t,e,n,r){do qs();while(ar!==null);if(ce&6)throw Error(j(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KC(t,i),t===Ye&&(Ve=Ye=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qa||(Qa=!0,Ew(Ml,function(){return qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ut.transition,Ut.transition=null;var o=ge;ge=1;var a=ce;ce|=4,up.current=null,ck(t,n),mw(n,t),MT(nh),Ll=!!th,nh=th=null,t.current=n,uk(n),VC(),ce=a,ge=o,Ut.transition=i}else t.current=n;if(Qa&&(Qa=!1,ar=t,Zl=s),i=t.pendingLanes,i===0&&(gr=null),$C(n.stateNode),Ct(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Jl)throw Jl=!1,t=bh,bh=null,t;return Zl&1&&t.tag!==0&&qs(),i=t.pendingLanes,i&1?t===Sh?uo++:(uo=0,Sh=t):uo=0,jr(),null}function qs(){if(ar!==null){var t=tx(Zl),e=Ut.transition,n=ge;try{if(Ut.transition=null,ge=16>t?16:t,ar===null)var r=!1;else{if(t=ar,ar=null,Zl=0,ce&6)throw Error(j(331));var s=ce;for(ce|=4,z=t.current;z!==null;){var i=z,o=i.child;if(z.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(z=c;z!==null;){var u=z;switch(u.tag){case 0:case 11:case 15:lo(8,u,i)}var h=u.child;if(h!==null)h.return=u,z=h;else for(;z!==null;){u=z;var f=u.sibling,p=u.return;if(hw(u),u===c){z=null;break}if(f!==null){f.return=p,z=f;break}z=p}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,z=o;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lo(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,z=m;break e}z=i.return}}var y=t.current;for(z=y;z!==null;){o=z;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,z=v;else e:for(o=y;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qc(9,a)}}catch(E){Me(a,a.return,E)}if(a===o){z=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,z=b;break e}z=a.return}}if(ce=s,jr(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Fc,t)}catch{}r=!0}return r}finally{ge=n,Ut.transition=e}}return!1}function my(t,e,n){e=si(n,e),e=tw(t,e,1),t=mr(t,e,1),e=pt(),t!==null&&(la(t,1,e),Ct(t,e))}function Me(t,e,n){if(t.tag===3)my(t,t,n);else for(;e!==null;){if(e.tag===3){my(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gr===null||!gr.has(r))){t=si(n,t),t=nw(e,t,1),e=mr(e,t,1),t=pt(),e!==null&&(la(e,1,t),Ct(e,t));break}}e=e.return}}function gk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(nt&n)===n&&(Qe===4||Qe===3&&(nt&130023424)===nt&&500>Be()-hp?Jr(t,0):dp|=n),Ct(t,e)}function bw(t,e){e===0&&(t.mode&1?(e=Da,Da<<=1,!(Da&130023424)&&(Da=4194304)):e=1);var n=pt();t=Fn(t,e),t!==null&&(la(t,e,n),Ct(t,n))}function yk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bw(t,n)}function vk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),bw(t,n)}var Sw;Sw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xt=!1,ik(t,e,n);xt=!!(t.flags&131072)}else xt=!1,Ne&&e.flags&1048576&&kx(e,Wl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fl(t,e),t=e.pendingProps;var s=ei(e,ut.current);Qs(e,n),s=ip(null,e,r,t,s,n);var i=op();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(i=!0,Ul(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ep(e),s.updater=Hc,e.stateNode=s,s._reactInternals=e,dh(e,r,t,n),e=ph(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&qf(e),dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=xk(r),t=Xt(r,t),s){case 0:e=fh(null,e,r,t,n);break e;case 1:e=iy(null,e,r,t,n);break e;case 11:e=ry(null,e,r,t,n);break e;case 14:e=sy(null,e,r,Xt(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),fh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),iy(t,e,r,s,n);case 3:e:{if(ow(e),t===null)throw Error(j(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ox(t,e),ql(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=si(Error(j(423)),e),e=oy(t,e,r,n,s);break e}else if(r!==s){s=si(Error(j(424)),e),e=oy(t,e,r,n,s);break e}else for(kt=pr(e.stateNode.containerInfo.firstChild),Nt=e,Ne=!0,en=null,n=Ax(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){e=Bn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return jx(e),t===null&&lh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,rh(r,s)?o=null:i!==null&&rh(r,i)&&(e.flags|=32),iw(t,e),dt(t,e,o,n),e.child;case 6:return t===null&&lh(e),null;case 13:return aw(t,e,n);case 4:return tp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),ry(t,e,r,s,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ee(Hl,r._currentValue),r._currentValue=o,i!==null)if(an(i.value,o)){if(i.children===s.children&&!St.current){e=Bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=jn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ch(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ch(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qs(e,n),s=Wt(s),r=r(s),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,s=Xt(r,e.pendingProps),s=Xt(r.type,s),sy(t,e,r,s,n);case 15:return rw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),fl(t,e),e.tag=1,Et(r)?(t=!0,Ul(e)):t=!1,Qs(e,n),ew(e,r,s),dh(e,r,s,n),ph(null,e,r,!0,t,n);case 19:return lw(t,e,n);case 22:return sw(t,e,n)}throw Error(j(156,e.tag))};function Ew(t,e){return X_(t,e)}function _k(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,n,r){return new _k(t,e,n,r)}function gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xk(t){if(typeof t=="function")return gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mf)return 11;if(t===Df)return 14}return 2}function vr(t,e){var n=t.alternate;return n===null?(n=Vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Es:return Zr(n.children,s,i,e);case jf:o=8,s|=8;break;case Md:return t=Vt(12,n,e,s|2),t.elementType=Md,t.lanes=i,t;case Dd:return t=Vt(13,n,e,s),t.elementType=Dd,t.lanes=i,t;case Ld:return t=Vt(19,n,e,s),t.elementType=Ld,t.lanes=i,t;case j_:return Gc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R_:o=10;break e;case O_:o=9;break e;case Mf:o=11;break e;case Df:o=14;break e;case Xn:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=Vt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Zr(t,e,n,r){return t=Vt(7,t,r,e),t.lanes=n,t}function Gc(t,e,n,r){return t=Vt(22,t,r,e),t.elementType=j_,t.lanes=n,t.stateNode={isHidden:!1},t}function Zu(t,e,n){return t=Vt(6,t,null,e),t.lanes=n,t}function ed(t,e,n){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ju(0),this.expirationTimes=ju(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ju(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yp(t,e,n,r,s,i,o,a,l){return t=new wk(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ep(i),t}function bk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ss,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Cw(t){if(!t)return Tr;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Et(n))return Cx(t,n,e)}return e}function Tw(t,e,n,r,s,i,o,a,l){return t=yp(n,r,!0,t,s,i,o,a,l),t.context=Cw(null),n=t.current,r=pt(),s=yr(n),i=jn(r,s),i.callback=e??null,mr(n,i,s),t.current.lanes=s,la(t,s,r),Ct(t,r),t}function Kc(t,e,n,r){var s=e.current,i=pt(),o=yr(s);return n=Cw(n),e.context===null?e.context=n:e.pendingContext=n,e=jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mr(s,e,o),t!==null&&(sn(t,s,o,i),ul(t,s,o)),o}function tc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vp(t,e){gy(t,e),(t=t.alternate)&&gy(t,e)}function Sk(){return null}var kw=typeof reportError=="function"?reportError:function(t){console.error(t)};function _p(t){this._internalRoot=t}Yc.prototype.render=_p.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Kc(t,e,null,null)};Yc.prototype.unmount=_p.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;as(function(){Kc(null,t,null,null)}),e[Ln]=null}};function Yc(t){this._internalRoot=t}Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=sx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zn.length&&e!==0&&e<Zn[n].priority;n++);Zn.splice(n,0,t),n===0&&ox(t)}};function xp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yy(){}function Ek(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=tc(o);i.call(c)}}var o=Tw(e,r,t,0,null,!1,!1,"",yy);return t._reactRootContainer=o,t[Ln]=o.current,Ao(t.nodeType===8?t.parentNode:t),as(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=tc(l);a.call(c)}}var l=yp(t,0,!1,null,null,!1,!1,"",yy);return t._reactRootContainer=l,t[Ln]=l.current,Ao(t.nodeType===8?t.parentNode:t),as(function(){Kc(e,l,n,r)}),l}function Jc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=tc(o);a.call(l)}}Kc(e,o,t,s)}else o=Ek(n,e,t,s,r);return tc(o)}nx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yi(e.pendingLanes);n!==0&&(Bf(e,n|1),Ct(e,Be()),!(ce&6)&&(ii=Be()+500,jr()))}break;case 13:as(function(){var r=Fn(t,1);if(r!==null){var s=pt();sn(r,t,1,s)}}),vp(t,1)}};Vf=function(t){if(t.tag===13){var e=Fn(t,134217728);if(e!==null){var n=pt();sn(e,t,134217728,n)}vp(t,134217728)}};rx=function(t){if(t.tag===13){var e=yr(t),n=Fn(t,e);if(n!==null){var r=pt();sn(n,t,e,r)}vp(t,e)}};sx=function(){return ge};ix=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};qd=function(t,e,n){switch(e){case"input":if(Vd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Uc(r);if(!s)throw Error(j(90));D_(r),Vd(r,s)}}}break;case"textarea":F_(t,n);break;case"select":e=n.value,e!=null&&Us(t,!!n.multiple,e,!1)}};H_=fp;Q_=as;var Ck={usingClientEntryPoint:!1,Events:[ua,Ns,Uc,$_,W_,fp]},zi={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tk={bundleType:zi.bundleType,version:zi.version,rendererPackageName:zi.rendererPackageName,rendererConfig:zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=K_(t),t===null?null:t.stateNode},findFiberByHostInstance:zi.findFiberByHostInstance||Sk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qa.isDisabled&&qa.supportsFiber)try{Fc=qa.inject(Tk),dn=qa}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ck;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xp(e))throw Error(j(200));return bk(t,e,null,n)};At.createRoot=function(t,e){if(!xp(t))throw Error(j(299));var n=!1,r="",s=kw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yp(t,1,!1,null,null,n,!1,r,s),t[Ln]=e.current,Ao(t.nodeType===8?t.parentNode:t),new _p(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=K_(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return as(t)};At.hydrate=function(t,e,n){if(!Xc(e))throw Error(j(200));return Jc(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!xp(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=kw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Tw(e,null,t,1,n??null,s,!1,i,o),t[Ln]=e.current,Ao(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Yc(e)};At.render=function(t,e,n){if(!Xc(e))throw Error(j(200));return Jc(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!Xc(t))throw Error(j(40));return t._reactRootContainer?(as(function(){Jc(null,null,t,!1,function(){t._reactRootContainer=null,t[Ln]=null})}),!0):!1};At.unstable_batchedUpdates=fp;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xc(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Jc(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function Nw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nw)}catch(t){console.error(t)}}Nw(),N_.exports=At;var kk=N_.exports,vy=kk;Od.createRoot=vy.createRoot,Od.hydrateRoot=vy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vo(){return Vo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vo.apply(this,arguments)}var lr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(lr||(lr={}));const _y="popstate";function Nk(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Th("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Pw(s)}return Pk(e,n,null,t)}function Ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Iw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ik(){return Math.random().toString(36).substr(2,8)}function xy(t,e){return{usr:t.state,key:t.key,idx:e}}function Th(t,e,n,r){return n===void 0&&(n=null),Vo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wi(e):e,{state:n,key:e&&e.key||r||Ik()})}function Pw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Pk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=lr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Vo({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=lr.Pop;let w=u(),m=w==null?null:w-c;c=w,l&&l({action:a,location:x.location,delta:m})}function f(w,m){a=lr.Push;let y=Th(x.location,w,m);c=u()+1;let v=xy(y,c),b=x.createHref(y);try{o.pushState(v,"",b)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(b)}i&&l&&l({action:a,location:x.location,delta:1})}function p(w,m){a=lr.Replace;let y=Th(x.location,w,m);c=u();let v=xy(y,c),b=x.createHref(y);o.replaceState(v,"",b),i&&l&&l({action:a,location:x.location,delta:0})}function g(w){let m=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof w=="string"?w:Pw(w);return y=y.replace(/ $/,"%20"),Ue(m,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,m)}let x={get action(){return a},get location(){return t(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(_y,h),l=w,()=>{s.removeEventListener(_y,h),l=null}},createHref(w){return e(s,w)},createURL:g,encodeLocation(w){let m=g(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(w){return o.go(w)}};return x}var wy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wy||(wy={}));function Ak(t,e,n){return n===void 0&&(n="/"),Rk(t,e,n)}function Rk(t,e,n,r){let s=typeof e=="string"?wi(e):e,i=Ow(s.pathname||"/",n);if(i==null)return null;let o=Aw(t);Ok(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Hk(i);a=Uk(o[l],c)}return a}function Aw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ue(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=es([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Ue(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Aw(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Vk(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Rw(i.path))s(i,o,l)}),e}function Rw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Rw(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Ok(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jk=/^:[\w-]+$/,Mk=3,Dk=2,Lk=1,Fk=10,Bk=-2,by=t=>t==="*";function Vk(t,e){let n=t.split("/"),r=n.length;return n.some(by)&&(r+=Bk),e&&(r+=Dk),n.filter(s=>!by(s)).reduce((s,i)=>s+(jk.test(i)?Mk:i===""?Lk:Fk),r)}function zk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Uk(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=$k({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:es([i,h.pathname]),pathnameBase:Kk(es([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=es([i,h.pathnameBase]))}return o}function $k(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Wk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let x=a[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const g=a[h];return p&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Wk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Iw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Hk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Iw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ow(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Qk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?wi(t):t;return{pathname:n?n.startsWith("/")?n:qk(n,e):e,search:Yk(r),hash:Xk(s)}}function qk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function td(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jw(t,e){let n=Gk(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Mw(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=wi(t):(s=Vo({},t),Ue(!s.pathname||!s.pathname.includes("?"),td("?","pathname","search",s)),Ue(!s.pathname||!s.pathname.includes("#"),td("#","pathname","hash",s)),Ue(!s.search||!s.search.includes("#"),td("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Qk(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const es=t=>t.join("/").replace(/\/\/+/g,"/"),Kk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Xk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Jk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Dw=["post","put","patch","delete"];new Set(Dw);const Zk=["get",...Dw];new Set(Zk);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zo(){return zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zo.apply(this,arguments)}const wp=_.createContext(null),eN=_.createContext(null),ha=_.createContext(null),Zc=_.createContext(null),ms=_.createContext({outlet:null,matches:[],isDataRoute:!1}),Lw=_.createContext(null);function fa(){return _.useContext(Zc)!=null}function eu(){return fa()||Ue(!1),_.useContext(Zc).location}function Fw(t){_.useContext(ha).static||_.useLayoutEffect(t)}function gs(){let{isDataRoute:t}=_.useContext(ms);return t?fN():tN()}function tN(){fa()||Ue(!1);let t=_.useContext(wp),{basename:e,future:n,navigator:r}=_.useContext(ha),{matches:s}=_.useContext(ms),{pathname:i}=eu(),o=JSON.stringify(jw(s,n.v7_relativeSplatPath)),a=_.useRef(!1);return Fw(()=>{a.current=!0}),_.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Mw(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:es([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,i,t])}function nN(t,e){return rN(t,e)}function rN(t,e,n,r){fa()||Ue(!1);let{navigator:s,static:i}=_.useContext(ha),{matches:o}=_.useContext(ms),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=eu(),h;if(e){var f;let m=typeof e=="string"?wi(e):e;c==="/"||(f=m.pathname)!=null&&f.startsWith(c)||Ue(!1),h=m}else h=u;let p=h.pathname||"/",g=p;if(c!=="/"){let m=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(m.length).join("/")}let x=Ak(t,{pathname:g}),w=lN(x&&x.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:es([c,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:es([c,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r);return e&&w?_.createElement(Zc.Provider,{value:{location:zo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:lr.Pop}},w):w}function sN(){let t=hN(),e=Jk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const iN=_.createElement(sN,null);class oN extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(ms.Provider,{value:this.props.routeContext},_.createElement(Lw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aN(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(wp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(ms.Provider,{value:e},r)}function lN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Ue(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,g=!1,x=null,w=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,x=h.route.errorElement||iN,l&&(c<0&&f===0?(pN("route-fallback"),g=!0,w=null):c===f&&(g=!0,w=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),y=()=>{let v;return p?v=x:g?v=w:h.route.Component?v=_.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,_.createElement(aN,{match:h,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(oN,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}var Bw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Bw||{}),Vw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vw||{});function cN(t){let e=_.useContext(wp);return e||Ue(!1),e}function uN(t){let e=_.useContext(eN);return e||Ue(!1),e}function dN(t){let e=_.useContext(ms);return e||Ue(!1),e}function zw(t){let e=dN(),n=e.matches[e.matches.length-1];return n.route.id||Ue(!1),n.route.id}function hN(){var t;let e=_.useContext(Lw),n=uN(),r=zw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function fN(){let{router:t}=cN(Bw.UseNavigateStable),e=zw(Vw.UseNavigateStable),n=_.useRef(!1);return Fw(()=>{n.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zo({fromRouteId:e},i)))},[t,e])}const Sy={};function pN(t,e,n){Sy[t]||(Sy[t]=!0)}function mN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gN(t){let{to:e,replace:n,state:r,relative:s}=t;fa()||Ue(!1);let{future:i,static:o}=_.useContext(ha),{matches:a}=_.useContext(ms),{pathname:l}=eu(),c=gs(),u=Mw(e,jw(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return _.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Ur(t){Ue(!1)}function yN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=lr.Pop,navigator:i,static:o=!1,future:a}=t;fa()&&Ue(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:i,static:o,future:zo({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=wi(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:g="default"}=r,x=_.useMemo(()=>{let w=Ow(u,l);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:g},navigationType:s}},[l,u,h,f,p,g,s]);return x==null?null:_.createElement(ha.Provider,{value:c},_.createElement(Zc.Provider,{children:n,value:x}))}function vN(t){let{children:e,location:n}=t;return nN(kh(e),n)}new Promise(()=>{});function kh(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){n.push.apply(n,kh(r.props.children,i));return}r.type!==Ur&&Ue(!1),!r.props.index||!r.props.children||Ue(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=kh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const _N="6";try{window.__reactRouterVersion=_N}catch{}const xN="startTransition",Ey=gC[xN];function wN(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=Nk({window:s,v5Compat:!0}));let o=i.current,[a,l]=_.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=_.useCallback(h=>{c&&Ey?Ey(()=>l(h)):l(h)},[l,c]);return _.useLayoutEffect(()=>o.listen(u),[o,u]),_.useEffect(()=>mN(r),[r]),_.createElement(yN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Cy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Cy||(Cy={}));var Ty;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ty||(Ty={}));const bN=_.createContext();function SN(t,e){switch(e.type){case"JOIN":return{player:{...t.player,room:e.payload}};case"LOGIN":return{player:{...t.player,username:e.payload,points:0}};case"UPDATE":return{player:{...t.player,...e.payload}};case"LOGOUT":return{player:null};default:return t}}const EN=({children:t})=>{const[e,n]=_.useReducer(SN,{player:null});return d.jsx(bN.Provider,{value:{...e,dispatch:n},children:t})},xn=Object.create(null);xn.open="0";xn.close="1";xn.ping="2";xn.pong="3";xn.message="4";xn.upgrade="5";xn.noop="6";const yl=Object.create(null);Object.keys(xn).forEach(t=>{yl[xn[t]]=t});const Nh={type:"error",data:"parser error"},Uw=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",$w=typeof ArrayBuffer=="function",Ww=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,bp=({type:t,data:e},n,r)=>Uw&&e instanceof Blob?n?r(e):ky(e,r):$w&&(e instanceof ArrayBuffer||Ww(e))?n?r(e):ky(new Blob([e]),r):r(xn[t]+(e||"")),ky=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Ny(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let nd;function CN(t,e){if(Uw&&t.data instanceof Blob)return t.data.arrayBuffer().then(Ny).then(e);if($w&&(t.data instanceof ArrayBuffer||Ww(t.data)))return e(Ny(t.data));bp(t,!1,n=>{nd||(nd=new TextEncoder),e(nd.encode(n))})}const Iy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ji=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Iy.length;t++)Ji[Iy.charCodeAt(t)]=t;const TN=t=>{let e=t.length*.75,n=t.length,r,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)i=Ji[t.charCodeAt(r)],o=Ji[t.charCodeAt(r+1)],a=Ji[t.charCodeAt(r+2)],l=Ji[t.charCodeAt(r+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return c},kN=typeof ArrayBuffer=="function",Sp=(t,e)=>{if(typeof t!="string")return{type:"message",data:Hw(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:NN(t.substring(1),e)}:yl[n]?t.length>1?{type:yl[n],data:t.substring(1)}:{type:yl[n]}:Nh},NN=(t,e)=>{if(kN){const n=TN(t);return Hw(n,e)}else return{base64:!0,data:t}},Hw=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Qw="",IN=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,o)=>{bp(i,!1,a=>{r[o]=a,++s===n&&e(r.join(Qw))})})},PN=(t,e)=>{const n=t.split(Qw),r=[];for(let s=0;s<n.length;s++){const i=Sp(n[s],e);if(r.push(i),i.type==="error")break}return r};function AN(){return new TransformStream({transform(t,e){CN(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let rd;function Ga(t){return t.reduce((e,n)=>e+n.length,0)}function Ka(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function RN(t,e){rd||(rd=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Ga(n)<1)break;const l=Ka(n,1);i=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Ga(n)<2)break;const l=Ka(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(Ga(n)<8)break;const l=Ka(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Nh);break}s=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Ga(n)<s)break;const l=Ka(n,s);a.enqueue(Sp(i?l:rd.decode(l),e)),r=0}if(s===0||s>t){a.enqueue(Nh);break}}}})}const qw=4;function ze(t){if(t)return ON(t)}function ON(t){for(var e in ze.prototype)t[e]=ze.prototype[e];return t}ze.prototype.on=ze.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ze.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};ze.prototype.off=ze.prototype.removeListener=ze.prototype.removeAllListeners=ze.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};ze.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};ze.prototype.emitReserved=ze.prototype.emit;ze.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ze.prototype.hasListeners=function(t){return!!this.listeners(t).length};const tu=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Ft=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),jN="arraybuffer";function Gw(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const MN=Ft.setTimeout,DN=Ft.clearTimeout;function nu(t,e){e.useNativeTimers?(t.setTimeoutFn=MN.bind(Ft),t.clearTimeoutFn=DN.bind(Ft)):(t.setTimeoutFn=Ft.setTimeout.bind(Ft),t.clearTimeoutFn=Ft.clearTimeout.bind(Ft))}const LN=1.33;function FN(t){return typeof t=="string"?BN(t):Math.ceil((t.byteLength||t.size)*LN)}function BN(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Kw(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function VN(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function zN(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class UN extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Ep extends ze{constructor(e){super(),this.writable=!1,nu(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new UN(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Sp(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=VN(e);return n.length?"?"+n:""}}class $N extends Ep{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};PN(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,IN(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Kw()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Yw=!1;try{Yw=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const WN=Yw;function HN(){}class QN extends $N{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class fn extends ze{constructor(e,n,r){super(),this.createRequest=e,nu(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Gw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=fn.requestsCount++,fn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=HN,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete fn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}fn.requestsCount=0;fn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Py);else if(typeof addEventListener=="function"){const t="onpagehide"in Ft?"pagehide":"unload";addEventListener(t,Py,!1)}}function Py(){for(let t in fn.requests)fn.requests.hasOwnProperty(t)&&fn.requests[t].abort()}const qN=function(){const t=Xw({xdomain:!1});return t&&t.responseType!==null}();class GN extends QN{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=qN&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new fn(Xw,this.uri(),e)}}function Xw(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||WN))return new XMLHttpRequest}catch{}if(!e)try{return new Ft[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Jw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class KN extends Ep{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Jw?{}:Gw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;bp(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&tu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Kw()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const sd=Ft.WebSocket||Ft.MozWebSocket;class YN extends KN{createSocket(e,n,r){return Jw?new sd(e,n,r):n?new sd(e,n):new sd(e)}doWrite(e,n){this.ws.send(n)}}class XN extends Ep{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=RN(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=AN();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&tu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const JN={websocket:YN,webtransport:XN,polling:GN},ZN=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,eI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ih(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=ZN.exec(t||""),i={},o=14;for(;o--;)i[eI[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=tI(i,i.path),i.queryKey=nI(i,i.query),i}function tI(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function nI(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const Ph=typeof addEventListener=="function"&&typeof removeEventListener=="function",vl=[];Ph&&addEventListener("offline",()=>{vl.forEach(t=>t())},!1);class _r extends ze{constructor(e,n){if(super(),this.binaryType=jN,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Ih(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Ih(n.host).host);nu(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zN(this.opts.query)),Ph&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=qw,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&_r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",_r.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=FN(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,tu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(_r.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ph&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=vl.indexOf(this._offlineEventListener);r!==-1&&vl.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}_r.protocol=qw;class rI extends _r{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;_r.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;_r.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function i(){r||(r=!0,u(),n.close(),n=null)}const o=h=>{const f=new Error("probe error: "+h);f.transport=n.name,i(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function l(){o("socket closed")}function c(h){n&&h.name!==n.name&&i()}const u=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",s),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let sI=class extends rI{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>JN[s]).filter(s=>!!s)),super(e,r)}};function iI(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Ih(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const oI=typeof ArrayBuffer=="function",aI=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Zw=Object.prototype.toString,lI=typeof Blob=="function"||typeof Blob<"u"&&Zw.call(Blob)==="[object BlobConstructor]",cI=typeof File=="function"||typeof File<"u"&&Zw.call(File)==="[object FileConstructor]";function Cp(t){return oI&&(t instanceof ArrayBuffer||aI(t))||lI&&t instanceof Blob||cI&&t instanceof File}function _l(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(_l(t[n]))return!0;return!1}if(Cp(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return _l(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&_l(t[n]))return!0;return!1}function uI(t){const e=[],n=t.data,r=t;return r.data=Ah(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Ah(t,e){if(!t)return t;if(Cp(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Ah(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Ah(t[r],e));return n}return t}function dI(t,e){return t.data=Rh(t.data,e),delete t.attachments,t}function Rh(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Rh(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Rh(t[n],e));return t}const hI=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],fI=5;var oe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(oe||(oe={}));class pI{constructor(e){this.replacer=e}encode(e){return(e.type===oe.EVENT||e.type===oe.ACK)&&_l(e)?this.encodeAsBinary({type:e.type===oe.EVENT?oe.BINARY_EVENT:oe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===oe.BINARY_EVENT||e.type===oe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=uI(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function Ay(t){return Object.prototype.toString.call(t)==="[object Object]"}class Tp extends ze{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===oe.BINARY_EVENT;r||n.type===oe.BINARY_ACK?(n.type=r?oe.EVENT:oe.ACK,this.reconstructor=new mI(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Cp(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(oe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===oe.BINARY_EVENT||r.type===oe.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(Tp.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case oe.CONNECT:return Ay(n);case oe.DISCONNECT:return n===void 0;case oe.CONNECT_ERROR:return typeof n=="string"||Ay(n);case oe.EVENT:case oe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&hI.indexOf(n[0])===-1);case oe.ACK:case oe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class mI{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=dI(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const gI=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Tp,Encoder:pI,get PacketType(){return oe},protocol:fI},Symbol.toStringTag,{value:"Module"}));function Zt(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const yI=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class e1 extends ze{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Zt(e,"open",this.onopen.bind(this)),Zt(e,"packet",this.onpacket.bind(this)),Zt(e,"error",this.onerror.bind(this)),Zt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(yI.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:oe.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,h=n.pop();this._registerAckCallback(u,h),o.id=u}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(o,a)=>o?s(o):r(a);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:oe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case oe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case oe.EVENT:case oe.BINARY_EVENT:this.onevent(e);break;case oe.ACK:case oe.BINARY_ACK:this.onack(e);break;case oe.DISCONNECT:this.ondisconnect();break;case oe.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:oe.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function bi(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}bi.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};bi.prototype.reset=function(){this.attempts=0};bi.prototype.setMin=function(t){this.ms=t};bi.prototype.setMax=function(t){this.max=t};bi.prototype.setJitter=function(t){this.jitter=t};class Oh extends ze{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,nu(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new bi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||gI;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new sI(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Zt(n,"open",function(){r.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Zt(n,"error",i);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Zt(e,"ping",this.onping.bind(this)),Zt(e,"data",this.ondata.bind(this)),Zt(e,"error",this.onerror.bind(this)),Zt(e,"close",this.onclose.bind(this)),Zt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){tu(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new e1(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ui={};function xl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=iI(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=Ui[s]&&i in Ui[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new Oh(r,e):(Ui[s]||(Ui[s]=new Oh(r,e)),l=Ui[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(xl,{Manager:Oh,Socket:e1,io:xl,connect:xl});const vI="http://localhost:3001",t1=xl(vI,{transports:["websocket"]}),n1=_.createContext(t1),_I=({children:t})=>d.jsx(n1.Provider,{value:{socket:t1},children:t});function xI(){const t=_.useContext(n1);if(!t)throw new Error("useSocketContext must be used within a SocketContextProvider");return t}const wI=_.createContext(),r1={quizId:null,isHost:!1,activeQuestion:null,questions:[],participants:[],status:"idle",title:"",currentQuestionIndex:0};function bI(t,e){switch(e.type){case"CREATE_QUIZ":return{...t,isHost:!0,title:e.payload.title,questions:e.payload.questions,status:"waiting"};case"SET_QUIZ_ID":return{...t,quizId:e.payload};case"JOIN_QUIZ":return{...t,quizId:e.payload.quizId,title:e.payload.title,status:"waiting",isHost:!1};case"UPDATE_PARTICIPANTS":return{...t,participants:e.payload};case"START_QUIZ":return{...t,status:"active",currentQuestionIndex:0};case"SET_ACTIVE_QUESTION":return{...t,activeQuestion:e.payload,currentQuestionIndex:e.payload.index};case"NEXT_QUESTION":return{...t,currentQuestionIndex:t.currentQuestionIndex+1};case"FINISH_QUIZ":return{...t,status:"completed"};case"RESET":return r1;default:return t}}function SI({children:t}){const[e,n]=_.useReducer(bI,r1);return d.jsx(wI.Provider,{value:{state:e,dispatch:n},children:t})}const s1=_.createContext();function EI({children:t}){const[e,n]=_.useState(!1),[r,s]=_.useState(.7),i=_.useRef({}),o={click:"/sounds/click.mp3",correct:"/sounds/correct.mp3",incorrect:"/sounds/incorrect.mp3",success:"/sounds/success.mp3",timeout:"/sounds/timeout.mp3"};_.useEffect(()=>(Object.entries(o).forEach(([u,h])=>{const f=new Audio(h);f.preload="auto",i.current[u]=f}),()=>{Object.values(i.current).forEach(u=>{u.pause(),u.src=""}),i.current={}}),[]),_.useEffect(()=>{Object.values(i.current).forEach(u=>{u.volume=e?0:r})},[r,e]);const a=u=>{if(!u||!i.current[u])return;const h=new Audio(o[u]);h.volume=e?0:r,h.play().catch(f=>console.error("Error playing sound:",f))},l=()=>{n(u=>!u)},c=u=>{u>=0&&u<=1&&s(u)};return d.jsx(s1.Provider,{value:{isMuted:e,volume:r,playSound:a,toggleMute:l,changeVolume:c},children:t})}function CI(){const t=_.useContext(s1);if(t===void 0)throw new Error("useAudio must be used within an AudioProvider");return t}function i1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=i1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function o1(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=i1(t))&&(r&&(r+=" "),r+=e);return r}function ne({children:t,className:e,variant:n="primary",size:r="md",...s}){const i="btn-shadow relative overflow-hidden rounded-md font-semibold transition-all duration-300",o={primary:"bg-gradient-primary text-white hover:shadow-glow",secondary:"bg-gradient-secondary text-white",outline:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-white",ghost:"bg-transparent text-primary hover:bg-primary/10",danger:"bg-red-600 text-white hover:bg-red-700"},a={sm:"py-1 px-3 text-sm",md:"py-2 px-4 text-base",lg:"py-3 px-6 text-lg",xl:"py-4 px-8 text-xl"};return d.jsxs("button",{className:o1(i,o[n],a[r],e),...s,children:[d.jsx("span",{className:"relative z-10",children:t}),d.jsx("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 bg-gradient-to-r from-transparent via-white/5 to-transparent blur-sm transition-opacity duration-1000"})]})}let TI={data:""},kI=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||TI,NI=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,II=/\/\*[^]*?\*\/|  +/g,Ry=/\n+/g,tr=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?tr(o,i):i+"{"+tr(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=tr(o,e?e.replace(/([^,])+/g,a=>i.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=tr.p?tr.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},En={},a1=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+a1(t[n]);return e}return t},PI=(t,e,n,r,s)=>{let i=a1(t),o=En[i]||(En[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!En[o]){let l=i!==t?t:(c=>{let u,h,f=[{}];for(;u=NI.exec(c.replace(II,""));)u[4]?f.shift():u[3]?(h=u[3].replace(Ry," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(Ry," ").trim();return f[0]})(t);En[o]=tr(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&En.g?En.g:null;return n&&(En.g=En[o]),((l,c,u,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(En[o],e,r,a),o},AI=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":tr(a,""):a===!1?"":a}return r+s+(o??"")},"");function ru(t){let e=this||{},n=t.call?t(e.p):t;return PI(n.unshift?n.raw?AI(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,kI(e.target),e.g,e.o,e.k)}let l1,jh,Mh;ru.bind({g:1});let Vn=ru.bind({k:1});function RI(t,e,n,r){tr.p=e,l1=t,jh=n,Mh=r}function Mr(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:jh&&jh()},a),n.o=/ *go\d+/.test(l),a.className=ru.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Mh&&c[0]&&Mh(a),l1(c,a)}return s}}var OI=t=>typeof t=="function",nc=(t,e)=>OI(t)?t(e):t,jI=(()=>{let t=0;return()=>(++t).toString()})(),c1=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),MI=20,wl=new Map,DI=1e3,Oy=t=>{if(wl.has(t))return;let e=setTimeout(()=>{wl.delete(t),ys({type:4,toastId:t})},DI);wl.set(t,e)},LI=t=>{let e=wl.get(t);e&&clearTimeout(e)},Dh=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,MI)};case 1:return e.toast.id&&LI(e.toast.id),{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return t.toasts.find(i=>i.id===n.id)?Dh(t,{type:1,toast:n}):Dh(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?Oy(r):t.toasts.forEach(i=>{Oy(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},bl=[],Sl={toasts:[],pausedAt:void 0},ys=t=>{Sl=Dh(Sl,t),bl.forEach(e=>{e(Sl)})},FI={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},BI=(t={})=>{let[e,n]=_.useState(Sl);_.useEffect(()=>(bl.push(n),()=>{let s=bl.indexOf(n);s>-1&&bl.splice(s,1)}),[e]);let r=e.toasts.map(s=>{var i,o;return{...t,...t[s.type],...s,duration:s.duration||((i=t[s.type])==null?void 0:i.duration)||(t==null?void 0:t.duration)||FI[s.type],style:{...t.style,...(o=t[s.type])==null?void 0:o.style,...s.style}}});return{...e,toasts:r}},VI=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||jI()}),pa=t=>(e,n)=>{let r=VI(e,t,n);return ys({type:2,toast:r}),r.id},wt=(t,e)=>pa("blank")(t,e);wt.error=pa("error");wt.success=pa("success");wt.loading=pa("loading");wt.custom=pa("custom");wt.dismiss=t=>{ys({type:3,toastId:t})};wt.remove=t=>ys({type:4,toastId:t});wt.promise=(t,e,n)=>{let r=wt.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(s=>(wt.success(nc(e.success,s),{id:r,...n,...n==null?void 0:n.success}),s)).catch(s=>{wt.error(nc(e.error,s),{id:r,...n,...n==null?void 0:n.error})}),t};var zI=(t,e)=>{ys({type:1,toast:{id:t,height:e}})},UI=()=>{ys({type:5,time:Date.now()})},$I=t=>{let{toasts:e,pausedAt:n}=BI(t);_.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(i-a.createdAt);if(l<0){a.visible&&wt.dismiss(a.id);return}return setTimeout(()=>wt.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=_.useCallback(()=>{n&&ys({type:6,time:Date.now()})},[n]),s=_.useCallback((i,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},u=e.filter(p=>(p.position||c)===(i.position||c)&&p.height),h=u.findIndex(p=>p.id===i.id),f=u.filter((p,g)=>g<h&&p.visible).length;return u.filter(p=>p.visible).slice(...a?[f+1]:[0,f]).reduce((p,g)=>p+(g.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:zI,startPause:UI,endPause:r,calculateOffset:s}}},WI=Vn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,HI=Vn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,QI=Vn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qI=Mr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${WI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${HI} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${QI} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,GI=Vn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,KI=Mr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${GI} 1s linear infinite;
`,YI=Vn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,XI=Vn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,JI=Mr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${YI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${XI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ZI=Mr("div")`
  position: absolute;
`,eP=Mr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,tP=Vn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nP=Mr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${tP} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,rP=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?_.createElement(nP,null,e):e:n==="blank"?null:_.createElement(eP,null,_.createElement(KI,{...r}),n!=="loading"&&_.createElement(ZI,null,n==="error"?_.createElement(qI,{...r}):_.createElement(JI,{...r})))},sP=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,iP=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,oP="0%{opacity:0;} 100%{opacity:1;}",aP="0%{opacity:1;} 100%{opacity:0;}",lP=Mr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,cP=Mr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,uP=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=c1()?[oP,aP]:[sP(n),iP(n)];return{animation:e?`${Vn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Vn(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},u1=_.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?uP(t.position||e||"top-center",t.visible):{opacity:0},i=_.createElement(rP,{toast:t}),o=_.createElement(cP,{...t.ariaProps},nc(t.message,t));return _.createElement(lP,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):_.createElement(_.Fragment,null,i,o))});RI(_.createElement);var dP=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=_.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return _.createElement("div",{ref:i,className:e,style:n},s)},hP=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:c1()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},fP=ru`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ya=16,pP=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:a,handlers:l}=$I(n);return _.createElement("div",{style:{position:"fixed",zIndex:9999,top:Ya,left:Ya,right:Ya,bottom:Ya,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let u=c.position||e,h=l.calculateOffset(c,{reverseOrder:t,gutter:r,defaultPosition:e}),f=hP(u,h);return _.createElement(dP,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?fP:"",style:f},c.type==="custom"?nc(c.message,c):s?s(c):_.createElement(u1,{toast:c,position:u}))}))},me=wt;class mP{constructor(){this.sounds={},this.backgroundMusic=null,this.isMuted=!1,this.volume=.5,this.backgroundVolume=.3;const e=localStorage.getItem("icctqb-muted");e!==null&&(this.isMuted=e==="true");const n=localStorage.getItem("icctqb-volume");n!==null&&(this.volume=parseFloat(n)),this.preloadSounds()}preloadSounds(){this.registerSound("click","/sounds/click.mp3"),this.registerSound("hover","/sounds/hover.mp3"),this.registerSound("success","/sounds/success.mp3"),this.registerSound("error","/sounds/error.mp3"),this.registerSound("transition","/sounds/transition.mp3"),this.registerSound("countdown","/sounds/countdown.mp3"),this.registerSound("countdownFinish","/sounds/countdown-finish.mp3"),this.registerSound("correctAnswer","/sounds/correct-answer.mp3"),this.registerSound("wrongAnswer","/sounds/wrong-answer.mp3"),this.registerSound("timesUp","/sounds/times-up.mp3"),this.registerSound("nextQuestion","/sounds/next-question.mp3"),this.registerSound("celebration","/sounds/celebration.mp3"),this.registerBackgroundMusic("lobby","/sounds/music/lobby-music.mp3"),this.registerBackgroundMusic("game","/sounds/music/game-music.mp3"),this.registerBackgroundMusic("results","/sounds/music/results-music.mp3")}registerSound(e,n){this.sounds[e]={path:n,audio:null}}registerBackgroundMusic(e,n){this.sounds[`bg_${e}`]||(this.sounds[`bg_${e}`]={path:n,audio:null,isBackgroundMusic:!0})}_initializeAudio(e){if(!this.sounds[e])return null;if(!this.sounds[e].audio){const n=new Audio(this.sounds[e].path);this.sounds[e].isBackgroundMusic?(n.volume=this.backgroundVolume*this.volume,n.loop=!0):n.volume=this.volume,this.sounds[e].audio=n}return this.sounds[e].audio}play(e){if(this.isMuted)return;const n=this._initializeAudio(e);n&&(n.currentTime=0,n.play().catch(r=>{console.warn(`Failed to play sound ${e}:`,r)}))}stopSound(e){!this.sounds[e]||!this.sounds[e].audio||(this.sounds[e].audio.pause(),this.sounds[e].audio.currentTime=0)}playBackgroundMusic(e){this.backgroundMusic?this.fadeOut(this.backgroundMusic,()=>{this.stopSound(this.backgroundMusic),this._startNewBackgroundMusic(e)}):this._startNewBackgroundMusic(e)}_startNewBackgroundMusic(e){const n=`bg_${e}`;if(this.backgroundMusic=n,this.isMuted)return;const r=this._initializeAudio(n);r&&(r.volume=0,r.play().catch(s=>{console.warn(`Failed to play background music ${e}:`,s)}),this.fadeIn(n))}fadeIn(e,n=1e3){if(!this.sounds[e]||!this.sounds[e].audio)return;const r=this.sounds[e].audio,s=this.sounds[e].isBackgroundMusic?this.backgroundVolume*this.volume:this.volume;let i=r.volume;const o=s-i,a=performance.now(),l=c=>{const u=c-a,h=Math.min(u/n,1);r.volume=i+o*h,h<1&&requestAnimationFrame(l)};requestAnimationFrame(l)}fadeOut(e,n,r=1e3){if(!this.sounds[e]||!this.sounds[e].audio){n&&n();return}const s=this.sounds[e].audio,i=s.volume,o=performance.now(),a=l=>{const c=l-o,u=Math.min(c/r,1);s.volume=i*(1-u),u<1?requestAnimationFrame(a):n&&n()};requestAnimationFrame(a)}toggleMute(){return this.isMuted=!this.isMuted,localStorage.setItem("icctqb-muted",this.isMuted.toString()),Object.keys(this.sounds).forEach(e=>{this.sounds[e].audio&&(this.isMuted?this.sounds[e].audio.volume=0:this.sounds[e].audio.volume=this.sounds[e].isBackgroundMusic?this.backgroundVolume*this.volume:this.volume)}),this.isMuted}setVolume(e){this.volume=Math.max(0,Math.min(1,e)),localStorage.setItem("icctqb-volume",this.volume.toString()),Object.keys(this.sounds).forEach(n=>{this.sounds[n].audio&&!this.isMuted&&(this.sounds[n].audio.volume=this.sounds[n].isBackgroundMusic?this.backgroundVolume*this.volume:this.volume)})}}const fe=new mP;function su(t={}){const{pageType:e=null,playBackgroundMusic:n=!0}=t;return _.useEffect(()=>{if(n&&e){let r="lobby";switch(e){case"home":r="lobby";break;case"host":case"participant":t.step==="waiting"||t.step==="enter-code"||t.step==="enter-info"||t.step==="create-questions"?r="lobby":t.step==="quiz-active"||t.step==="view-participants"?r="game":t.step==="quiz-completed"&&(r="results");break;default:r="lobby"}fe.playBackgroundMusic(r)}return t.playEntranceSound&&fe.play("transition"),()=>{t.stopMusicOnUnmount&&fe.fadeOut(fe.backgroundMusic,()=>{fe.stopSound(fe.backgroundMusic),fe.backgroundMusic=null})}},[e,n,t.step,t.playEntranceSound,t.stopMusicOnUnmount]),{play:r=>fe.play(r),playSuccess:()=>fe.play("success"),playError:()=>fe.play("error"),playClick:()=>fe.play("click"),playHover:()=>fe.play("hover"),playCorrect:()=>fe.play("correctAnswer"),playWrong:()=>fe.play("wrongAnswer"),playCountdown:()=>fe.play("countdown"),playCountdownFinish:()=>fe.play("countdownFinish"),playTimesUp:()=>fe.play("timesUp"),playNextQuestion:()=>fe.play("nextQuestion"),playCelebration:()=>fe.play("celebration"),toggleMute:()=>fe.toggleMute(),setVolume:r=>fe.setVolume(r),isMuted:fe.isMuted,volume:fe.volume}}function gP(){const t=gs(),{socket:e}=xI(),[n,r]=_.useState(!1),s=su({pageType:"home",playBackgroundMusic:!0,playEntranceSound:!0});_.useEffect(()=>{const c=setTimeout(()=>{r(!0)},100);return e.on("game:errorMessage",u=>{me.error(u),s.playError()}),()=>{e.off("game:errorMessage"),clearTimeout(c)}},[e,s]);const i=()=>{s.playClick(),s.play("transition"),t("/host")},o=()=>{s.playClick(),s.play("transition"),t("/participant")},l=(c=>{const u=[];for(let h=0;h<c;h++)u.push({id:h,size:Math.random()*20+5,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${Math.random()*20+20}s`,animationDelay:`${Math.random()*5}s`,opacity:Math.random()*.3+.1});return u})(15);return d.jsxs("section",{className:"flex min-h-screen w-full flex-col items-center justify-center overflow-hidden",children:[d.jsxs("div",{className:"fixed inset-0 -z-10",children:[d.jsx("img",{src:"https://i.imgur.com/NSkjBnJ.jpeg",className:"w-full h-full object-cover",alt:"background"}),l.map(c=>d.jsx("div",{className:"absolute rounded-full bg-white",style:{width:`${c.size}px`,height:`${c.size}px`,left:c.left,top:c.top,opacity:c.opacity,animation:`float ${c.animationDuration} infinite ease-in-out`,animationDelay:c.animationDelay}},c.id))]}),d.jsxs("div",{className:`transition-all duration-1000 ease-out transform ${n?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-8 h-40 mx-auto animate-float",alt:"ICCT School Logo"}),d.jsx("h1",{className:"text-center text-6xl font-bold mb-12 text-white",style:{textShadow:"0 0 10px #06BEE1, 0 0 20px #06BEE1, 0 0 30px #06BEE1",WebkitTextStroke:"1px #06BEE1",animation:"pulse 2s infinite ease-in-out"},children:"ICCT QuizBee"}),d.jsxs("div",{className:`flex flex-col gap-8 w-full max-w-lg px-4 transition-all duration-1000 delay-300 ease-out transform ${n?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,children:[d.jsxs(ne,{onClick:i,className:"btn-primary py-10 text-3xl font-bold relative overflow-hidden animated-card hover-glow transition-transform duration-300 hover:scale-105",onMouseEnter:()=>s.playHover(),children:[d.jsx("span",{className:"relative z-10",children:"HOST"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -translate-x-full animate-shimmer-slow"})]}),d.jsxs(ne,{onClick:o,className:"btn-secondary py-10 text-3xl font-bold relative overflow-hidden animated-card hover-glow transition-transform duration-300 hover:scale-105 delay-200",onMouseEnter:()=>s.playHover(),children:[d.jsx("span",{className:"relative z-10",children:"PARTICIPANT"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -translate-x-full animate-shimmer-slow"})]})]})]}),d.jsx("div",{className:"fixed top-20 left-20 w-16 h-16 bg-primary-light rounded-full opacity-20 animate-pulse-float"}),d.jsx("div",{className:"fixed bottom-20 right-20 w-20 h-20 bg-accent rounded-full opacity-20 animate-pulse-float-reverse",style:{animationDelay:"1s"}}),d.jsx("div",{className:"fixed top-1/3 right-1/4 w-8 h-8 bg-secondary rounded-full opacity-10 animate-pulse-float-slow",style:{animationDelay:"0.5s"}})]})}var jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L=function(t,e){if(!t)throw Si(e)},Si=function(t){return new Error("Firebase Database ("+d1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},kp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[u],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new vP;const f=i<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f1=function(t){const e=h1(t);return kp.encodeByteArray(e,!0)},rc=function(t){return f1(t).replace(/\./g,"")},sc=function(t){try{return kp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t){return p1(void 0,t)}function p1(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!xP(n)||(t[n]=p1(t[n],e[n]));return t}function xP(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=()=>wP().__FIREBASE_DEFAULTS__,SP=()=>{if(typeof process>"u"||typeof jy>"u")return;const t=jy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sc(t[1]);return e&&JSON.parse(e)},Np=()=>{try{return bP()||SP()||EP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},m1=t=>{var e,n;return(n=(e=Np())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},CP=t=>{const e=m1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},g1=()=>{var t;return(t=Np())===null||t===void 0?void 0:t.config},y1=t=>{var e;return(e=Np())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rc(JSON.stringify(n)),rc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ip(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function kP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function v1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IP(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PP(){return d1.NODE_ADMIN===!0}function AP(){try{return typeof indexedDB=="object"}catch{return!1}}function RP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="FirebaseError";class Dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=OP,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ga.prototype.create)}}class ga{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?jP(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Dr(s,a,r)}}function jP(t,e){return t.replace(MP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const MP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){return JSON.parse(t)}function He(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Uo(sc(i[0])||""),n=Uo(sc(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},DP=function(t){const e=_1(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},LP=function(t){const e=_1(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function oi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Lh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ic(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function oc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(My(i)&&My(o)){if(!oc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function My(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^i&(o^a),u=1518500249):(c=i^o^a,u=1859775393):h<60?(c=i&o|a&(i|o),u=2400959708):(c=i^o^a,u=3395469782);const f=(s<<5|s>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function BP(t,e){const n=new VP(t,e);return n.subscribe.bind(n)}class VP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=id),s.error===void 0&&(s.error=id),s.complete===void 0&&(s.complete=id);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function id(){}function iu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,L(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ou=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){return t&&t._delegate?t._delegate:t}class ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ma;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HP(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WP(t){return t===$r?void 0:t}function HP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $P(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const qP={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},GP=_e.INFO,KP={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},YP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=KP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=GP,this._logHandler=YP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const XP=(t,e)=>e.some(n=>t instanceof n);let Dy,Ly;function JP(){return Dy||(Dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZP(){return Ly||(Ly=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const x1=new WeakMap,Fh=new WeakMap,w1=new WeakMap,od=new WeakMap,Ap=new WeakMap;function eA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&x1.set(n,t)}).catch(()=>{}),Ap.set(e,t),e}function tA(t){if(Fh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Fh.set(t,e)}let Bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||w1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nA(t){Bh=t(Bh)}function rA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ad(this),e,...n);return w1.set(r,e.sort?e.sort():[e]),xr(r)}:ZP().includes(t)?function(...e){return t.apply(ad(this),e),xr(x1.get(this))}:function(...e){return xr(t.apply(ad(this),e))}}function sA(t){return typeof t=="function"?rA(t):(t instanceof IDBTransaction&&tA(t),XP(t,JP())?new Proxy(t,Bh):t)}function xr(t){if(t instanceof IDBRequest)return eA(t);if(od.has(t))return od.get(t);const e=sA(t);return e!==t&&(od.set(t,e),Ap.set(e,t)),e}const ad=t=>Ap.get(t);function iA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=xr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(xr(o.result),l.oldVersion,l.newVersion,xr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const oA=["get","getKey","getAll","getAllKeys","count"],aA=["put","add","delete","clear"],ld=new Map;function Fy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ld.get(e))return ld.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=aA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oA.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ld.set(e,i),i}nA(t=>({...t,get:(e,n,r)=>Fy(e,n)||t.get(e,n,r),has:(e,n)=>!!Fy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vh="@firebase/app",By="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new Pp("@firebase/app"),uA="@firebase/app-compat",dA="@firebase/analytics-compat",hA="@firebase/analytics",fA="@firebase/app-check-compat",pA="@firebase/app-check",mA="@firebase/auth",gA="@firebase/auth-compat",yA="@firebase/database",vA="@firebase/data-connect",_A="@firebase/database-compat",xA="@firebase/functions",wA="@firebase/functions-compat",bA="@firebase/installations",SA="@firebase/installations-compat",EA="@firebase/messaging",CA="@firebase/messaging-compat",TA="@firebase/performance",kA="@firebase/performance-compat",NA="@firebase/remote-config",IA="@firebase/remote-config-compat",PA="@firebase/storage",AA="@firebase/storage-compat",RA="@firebase/firestore",OA="@firebase/vertexai-preview",jA="@firebase/firestore-compat",MA="firebase",DA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="[DEFAULT]",LA={[Vh]:"fire-core",[uA]:"fire-core-compat",[hA]:"fire-analytics",[dA]:"fire-analytics-compat",[pA]:"fire-app-check",[fA]:"fire-app-check-compat",[mA]:"fire-auth",[gA]:"fire-auth-compat",[yA]:"fire-rtdb",[vA]:"fire-data-connect",[_A]:"fire-rtdb-compat",[xA]:"fire-fn",[wA]:"fire-fn-compat",[bA]:"fire-iid",[SA]:"fire-iid-compat",[EA]:"fire-fcm",[CA]:"fire-fcm-compat",[TA]:"fire-perf",[kA]:"fire-perf-compat",[NA]:"fire-rc",[IA]:"fire-rc-compat",[PA]:"fire-gcs",[AA]:"fire-gcs-compat",[RA]:"fire-fst",[jA]:"fire-fst-compat",[OA]:"fire-vertex","fire-js":"fire-js",[MA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Map,FA=new Map,Uh=new Map;function Vy(t,e){try{t.container.addComponent(e)}catch(n){zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ai(t){const e=t.name;if(Uh.has(e))return zn.debug(`There were multiple attempts to register component ${e}.`),!1;Uh.set(e,t);for(const n of ac.values())Vy(n,t);for(const n of FA.values())Vy(n,t);return!0}function Rp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new ga("app","Firebase",BA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=DA;function b1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw wr.create("bad-app-name",{appName:String(s)});if(n||(n=g1()),!n)throw wr.create("no-options");const i=ac.get(s);if(i){if(oc(n,i.options)&&oc(r,i.config))return i;throw wr.create("duplicate-app",{appName:s})}const o=new QP(s);for(const l of Uh.values())o.addComponent(l);const a=new VA(n,r,o);return ac.set(s,a),a}function S1(t=zh){const e=ac.get(t);if(!e&&t===zh&&g1())return b1();if(!e)throw wr.create("no-app",{appName:t});return e}function br(t,e,n){var r;let s=(r=LA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zn.warn(a.join(" "));return}ai(new ls(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebase-heartbeat-database",UA=1,$o="firebase-heartbeat-store";let cd=null;function E1(){return cd||(cd=iA(zA,UA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($o)}catch(n){console.warn(n)}}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),cd}async function $A(t){try{const n=(await E1()).transaction($o),r=await n.objectStore($o).get(C1(t));return await n.done,r}catch(e){if(e instanceof Dr)zn.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zn.warn(n.message)}}}async function zy(t,e){try{const r=(await E1()).transaction($o,"readwrite");await r.objectStore($o).put(e,C1(t)),await r.done}catch(n){if(n instanceof Dr)zn.warn(n.message);else{const r=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zn.warn(r.message)}}}function C1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=1024,HA=30*24*60*60*1e3;class QA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Uy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=HA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){zn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Uy(),{heartbeatsToSend:r,unsentEntries:s}=qA(this._heartbeatsCache.heartbeats),i=rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return zn.warn(n),""}}}function Uy(){return new Date().toISOString().substring(0,10)}function qA(t,e=WA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$y(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$y(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AP()?RP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $A(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $y(t){return rc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){ai(new ls("platform-logger",e=>new lA(e),"PRIVATE")),ai(new ls("heartbeat",e=>new QA(e),"PRIVATE")),br(Vh,By,t),br(Vh,By,"esm2017"),br("fire-js","")}KA("");var YA="firebase",XA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(YA,XA,"app");var Wy={};const Hy="@firebase/database",Qy="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T1="";function JA(t){T1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),He(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Uo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return wn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ZA(e)}}catch{}return new eR},Kr=k1("localStorage"),tR=k1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Pp("@firebase/database"),nR=function(){let t=1;return function(){return t++}}(),N1=function(t){const e=UP(t),n=new FP;n.update(e);const r=n.digest();return kp.encodeByteArray(r)},ya=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ya.apply(null,r):typeof r=="object"?e+=He(r):e+=r,e+=" "}return e};let ho=null,qy=!0;const rR=function(t,e){L(!0,"Can't turn on custom loggers persistently."),Gs.logLevel=_e.VERBOSE,ho=Gs.log.bind(Gs)},et=function(...t){if(qy===!0&&(qy=!1,ho===null&&tR.get("logging_enabled")===!0&&rR()),ho){const e=ya.apply(null,t);ho(e)}},va=function(t){return function(...e){et(t,...e)}},$h=function(...t){const e="FIREBASE INTERNAL ERROR: "+ya(...t);Gs.error(e)},Un=function(...t){const e=`FIREBASE FATAL ERROR: ${ya(...t)}`;throw Gs.error(e),new Error(e)},mt=function(...t){const e="FIREBASE WARNING: "+ya(...t);Gs.warn(e)},sR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&mt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Op=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},iR=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},li="[MIN_NAME]",cs="[MAX_NAME]",vs=function(t,e){if(t===e)return 0;if(t===li||e===cs)return-1;if(e===li||t===cs)return 1;{const n=Gy(t),r=Gy(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},oR=function(t,e){return t===e?0:t<e?-1:1},$i=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+He(e))},jp=function(t){if(typeof t!="object"||t===null)return He(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=He(e[r]),n+=":",n+=jp(t[e[r]]);return n+="}",n},I1=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function st(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const P1=function(t){L(!Op(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},aR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},lR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function cR(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const uR=new RegExp("^-?(0*)\\d{1,10}$"),dR=-2147483648,hR=2147483647,Gy=function(t){if(uR.test(t)){const e=Number(t);if(e>=dR&&e<=hR)return e}return null},Ti=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw mt("Exception was thrown by user callback.",n),e},Math.floor(0))}},fR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){mt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(et("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mt(e)}}class El{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}El.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="5",A1="v",R1="s",O1="r",j1="f",M1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,D1="ls",L1="p",Wh="ac",F1="websocket",B1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Kr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function gR(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function z1(t,e,n){L(typeof e=="string","typeof type must == string"),L(typeof n=="object","typeof params must == object");let r;if(e===F1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===B1)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);gR(t)&&(n.ns=t.namespace);const s=[];return st(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.counters_={}}incrementCounter(e,n=1){wn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return _P(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud={},dd={};function Dp(t){const e=t.toString();return ud[e]||(ud[e]=new yR),ud[e]}function vR(t,e){const n=t.toString();return dd[n]||(dd[n]=e()),dd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Ti(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="start",xR="close",wR="pLPCommand",bR="pRTLPCB",U1="id",$1="pw",W1="ser",SR="cb",ER="seg",CR="ts",TR="d",kR="dframe",H1=1870,Q1=30,NR=H1-Q1,IR=25e3,PR=3e4;class Ms{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=va(e),this.stats_=Dp(n),this.urlFn=l=>(this.appCheckToken&&(l[Wh]=this.appCheckToken),z1(n,B1,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new _R(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(PR)),iR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Lp((...i)=>{const[o,a,l,c,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ky)this.id=a,this.password=l;else if(o===xR)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Ky]="t",r[W1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[SR]=this.scriptTagHolder.uniqueCallbackIdentifier),r[A1]=Mp,this.transportSessionId&&(r[R1]=this.transportSessionId),this.lastSessionId&&(r[D1]=this.lastSessionId),this.applicationId&&(r[L1]=this.applicationId),this.appCheckToken&&(r[Wh]=this.appCheckToken),typeof location<"u"&&location.hostname&&M1.test(location.hostname)&&(r[O1]=j1);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ms.forceAllow_=!0}static forceDisallow(){Ms.forceDisallow_=!0}static isAvailable(){return Ms.forceAllow_?!0:!Ms.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!aR()&&!lR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=He(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=f1(n),s=I1(r,NR);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[kR]="t",r[U1]=e,r[$1]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=He(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Lp{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=nR(),window[wR+this.uniqueCallbackIdentifier]=e,window[bR+this.uniqueCallbackIdentifier]=n,this.myIFrame=Lp.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){et("frame writing exception"),a.stack&&et(a.stack),et(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||et("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[U1]=this.myID,e[$1]=this.myPW,e[W1]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Q1+r.length<=H1;){const o=this.pendingSegs.shift();r=r+"&"+ER+s+"="+o.seg+"&"+CR+s+"="+o.ts+"&"+TR+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(IR)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{et("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=16384,RR=45e3;let lc=null;typeof MozWebSocket<"u"?lc=MozWebSocket:typeof WebSocket<"u"&&(lc=WebSocket);class tn{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=va(this.connId),this.stats_=Dp(n),this.connURL=tn.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[A1]=Mp,typeof location<"u"&&location.hostname&&M1.test(location.hostname)&&(o[O1]=j1),n&&(o[R1]=n),r&&(o[D1]=r),s&&(o[Wh]=s),i&&(o[L1]=i),z1(e,F1,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kr.set("previous_websocket_failure",!0);try{let r;PP(),this.mySock=new lc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){tn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&lc!==null&&!tn.forceDisallow_}static previouslyFailed(){return Kr.isInMemoryStorage||Kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Kr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Uo(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(L(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=He(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=I1(n,AR);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(RR))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}tn.responsesRequiredToBeHealthy=2;tn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ms,tn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=tn&&tn.isAvailable();let r=n&&!tn.previouslyFailed();if(e.webSocketOnly&&(n||mt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[tn];else{const s=this.transports_=[];for(const i of Wo.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Wo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=6e4,jR=5e3,MR=10*1024,DR=100*1024,hd="t",Yy="d",LR="s",Xy="r",FR="e",Jy="o",Zy="a",ev="n",tv="p",BR="h";class VR{constructor(e,n,r,s,i,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=va("c:"+this.id+":"),this.transportManager_=new Wo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=fo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>DR?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>MR?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(hd in e){const n=e[hd];n===Zy?this.upgradeIfSecondaryHealthy_():n===Xy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Jy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=$i("t",e),r=$i("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ev,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=$i("t",e),r=$i("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=$i(hd,e);if(Yy in e){const r=e[Yy];if(n===BR){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===ev){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===LR?this.onConnectionShutdown_(r):n===Xy?this.onReset_(r):n===FR?$h("Server Error: "+r):n===Jy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$h("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Mp!==r&&mt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),fo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(OR))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(jR))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){L(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends G1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ip()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cc}getInitialEvent(e){return L(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=32,rv=768;class xe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function he(){return new xe("")}function J(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function kr(t){return t.pieces_.length-t.pieceNum_}function Se(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new xe(t.pieces_,e)}function Fp(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function zR(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ho(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function K1(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new xe(e,0)}function De(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof xe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new xe(n,0)}function ee(t){return t.pieceNum_>=t.pieces_.length}function ht(t,e){const n=J(t),r=J(e);if(n===null)return e;if(n===r)return ht(Se(t),Se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function UR(t,e){const n=Ho(t,0),r=Ho(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=vs(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Bp(t,e){if(kr(t)!==kr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function zt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(kr(t)>kr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class $R{constructor(e,n){this.errorPrefix_=n,this.parts_=Ho(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ou(this.parts_[r]);Y1(this)}}function WR(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ou(e),Y1(t)}function HR(t){const e=t.parts_.pop();t.byteLength_-=ou(e),t.parts_.length>0&&(t.byteLength_-=1)}function Y1(t){if(t.byteLength_>rv)throw new Error(t.errorPrefix_+"has a key path longer than "+rv+" bytes ("+t.byteLength_+").");if(t.parts_.length>nv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+nv+") or object contains a cycle "+Wr(t))}function Wr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends G1{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Vp}getInitialEvent(e){return L(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=1e3,QR=60*5*1e3,sv=30*1e3,qR=1.3,GR=3e4,KR="server_kill",iv=3;class Mn extends q1{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Mn.nextPersistentConnectionId_++,this.log_=va("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wi,this.maxReconnectDelay_=QR,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(He(i)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new ma,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;Mn.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&wn(e,"w")){const r=oi(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();mt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||LP(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=DP(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+He(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):$h("Unrecognized action received from server: "+He(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>GR&&(this.reconnectDelay_=Wi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*qR)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Mn.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){L(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?et("getToken() completed but was canceled"):(et("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new VR(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{mt(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(KR)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&mt(h),l())}}}interrupt(e){et("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){et("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Lh(this.interruptReasons_)&&(this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>jp(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new xe(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){et("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=iv&&(this.reconnectDelay_=sv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){et("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=iv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+T1.replace(/\./g,"-")]=1,Ip()?e["framework.cordova"]=1:v1()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cc.getInstance().currentlyOnline();return Lh(this.interruptReasons_)&&e}}Mn.nextPersistentConnectionId_=0;Mn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Z(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Z(li,e),s=new Z(li,n);return this.compare(r,s)!==0}minPost(){return Z.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa;class X1 extends au{static get __EMPTY_NODE(){return Xa}static set __EMPTY_NODE(e){Xa=e}compare(e,n){return vs(e.name,n.name)}isDefinedOn(e){throw Si("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Z.MIN}maxPost(){return new Z(cs,Xa)}makePost(e,n){return L(typeof e=="string","KeyIndex indexValue must always be a string."),new Z(e,Xa)}toString(){return".key"}}const Ks=new X1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??bt.EMPTY_NODE,this.right=i??bt.EMPTY_NODE}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return bt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return bt.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ke.RED=!0;Ke.BLACK=!1;class YR{copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class bt{constructor(e,n=bt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new bt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ke.BLACK,null,null))}remove(e){return new bt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ke.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ja(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ja(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ja(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ja(this.root_,null,this.comparator_,!0,e)}}bt.EMPTY_NODE=new YR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t,e){return vs(t.name,e.name)}function zp(t,e){return vs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh;function JR(t){Hh=t}const J1=function(t){return typeof t=="number"?"number:"+P1(t):"string:"+t},Z1=function(t){if(t.isLeafNode()){const e=t.val();L(typeof e=="string"||typeof e=="number"||typeof e=="object"&&wn(e,".sv"),"Priority must be a string or number.")}else L(t===Hh||t.isEmpty(),"priority of unexpected type.");L(t===Hh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov;class qe{constructor(e,n=qe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Z1(this.priorityNode_)}static set __childrenNodeConstructor(e){ov=e}static get __childrenNodeConstructor(){return ov}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new qe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:qe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ee(e)?this:J(e)===".priority"?this.priorityNode_:qe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:qe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=J(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(L(r!==".priority"||kr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,qe.__childrenNodeConstructor.EMPTY_NODE.updateChild(Se(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+J1(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=P1(this.value_):e+=this.value_,this.lazyHash_=N1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===qe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof qe.__childrenNodeConstructor?-1:(L(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=qe.VALUE_TYPE_ORDER.indexOf(n),i=qe.VALUE_TYPE_ORDER.indexOf(r);return L(s>=0,"Unknown leaf type: "+n),L(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}qe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eb,tb;function ZR(t){eb=t}function e2(t){tb=t}class t2 extends au{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?vs(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Z.MIN}maxPost(){return new Z(cs,new qe("[PRIORITY-POST]",tb))}makePost(e,n){const r=eb(e);return new Z(n,new qe("[PRIORITY-POST]",r))}toString(){return".priority"}}const Le=new t2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=Math.log(2);class r2{constructor(e){const n=i=>parseInt(Math.log(i)/n2,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const uc=function(t,e,n,r){t.sort(e);const s=function(l,c){const u=c-l;let h,f;if(u===0)return null;if(u===1)return h=t[l],f=n?n(h):h,new Ke(f,h.node,Ke.BLACK,null,null);{const p=parseInt(u/2,10)+l,g=s(l,p),x=s(p+1,c);return h=t[p],f=n?n(h):h,new Ke(f,h.node,Ke.BLACK,g,x)}},i=function(l){let c=null,u=null,h=t.length;const f=function(g,x){const w=h-g,m=h;h-=g;const y=s(w+1,m),v=t[w],b=n?n(v):v;p(new Ke(b,v.node,x,null,y))},p=function(g){c?(c.left=g,c=g):(u=g,c=g)};for(let g=0;g<l.count;++g){const x=l.nextBitIsOne(),w=Math.pow(2,l.count-(g+1));x?f(w,Ke.BLACK):(f(w,Ke.BLACK),f(w,Ke.RED))}return u},o=new r2(t.length),a=i(o);return new bt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd;const bs={};class In{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return L(bs&&Le,"ChildrenNode.ts has not been loaded"),fd=fd||new In({".priority":bs},{".priority":Le}),fd}get(e){const n=oi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof bt?n:null}hasIndex(e){return wn(this.indexSet_,e.toString())}addIndex(e,n){L(e!==Ks,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Z.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=uc(r,e.getCompare()):a=bs;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new In(u,c)}addToIndexes(e,n){const r=ic(this.indexes_,(s,i)=>{const o=oi(this.indexSet_,i);if(L(o,"Missing index implementation for "+i),s===bs)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Z.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),uc(a,o.getCompare())}else return bs;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new Z(e.name,a))),l.insert(e,e.node)}});return new In(r,this.indexSet_)}removeFromIndexes(e,n){const r=ic(this.indexes_,s=>{if(s===bs)return s;{const i=n.get(e.name);return i?s.remove(new Z(e.name,i)):s}});return new In(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi;class W{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Z1(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Hi||(Hi=new W(new bt(zp),null,In.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hi}updatePriority(e){return this.children_.isEmpty()?this:new W(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Hi:n}}getChild(e){const n=J(e);return n===null?this:this.getImmediateChild(n).getChild(Se(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(L(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Z(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Hi:this.priorityNode_;return new W(s,o,i)}}updateChild(e,n){const r=J(e);if(r===null)return n;{L(J(e)!==".priority"||kr(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Se(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Le,(o,a)=>{n[o]=a.val(e),r++,i&&W.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+J1(this.getPriority().val())+":"),this.forEachChild(Le,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":N1(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Z(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Z(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Z(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_a?-1:0}withIndex(e){if(e===Ks||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new W(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ks||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Le),s=n.getIterator(Le);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ks?null:this.indexMap_.get(e.toString())}}W.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class s2 extends W{constructor(){super(new bt(zp),W.EMPTY_NODE,In.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return W.EMPTY_NODE}isEmpty(){return!1}}const _a=new s2;Object.defineProperties(Z,{MIN:{value:new Z(li,W.EMPTY_NODE)},MAX:{value:new Z(cs,_a)}});X1.__EMPTY_NODE=W.EMPTY_NODE;qe.__childrenNodeConstructor=W;JR(_a);e2(_a);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=!0;function We(t,e=null){if(t===null)return W.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),L(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new qe(n,We(e))}if(!(t instanceof Array)&&i2){const n=[];let r=!1;if(st(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=We(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Z(o,l)))}}),n.length===0)return W.EMPTY_NODE;const i=uc(n,XR,o=>o.name,zp);if(r){const o=uc(n,Le.getCompare());return new W(i,We(e),new In({".priority":o},{".priority":Le}))}else return new W(i,We(e),In.Default)}else{let n=W.EMPTY_NODE;return st(t,(r,s)=>{if(wn(t,r)&&r.substring(0,1)!=="."){const i=We(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(We(e))}}ZR(We);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2 extends au{constructor(e){super(),this.indexPath_=e,L(!ee(e)&&J(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?vs(e.name,n.name):i}makePost(e,n){const r=We(e),s=W.EMPTY_NODE.updateChild(this.indexPath_,r);return new Z(n,s)}maxPost(){const e=W.EMPTY_NODE.updateChild(this.indexPath_,_a);return new Z(cs,e)}toString(){return Ho(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends au{compare(e,n){const r=e.node.compareTo(n.node);return r===0?vs(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Z.MIN}maxPost(){return Z.MAX}makePost(e,n){const r=We(e);return new Z(n,r)}toString(){return".value"}}const l2=new a2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t){return{type:"value",snapshotNode:t}}function ci(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Qo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function qo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function c2(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){L(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Qo(n,a)):L(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ci(n,r)):o.trackChildChange(qo(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Le,(s,i)=>{n.hasChild(s)||r.trackChildChange(Qo(s,i))}),n.isLeafNode()||n.forEachChild(Le,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(qo(s,i,o))}else r.trackChildChange(ci(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?W.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.indexedFilter_=new Up(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Go.getStartPost_(e),this.endPost_=Go.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Z(n,r))||(r=W.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=W.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(W.EMPTY_NODE);const i=this;return n.forEachChild(Le,(o,a)=>{i.matches(new Z(o,a))||(s=s.updateImmediateChild(o,W.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Go(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Z(n,r))||(r=W.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=W.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=W.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(W.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,W.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();const a=e;L(a.numChildren()===this.limit_,"");const l=new Z(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,l);if(u&&!r.isEmpty()&&p>=0)return i!=null&&i.trackChildChange(qo(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Qo(n,h));const x=a.updateImmediateChild(n,W.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(ci(f.name,f.node)),x.updateImmediateChild(f.name,f.node)):x}}else return r.isEmpty()?e:u&&o(c,l)>=0?(i!=null&&(i.trackChildChange(Qo(c.name,c.node)),i.trackChildChange(ci(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,W.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:li}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Le}copy(){const e=new $p;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function d2(t){return t.loadsAllData()?new Up(t.getIndex()):t.hasLimit()?new u2(t):new Go(t)}function av(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Le?n="$priority":t.index_===l2?n="$value":t.index_===Ks?n="$key":(L(t.index_ instanceof o2,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=He(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=He(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+He(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=He(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+He(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lv(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Le&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends q1{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=va("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=dc.getListenId_(e,r),a={};this.listens_[o]=a;const l=av(e._queryParams);this.restRequest_(i+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(i,h,!1,r),oi(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=dc.getListenId_(e,n);delete this.listens_[r]}get(e){const n=av(e._queryParams),r=e._path.toString(),s=new ma;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ei(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Uo(a.responseText)}catch{mt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&mt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.rootNode_=W.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(){return{value:null,children:new Map}}function rb(t,e,n){if(ee(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=J(e);t.children.has(r)||t.children.set(r,hc());const s=t.children.get(r);e=Se(e),rb(s,e,n)}}function Qh(t,e,n){t.value!==null?n(e,t.value):f2(t,(r,s)=>{const i=new xe(e.toString()+"/"+r);Qh(s,i,n)})}function f2(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&st(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=10*1e3,m2=30*1e3,g2=5*60*1e3;class y2{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new p2(e);const r=cv+(m2-cv)*Math.random();fo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;st(e,(s,i)=>{i>0&&wn(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),fo(this.reportStats_.bind(this),Math.floor(Math.random()*2*g2))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(nn||(nn={}));function Wp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Hp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=nn.ACK_USER_WRITE,this.source=Wp()}operationForChild(e){if(ee(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new xe(e));return new fc(he(),n,this.revert)}}else return L(J(this.path)===e,"operationForChild called for unrelated child."),new fc(Se(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){this.source=e,this.path=n,this.type=nn.LISTEN_COMPLETE}operationForChild(e){return ee(this.path)?new Ko(this.source,he()):new Ko(this.source,Se(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=nn.OVERWRITE}operationForChild(e){return ee(this.path)?new us(this.source,he(),this.snap.getImmediateChild(e)):new us(this.source,Se(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=nn.MERGE}operationForChild(e){if(ee(this.path)){const n=this.children.subtree(new xe(e));return n.isEmpty()?null:n.value?new us(this.source,he(),n.value):new ui(this.source,he(),n)}else return L(J(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ui(this.source,Se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ee(e))return this.isFullyInitialized()&&!this.filtered_;const n=J(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function _2(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(c2(o.childName,o.snapshotNode))}),Qi(t,s,"child_removed",e,r,n),Qi(t,s,"child_added",e,r,n),Qi(t,s,"child_moved",i,r,n),Qi(t,s,"child_changed",e,r,n),Qi(t,s,"value",e,r,n),s}function Qi(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>w2(t,a,l)),o.forEach(a=>{const l=x2(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function x2(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function w2(t,e,n){if(e.childName==null||n.childName==null)throw Si("Should only compare child_ events.");const r=new Z(e.childName,e.snapshotNode),s=new Z(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t,e){return{eventCache:t,serverCache:e}}function po(t,e,n,r){return lu(new Nr(e,n,r),t.serverCache)}function sb(t,e,n,r){return lu(t.eventCache,new Nr(e,n,r))}function pc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ds(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd;const b2=()=>(pd||(pd=new bt(oR)),pd);class be{constructor(e,n=b2()){this.value=e,this.children=n}static fromObject(e){let n=new be(null);return st(e,(r,s)=>{n=n.set(new xe(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:he(),value:this.value};if(ee(e))return null;{const r=J(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Se(e),n);return i!=null?{path:De(new xe(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ee(e))return this;{const n=J(e),r=this.children.get(n);return r!==null?r.subtree(Se(e)):new be(null)}}set(e,n){if(ee(e))return new be(n,this.children);{const r=J(e),i=(this.children.get(r)||new be(null)).set(Se(e),n),o=this.children.insert(r,i);return new be(this.value,o)}}remove(e){if(ee(e))return this.children.isEmpty()?new be(null):new be(null,this.children);{const n=J(e),r=this.children.get(n);if(r){const s=r.remove(Se(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new be(null):new be(this.value,i)}else return this}}get(e){if(ee(e))return this.value;{const n=J(e),r=this.children.get(n);return r?r.get(Se(e)):null}}setTree(e,n){if(ee(e))return n;{const r=J(e),i=(this.children.get(r)||new be(null)).setTree(Se(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new be(this.value,o)}}fold(e){return this.fold_(he(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(De(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,he(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ee(e))return null;{const i=J(e),o=this.children.get(i);return o?o.findOnPath_(Se(e),De(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,he(),n)}foreachOnPath_(e,n,r){if(ee(e))return this;{this.value&&r(n,this.value);const s=J(e),i=this.children.get(s);return i?i.foreachOnPath_(Se(e),De(n,s),r):new be(null)}}foreach(e){this.foreach_(he(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(De(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.writeTree_=e}static empty(){return new on(new be(null))}}function mo(t,e,n){if(ee(e))return new on(new be(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=ht(s,e);return i=i.updateChild(o,n),new on(t.writeTree_.set(s,i))}else{const s=new be(n),i=t.writeTree_.setTree(e,s);return new on(i)}}}function qh(t,e,n){let r=t;return st(n,(s,i)=>{r=mo(r,De(e,s),i)}),r}function uv(t,e){if(ee(e))return on.empty();{const n=t.writeTree_.setTree(e,new be(null));return new on(n)}}function Gh(t,e){return _s(t,e)!=null}function _s(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ht(n.path,e)):null}function dv(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Le,(r,s)=>{e.push(new Z(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Z(r,s.value))}),e}function Sr(t,e){if(ee(e))return t;{const n=_s(t,e);return n!=null?new on(new be(n)):new on(t.writeTree_.subtree(e))}}function Kh(t){return t.writeTree_.isEmpty()}function di(t,e){return ib(he(),t.writeTree_,e)}function ib(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(L(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=ib(De(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(De(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t,e){return cb(e,t)}function S2(t,e,n,r,s){L(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=mo(t.visibleWrites,e,n)),t.lastWriteId=r}function E2(t,e,n,r){L(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=qh(t.visibleWrites,e,n),t.lastWriteId=r}function C2(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function T2(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);L(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&k2(a,r.path)?s=!1:zt(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return N2(t),!0;if(r.snap)t.visibleWrites=uv(t.visibleWrites,r.path);else{const a=r.children;st(a,l=>{t.visibleWrites=uv(t.visibleWrites,De(r.path,l))})}return!0}else return!1}function k2(t,e){if(t.snap)return zt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&zt(De(t.path,n),e))return!0;return!1}function N2(t){t.visibleWrites=ob(t.allWrites,I2,he()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function I2(t){return t.visible}function ob(t,e,n){let r=on.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)zt(n,o)?(a=ht(n,o),r=mo(r,a,i.snap)):zt(o,n)&&(a=ht(o,n),r=mo(r,he(),i.snap.getChild(a)));else if(i.children){if(zt(n,o))a=ht(n,o),r=qh(r,a,i.children);else if(zt(o,n))if(a=ht(o,n),ee(a))r=qh(r,he(),i.children);else{const l=oi(i.children,J(a));if(l){const c=l.getChild(Se(a));r=mo(r,he(),c)}}}else throw Si("WriteRecord should have .snap or .children")}}return r}function ab(t,e,n,r,s){if(!r&&!s){const i=_s(t.visibleWrites,e);if(i!=null)return i;{const o=Sr(t.visibleWrites,e);if(Kh(o))return n;if(n==null&&!Gh(o,he()))return null;{const a=n||W.EMPTY_NODE;return di(o,a)}}}else{const i=Sr(t.visibleWrites,e);if(!s&&Kh(i))return n;if(!s&&n==null&&!Gh(i,he()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(zt(c.path,e)||zt(e,c.path))},a=ob(t.allWrites,o,e),l=n||W.EMPTY_NODE;return di(a,l)}}}function P2(t,e,n){let r=W.EMPTY_NODE;const s=_s(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Le,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Sr(t.visibleWrites,e);return n.forEachChild(Le,(o,a)=>{const l=di(Sr(i,new xe(o)),a);r=r.updateImmediateChild(o,l)}),dv(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Sr(t.visibleWrites,e);return dv(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function A2(t,e,n,r,s){L(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=De(e,n);if(Gh(t.visibleWrites,i))return null;{const o=Sr(t.visibleWrites,i);return Kh(o)?s.getChild(n):di(o,s.getChild(n))}}function R2(t,e,n,r){const s=De(e,n),i=_s(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Sr(t.visibleWrites,s);return di(o,r.getNode().getImmediateChild(n))}else return null}function O2(t,e){return _s(t.visibleWrites,e)}function j2(t,e,n,r,s,i,o){let a;const l=Sr(t.visibleWrites,e),c=_s(l,he());if(c!=null)a=c;else if(n!=null)a=di(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=f.getNext();for(;p&&u.length<s;)h(p,r)!==0&&u.push(p),p=f.getNext();return u}else return[]}function M2(){return{visibleWrites:on.empty(),allWrites:[],lastWriteId:-1}}function mc(t,e,n,r){return ab(t.writeTree,t.treePath,e,n,r)}function qp(t,e){return P2(t.writeTree,t.treePath,e)}function hv(t,e,n,r){return A2(t.writeTree,t.treePath,e,n,r)}function gc(t,e){return O2(t.writeTree,De(t.treePath,e))}function D2(t,e,n,r,s,i){return j2(t.writeTree,t.treePath,e,n,r,s,i)}function Gp(t,e,n){return R2(t.writeTree,t.treePath,e,n)}function lb(t,e){return cb(De(t.treePath,e),t.writeTree)}function cb(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;L(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),L(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,qo(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Qo(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,ci(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,qo(r,e.snapshotNode,s.oldSnap));else throw Si("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const ub=new F2;class Kp{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Nr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gp(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ds(this.viewCache_),i=D2(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){return{filter:t}}function V2(t,e){L(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),L(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function z2(t,e,n,r,s){const i=new L2;let o,a;if(n.type===nn.OVERWRITE){const c=n;c.source.fromUser?o=Yh(t,e,c.path,c.snap,r,s,i):(L(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ee(c.path),o=yc(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===nn.MERGE){const c=n;c.source.fromUser?o=$2(t,e,c.path,c.children,r,s,i):(L(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Xh(t,e,c.path,c.children,r,s,a,i))}else if(n.type===nn.ACK_USER_WRITE){const c=n;c.revert?o=Q2(t,e,c.path,r,s,i):o=W2(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===nn.LISTEN_COMPLETE)o=H2(t,e,n.path,r,i);else throw Si("Unknown operation type: "+n.type);const l=i.getChanges();return U2(e,o,l),{viewCache:o,changes:l}}function U2(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=pc(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(nb(pc(e)))}}function db(t,e,n,r,s,i){const o=e.eventCache;if(gc(r,n)!=null)return e;{let a,l;if(ee(n))if(L(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ds(e),u=c instanceof W?c:W.EMPTY_NODE,h=qp(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const c=mc(r,ds(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=J(n);if(c===".priority"){L(kr(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=hv(r,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=Se(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=hv(r,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=Gp(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,s,i):a=o.getNode()}}return po(e,a,o.isFullyInitialized()||ee(n),t.filter.filtersNodes())}}function yc(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(ee(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),p,null)}else{const p=J(n);if(!l.isCompleteForPath(n)&&kr(n)>1)return e;const g=Se(n),w=l.getNode().getImmediateChild(p).updateChild(g,r);p===".priority"?c=u.updatePriority(l.getNode(),w):c=u.updateChild(l.getNode(),p,w,g,ub,null)}const h=sb(e,c,l.isFullyInitialized()||ee(n),u.filtersNodes()),f=new Kp(s,h,i);return db(t,h,n,s,f,a)}function Yh(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const u=new Kp(s,e,i);if(ee(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=po(e,c,!0,t.filter.filtersNodes());else{const h=J(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=po(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Se(n),p=a.getNode().getImmediateChild(h);let g;if(ee(f))g=r;else{const x=u.getCompleteChild(h);x!=null?Fp(f)===".priority"&&x.getChild(K1(f)).isEmpty()?g=x:g=x.updateChild(f,r):g=W.EMPTY_NODE}if(p.equals(g))l=e;else{const x=t.filter.updateChild(a.getNode(),h,g,f,u,o);l=po(e,x,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function fv(t,e){return t.eventCache.isCompleteForChild(e)}function $2(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const u=De(n,l);fv(e,J(u))&&(a=Yh(t,a,u,c,s,i,o))}),r.foreach((l,c)=>{const u=De(n,l);fv(e,J(u))||(a=Yh(t,a,u,c,s,i,o))}),a}function pv(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Xh(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ee(n)?c=r:c=new be(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),g=pv(t,p,f);l=yc(t,l,new xe(h),g,s,i,o,a)}}),c.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!p){const g=e.serverCache.getNode().getImmediateChild(h),x=pv(t,g,f);l=yc(t,l,new xe(h),x,s,i,o,a)}}),l}function W2(t,e,n,r,s,i,o){if(gc(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ee(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return yc(t,e,n,l.getNode().getChild(n),s,i,a,o);if(ee(n)){let c=new be(null);return l.getNode().forEachChild(Ks,(u,h)=>{c=c.set(new xe(u),h)}),Xh(t,e,n,c,s,i,a,o)}else return e}else{let c=new be(null);return r.foreach((u,h)=>{const f=De(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),Xh(t,e,n,c,s,i,a,o)}}function H2(t,e,n,r,s){const i=e.serverCache,o=sb(e,i.getNode(),i.isFullyInitialized()||ee(n),i.isFiltered());return db(t,o,n,r,ub,s)}function Q2(t,e,n,r,s,i){let o;if(gc(r,n)!=null)return e;{const a=new Kp(r,e,s),l=e.eventCache.getNode();let c;if(ee(n)||J(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=mc(r,ds(e));else{const h=e.serverCache.getNode();L(h instanceof W,"serverChildren would be complete if leaf node"),u=qp(r,h)}u=u,c=t.filter.updateFullNode(l,u,i)}else{const u=J(n);let h=Gp(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,Se(n),a,i):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,W.EMPTY_NODE,Se(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=mc(r,ds(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||gc(r,he())!=null,po(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Up(r.getIndex()),i=d2(r);this.processor_=B2(i);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(W.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(W.EMPTY_NODE,a.getNode(),null),u=new Nr(l,o.isFullyInitialized(),s.filtersNodes()),h=new Nr(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=lu(h,u),this.eventGenerator_=new v2(this.query_)}get query(){return this.query_}}function G2(t){return t.viewCache_.serverCache.getNode()}function K2(t){return pc(t.viewCache_)}function Y2(t,e){const n=ds(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ee(e)&&!n.getImmediateChild(J(e)).isEmpty())?n.getChild(e):null}function mv(t){return t.eventRegistrations_.length===0}function X2(t,e){t.eventRegistrations_.push(e)}function gv(t,e,n){const r=[];if(n){L(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function yv(t,e,n,r){e.type===nn.MERGE&&e.source.queryId!==null&&(L(ds(t.viewCache_),"We should always have a full cache before handling merges"),L(pc(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=z2(t.processor_,s,e,n,r);return V2(t.processor_,i.viewCache),L(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,hb(t,i.changes,i.viewCache.eventCache.getNode(),null)}function J2(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Le,(i,o)=>{r.push(ci(i,o))}),n.isFullyInitialized()&&r.push(nb(n.getNode())),hb(t,r,n.getNode(),e)}function hb(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return _2(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc;class fb{constructor(){this.views=new Map}}function Z2(t){L(!vc,"__referenceConstructor has already been defined"),vc=t}function eO(){return L(vc,"Reference.ts has not been loaded"),vc}function tO(t){return t.views.size===0}function Yp(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return L(i!=null,"SyncTree gave us an op for an invalid query."),yv(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(yv(o,e,n,r));return i}}function pb(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=mc(n,s?r:null),l=!1;a?l=!0:r instanceof W?(a=qp(n,r),l=!1):(a=W.EMPTY_NODE,l=!1);const c=lu(new Nr(a,l,!1),new Nr(r,s,!1));return new q2(e,c)}return o}function nO(t,e,n,r,s,i){const o=pb(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),X2(o,n),J2(o,n)}function rO(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Ir(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(gv(c,n,r)),mv(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||i.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(gv(l,n,r)),mv(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Ir(t)&&i.push(new(eO())(e._repo,e._path)),{removed:i,events:o}}function mb(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Er(t,e){let n=null;for(const r of t.views.values())n=n||Y2(r,e);return n}function gb(t,e){if(e._queryParams.loadsAllData())return uu(t);{const r=e._queryIdentifier;return t.views.get(r)}}function yb(t,e){return gb(t,e)!=null}function Ir(t){return uu(t)!=null}function uu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c;function sO(t){L(!_c,"__referenceConstructor has already been defined"),_c=t}function iO(){return L(_c,"Reference.ts has not been loaded"),_c}let oO=1;class vv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new be(null),this.pendingWriteTree_=M2(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vb(t,e,n,r,s){return S2(t.pendingWriteTree_,e,n,r,s),s?ki(t,new us(Wp(),e,n)):[]}function aO(t,e,n,r){E2(t.pendingWriteTree_,e,n,r);const s=be.fromObject(n);return ki(t,new ui(Wp(),e,s))}function ur(t,e,n=!1){const r=C2(t.pendingWriteTree_,e);if(T2(t.pendingWriteTree_,e)){let i=new be(null);return r.snap!=null?i=i.set(he(),!0):st(r.children,o=>{i=i.set(new xe(o),!0)}),ki(t,new fc(r.path,i,n))}else return[]}function xa(t,e,n){return ki(t,new us(Hp(),e,n))}function lO(t,e,n){const r=be.fromObject(n);return ki(t,new ui(Hp(),e,r))}function cO(t,e){return ki(t,new Ko(Hp(),e))}function uO(t,e,n){const r=Jp(t,n);if(r){const s=Zp(r),i=s.path,o=s.queryId,a=ht(i,e),l=new Ko(Qp(o),a);return em(t,i,l)}else return[]}function xc(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||yb(o,e))){const l=rO(o,e,n,r);tO(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=l.removed;if(a=l.events,!s){const u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,p)=>Ir(p));if(u&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const p=fO(f);for(let g=0;g<p.length;++g){const x=p[g],w=x.query,m=bb(t,x);t.listenProvider_.startListening(go(w),Yo(t,w),m.hashFn,m.onComplete)}}}!h&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(go(e),null):c.forEach(f=>{const p=t.queryToTagMap.get(du(f));t.listenProvider_.stopListening(go(f),p)}))}pO(t,c)}return a}function _b(t,e,n,r){const s=Jp(t,r);if(s!=null){const i=Zp(s),o=i.path,a=i.queryId,l=ht(o,e),c=new us(Qp(a),l,n);return em(t,o,c)}else return[]}function dO(t,e,n,r){const s=Jp(t,r);if(s){const i=Zp(s),o=i.path,a=i.queryId,l=ht(o,e),c=be.fromObject(n),u=new ui(Qp(a),l,c);return em(t,o,u)}else return[]}function Jh(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,p)=>{const g=ht(f,s);i=i||Er(p,g),o=o||Ir(p)});let a=t.syncPointTree_.get(s);a?(o=o||Ir(a),i=i||Er(a,he())):(a=new fb,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;i!=null?l=!0:(l=!1,i=W.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((p,g)=>{const x=Er(g,he());x&&(i=i.updateImmediateChild(p,x))}));const c=yb(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=du(e);L(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=mO();t.queryToTagMap.set(f,p),t.tagToQueryMap.set(p,f)}const u=cu(t.pendingWriteTree_,s);let h=nO(a,e,n,u,i,l);if(!c&&!o&&!r){const f=gb(a,e);h=h.concat(gO(t,e,f))}return h}function Xp(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=ht(o,e),c=Er(a,l);if(c)return c});return ab(s,e,i,n,!0)}function hO(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const h=ht(c,n);r=r||Er(u,h)});let s=t.syncPointTree_.get(n);s?r=r||Er(s,he()):(s=new fb,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Nr(r,!0,!1):null,a=cu(t.pendingWriteTree_,e._path),l=pb(s,e,a,i?o.getNode():W.EMPTY_NODE,i);return K2(l)}function ki(t,e){return xb(e,t.syncPointTree_,null,cu(t.pendingWriteTree_,he()))}function xb(t,e,n,r){if(ee(t.path))return wb(t,e,n,r);{const s=e.get(he());n==null&&s!=null&&(n=Er(s,he()));let i=[];const o=J(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=lb(r,o);i=i.concat(xb(a,l,c,u))}return s&&(i=i.concat(Yp(s,t,r,n))),i}}function wb(t,e,n,r){const s=e.get(he());n==null&&s!=null&&(n=Er(s,he()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=lb(r,o),u=t.operationForChild(o);u&&(i=i.concat(wb(u,a,l,c)))}),s&&(i=i.concat(Yp(s,t,r,n))),i}function bb(t,e){const n=e.query,r=Yo(t,n);return{hashFn:()=>(G2(e)||W.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?uO(t,n._path,r):cO(t,n._path);{const i=cR(s,n);return xc(t,n,null,i)}}}}function Yo(t,e){const n=du(e);return t.queryToTagMap.get(n)}function du(t){return t._path.toString()+"$"+t._queryIdentifier}function Jp(t,e){return t.tagToQueryMap.get(e)}function Zp(t){const e=t.indexOf("$");return L(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new xe(t.substr(0,e))}}function em(t,e,n){const r=t.syncPointTree_.get(e);L(r,"Missing sync point for query tag that we're tracking");const s=cu(t.pendingWriteTree_,e);return Yp(r,n,s,null)}function fO(t){return t.fold((e,n,r)=>{if(n&&Ir(n))return[uu(n)];{let s=[];return n&&(s=mb(n)),st(r,(i,o)=>{s=s.concat(o)}),s}})}function go(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(iO())(t._repo,t._path):t}function pO(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=du(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function mO(){return oO++}function gO(t,e,n){const r=e._path,s=Yo(t,e),i=bb(t,n),o=t.listenProvider_.startListening(go(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)L(!Ir(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!ee(c)&&u&&Ir(u))return[uu(u).query];{let f=[];return u&&(f=f.concat(mb(u).map(p=>p.query))),st(h,(p,g)=>{f=f.concat(g)}),f}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(go(u),Yo(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new tm(n)}node(){return this.node_}}class nm{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=De(this.path_,e);return new nm(this.syncTree_,n)}node(){return Xp(this.syncTree_,this.path_)}}const yO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},_v=function(t,e,n){if(!t||typeof t!="object")return t;if(L(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return vO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return _O(t[".sv"],e);L(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},vO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:L(!1,"Unexpected server value: "+t)}},_O=function(t,e,n){t.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&L(!1,"Unexpected increment value: "+r);const s=e.node();if(L(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Sb=function(t,e,n,r){return rm(e,new nm(n,t),r)},Eb=function(t,e,n){return rm(t,new tm(e),n)};function rm(t,e,n){const r=t.getPriority().val(),s=_v(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=_v(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new qe(a,We(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new qe(s))),o.forEachChild(Le,(a,l)=>{const c=rm(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function im(t,e){let n=e instanceof xe?e:new xe(e),r=t,s=J(n);for(;s!==null;){const i=oi(r.node.children,s)||{children:{},childCount:0};r=new sm(s,r,i),n=Se(n),s=J(n)}return r}function Ni(t){return t.node.value}function Cb(t,e){t.node.value=e,Zh(t)}function Tb(t){return t.node.childCount>0}function xO(t){return Ni(t)===void 0&&!Tb(t)}function hu(t,e){st(t.node.children,(n,r)=>{e(new sm(n,t,r))})}function kb(t,e,n,r){n&&e(t),hu(t,s=>{kb(s,e,!0)})}function wO(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function wa(t){return new xe(t.parent===null?t.name:wa(t.parent)+"/"+t.name)}function Zh(t){t.parent!==null&&bO(t.parent,t.name,t)}function bO(t,e,n){const r=xO(n),s=wn(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Zh(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Zh(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=/[\[\].#$\/\u0000-\u001F\u007F]/,EO=/[\[\].#$\u0000-\u001F\u007F]/,md=10*1024*1024,om=function(t){return typeof t=="string"&&t.length!==0&&!SO.test(t)},Nb=function(t){return typeof t=="string"&&t.length!==0&&!EO.test(t)},CO=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nb(t)},TO=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Op(t)||t&&typeof t=="object"&&wn(t,".sv")},Ib=function(t,e,n,r){r&&e===void 0||fu(iu(t,"value"),e,n)},fu=function(t,e,n){const r=n instanceof xe?new $R(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Wr(r));if(typeof e=="function")throw new Error(t+"contains a function "+Wr(r)+" with contents = "+e.toString());if(Op(e))throw new Error(t+"contains "+e.toString()+" "+Wr(r));if(typeof e=="string"&&e.length>md/3&&ou(e)>md)throw new Error(t+"contains a string greater than "+md+" utf8 bytes "+Wr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(st(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!om(o)))throw new Error(t+" contains an invalid key ("+o+") "+Wr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);WR(r,o),fu(t,a,r),HR(r)}),s&&i)throw new Error(t+' contains ".value" child '+Wr(r)+" in addition to actual children.")}},kO=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Ho(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!om(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(UR);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&zt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},NO=function(t,e,n,r){const s=iu(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];st(e,(o,a)=>{const l=new xe(o);if(fu(s,a,De(n,l)),Fp(l)===".priority"&&!TO(a))throw new Error(s+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(l)}),kO(s,i)},Pb=function(t,e,n,r){if(!Nb(n))throw new Error(iu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},IO=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Pb(t,e,n)},Ab=function(t,e){if(J(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},PO=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!om(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!CO(n))throw new Error(iu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function pu(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Bp(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Rb(t,e,n){pu(t,n),Ob(t,r=>Bp(r,e))}function Qt(t,e,n){pu(t,n),Ob(t,r=>zt(r,e)||zt(e,r))}function Ob(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(RO(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function RO(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ho&&et("event: "+n.toString()),Ti(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="repo_interrupt",jO=25;class MO{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new AO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hc(),this.transactionQueueTree_=new sm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function DO(t,e,n){if(t.stats_=Dp(t.repoInfo_),t.forceRestClient_||fR())t.server_=new dc(t.repoInfo_,(r,s,i,o)=>{xv(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>wv(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{He(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Mn(t.repoInfo_,e,(r,s,i,o)=>{xv(t,r,s,i,o)},r=>{wv(t,r)},r=>{LO(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=vR(t.repoInfo_,()=>new y2(t.stats_,t.server_)),t.infoData_=new h2,t.infoSyncTree_=new vv({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=xa(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),am(t,"connected",!1),t.serverSyncTree_=new vv({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);Qt(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function jb(t){const n=t.infoData_.getNode(new xe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function mu(t){return yO({timestamp:jb(t)})}function xv(t,e,n,r,s){t.dataUpdateCount++;const i=new xe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=ic(n,c=>We(c));o=dO(t.serverSyncTree_,i,l,s)}else{const l=We(n);o=_b(t.serverSyncTree_,i,l,s)}else if(r){const l=ic(n,c=>We(c));o=lO(t.serverSyncTree_,i,l)}else{const l=We(n);o=xa(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=hi(t,i)),Qt(t.eventQueue_,a,o)}function wv(t,e){am(t,"connected",e),e===!1&&zO(t)}function LO(t,e){st(e,(n,r)=>{am(t,n,r)})}function am(t,e,n){const r=new xe("/.info/"+e),s=We(n);t.infoData_.updateSnapshot(r,s);const i=xa(t.infoSyncTree_,r,s);Qt(t.eventQueue_,r,i)}function lm(t){return t.nextWriteId_++}function FO(t,e,n){const r=hO(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=We(s).withIndex(e._queryParams.getIndex());Jh(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=xa(t.serverSyncTree_,e._path,i);else{const a=Yo(t.serverSyncTree_,e);o=_b(t.serverSyncTree_,e._path,i,a)}return Qt(t.eventQueue_,e._path,o),xc(t.serverSyncTree_,e,n,null,!0),i},s=>(ba(t,"get for query "+He(e)+" failed: "+s),Promise.reject(new Error(s))))}function BO(t,e,n,r,s){ba(t,"set",{path:e.toString(),value:n,priority:r});const i=mu(t),o=We(n,r),a=Xp(t.serverSyncTree_,e),l=Eb(o,a,i),c=lm(t),u=vb(t.serverSyncTree_,e,l,c,!0);pu(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,p)=>{const g=f==="ok";g||mt("set at "+e+" failed: "+f);const x=ur(t.serverSyncTree_,c,!g);Qt(t.eventQueue_,e,x),tf(t,s,f,p)});const h=um(t,e);hi(t,h),Qt(t.eventQueue_,h,[])}function VO(t,e,n,r){ba(t,"update",{path:e.toString(),value:n});let s=!0;const i=mu(t),o={};if(st(n,(a,l)=>{s=!1,o[a]=Sb(De(e,a),We(l),t.serverSyncTree_,i)}),s)et("update() called with empty data.  Don't do anything."),tf(t,r,"ok",void 0);else{const a=lm(t),l=aO(t.serverSyncTree_,e,o,a);pu(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,u)=>{const h=c==="ok";h||mt("update at "+e+" failed: "+c);const f=ur(t.serverSyncTree_,a,!h),p=f.length>0?hi(t,e):e;Qt(t.eventQueue_,p,f),tf(t,r,c,u)}),st(n,c=>{const u=um(t,De(e,c));hi(t,u)}),Qt(t.eventQueue_,e,[])}}function zO(t){ba(t,"onDisconnectEvents");const e=mu(t),n=hc();Qh(t.onDisconnect_,he(),(s,i)=>{const o=Sb(s,i,t.serverSyncTree_,e);rb(n,s,o)});let r=[];Qh(n,he(),(s,i)=>{r=r.concat(xa(t.serverSyncTree_,s,i));const o=um(t,s);hi(t,o)}),t.onDisconnect_=hc(),Qt(t.eventQueue_,he(),r)}function UO(t,e,n){let r;J(e._path)===".info"?r=Jh(t.infoSyncTree_,e,n):r=Jh(t.serverSyncTree_,e,n),Rb(t.eventQueue_,e._path,r)}function ef(t,e,n){let r;J(e._path)===".info"?r=xc(t.infoSyncTree_,e,n):r=xc(t.serverSyncTree_,e,n),Rb(t.eventQueue_,e._path,r)}function $O(t){t.persistentConnection_&&t.persistentConnection_.interrupt(OO)}function ba(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),et(n,...e)}function tf(t,e,n,r){e&&Ti(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function Mb(t,e,n){return Xp(t.serverSyncTree_,e,n)||W.EMPTY_NODE}function cm(t,e=t.transactionQueueTree_){if(e||gu(t,e),Ni(e)){const n=Lb(t,e);L(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&WO(t,wa(e),n)}else Tb(e)&&hu(e,n=>{cm(t,n)})}function WO(t,e,n){const r=n.map(c=>c.currentWriteId),s=Mb(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const u=n[c];L(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=ht(e,u.path);i=i.updateChild(h,u.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{ba(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(ur(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();gu(t,im(t.transactionQueueTree_,e)),cm(t,t.transactionQueueTree_),Qt(t.eventQueue_,e,u);for(let f=0;f<h.length;f++)Ti(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{mt("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}hi(t,e)}},o)}function hi(t,e){const n=Db(t,e),r=wa(n),s=Lb(t,n);return HO(t,s,r),r}function HO(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=ht(n,l.path);let u=!1,h;if(L(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(ur(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=jO)u=!0,h="maxretry",s=s.concat(ur(t.serverSyncTree_,l.currentWriteId,!0));else{const f=Mb(t,l.path,o);l.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){fu("transaction failed: Data returned ",p,l.path);let g=We(p);typeof p=="object"&&p!=null&&wn(p,".priority")||(g=g.updatePriority(f.getPriority()));const w=l.currentWriteId,m=mu(t),y=Eb(g,f,m);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=y,l.currentWriteId=lm(t),o.splice(o.indexOf(w),1),s=s.concat(vb(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),s=s.concat(ur(t.serverSyncTree_,w,!0))}else u=!0,h="nodata",s=s.concat(ur(t.serverSyncTree_,l.currentWriteId,!0))}Qt(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}gu(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ti(r[a]);cm(t,t.transactionQueueTree_)}function Db(t,e){let n,r=t.transactionQueueTree_;for(n=J(e);n!==null&&Ni(r)===void 0;)r=im(r,n),e=Se(e),n=J(e);return r}function Lb(t,e){const n=[];return Fb(t,e,n),n.sort((r,s)=>r.order-s.order),n}function Fb(t,e,n){const r=Ni(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);hu(e,s=>{Fb(t,s,n)})}function gu(t,e){const n=Ni(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Cb(e,n.length>0?n:void 0)}hu(e,r=>{gu(t,r)})}function um(t,e){const n=wa(Db(t,e)),r=im(t.transactionQueueTree_,e);return wO(r,s=>{gd(t,s)}),gd(t,r),kb(r,s=>{gd(t,s)}),n}function gd(t,e){const n=Ni(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(L(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(L(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ur(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Cb(e,void 0):n.length=i+1,Qt(t.eventQueue_,wa(e),s);for(let o=0;o<r.length;o++)Ti(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function qO(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):mt(`Invalid query segment '${n}' in query '${t}'`)}return e}const bv=function(t,e){const n=GO(t),r=n.namespace;n.domain==="firebase.com"&&Un(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Un("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||sR();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new V1(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new xe(n.pathString)}},GO=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(s=QO(t.substring(u,h)));const f=qO(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",KO=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=Sv.charAt(n%64),n=Math.floor(n/64);L(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=Sv.charAt(e[s]);return L(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+He(this.snapshot.exportVal())}}class Vb{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return L(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ee(this._path)?null:Fp(this._path)}get ref(){return new bn(this._repo,this._path)}get _queryIdentifier(){const e=lv(this._queryParams),n=jp(e);return n==="{}"?"default":n}get _queryObject(){return lv(this._queryParams)}isEqual(e){if(e=Ot(e),!(e instanceof dm))return!1;const n=this._repo===e._repo,r=Bp(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+zR(this._path)}}class bn extends dm{constructor(e,n){super(e,n,new $p,!1)}get parent(){const e=K1(this._path);return e===null?null:new bn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class fi{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new xe(e),r=pi(this.ref,e);return new fi(this._node.getChild(n),r,Le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new fi(s,pi(this.ref,r),Le)))}hasChild(e){const n=new xe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function re(t,e){return t=Ot(t),t._checkNotDeleted("ref"),e!==void 0?pi(t._root,e):t._root}function pi(t,e){return t=Ot(t),J(t._path)===null?IO("child","path",e):Pb("child","path",e),new bn(t._repo,De(t._path,e))}function YO(t,e){t=Ot(t),Ab("push",t._path),Ib("push",e,t._path,!0);const n=jb(t._repo),r=KO(n),s=pi(t,r),i=pi(t,r);let o;return o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function wc(t,e){t=Ot(t),Ab("set",t._path),Ib("set",e,t._path,!1);const n=new ma;return BO(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function yo(t,e){NO("update",e,t._path);const n=new ma;return VO(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function It(t){t=Ot(t);const e=new zb(()=>{}),n=new Sa(e);return FO(t._repo,t,n).then(r=>new fi(r,new bn(t._repo,t._path),t._queryParams.getIndex()))}class Sa{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Bb("value",this,new fi(e.snapshotNode,new bn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Vb(this,e,n):null}matches(e){return e instanceof Sa?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class hm{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Vb(this,e,n):null}createEvent(e,n){L(e.childName!=null,"Child events should have a childName.");const r=pi(new bn(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new Bb(e.type,this,new fi(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof hm?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function XO(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const l=n,c=(u,h)=>{ef(t._repo,t,a),l(u,h)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new zb(n,i||void 0),a=new Sa(o);return UO(t._repo,t,a),()=>ef(t._repo,t,a)}function tt(t,e,n,r){return XO(t,"value",e,n,r)}function Zi(t,e,n){let r=null;const s=null;e==="value"?r=new Sa(s):e&&(r=new hm(e,s)),ef(t._repo,t,r)}Z2(bn);sO(bn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="FIREBASE_DATABASE_EMULATOR_HOST",nf={};let ZO=!1;function ej(t,e,n,r){t.repoInfo_=new V1(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function tj(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Un("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),et("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=bv(i,s),a=o.repoInfo,l;typeof process<"u"&&Wy&&(l=Wy[JO]),l?(i=`http://${l}?ns=${a.namespace}`,o=bv(i,s),a=o.repoInfo):o.repoInfo.secure;const c=new mR(t.name,t.options,e);PO("Invalid Firebase Database URL",o),ee(o.path)||Un("Database URL must point to the root of a Firebase Database (not including a child path).");const u=rj(a,t,c,new pR(t.name,n));return new sj(u,t)}function nj(t,e){const n=nf[e];(!n||n[t.key]!==t)&&Un(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$O(t),delete n[t.key]}function rj(t,e,n,r){let s=nf[e.name];s||(s={},nf[e.name]=s);let i=s[t.toURLString()];return i&&Un("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new MO(t,ZO,n,r),s[t.toURLString()]=i,i}class sj{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bn(this._repo,he())),this._rootInternal}_delete(){return this._rootInternal!==null&&(nj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Un("Cannot call "+e+" on a deleted database.")}}function ij(t=S1(),e){const n=Rp(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=CP("database");r&&oj(n,...r)}return n}function oj(t,e,n,r={}){t=Ot(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Un("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Un('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new El(El.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:TP(r.mockUserToken,t.app.options.projectId);i=new El(o)}ej(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t){JA(Ci),ai(new ls("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return tj(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),br(Hy,Qy,t),br(Hy,Qy,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj={".sv":"timestamp"};function cj(){return lj}Mn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Mn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};aj();function fm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Ub(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uj=Ub,$b=new ga("auth","Firebase",Ub());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Pp("@firebase/auth");function dj(t,...e){bc.logLevel<=_e.WARN&&bc.warn(`Auth (${Ci}): ${t}`,...e)}function Cl(t,...e){bc.logLevel<=_e.ERROR&&bc.error(`Auth (${Ci}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw pm(t,...e)}function pn(t,...e){return pm(t,...e)}function Wb(t,e,n){const r=Object.assign(Object.assign({},uj()),{[e]:n});return new ga("auth","Firebase",r).create(e,{appName:t.name})}function ts(t){return Wb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $b.create(t,...e)}function K(t,e,...n){if(!t)throw pm(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cl(e),new Error(e)}function Wn(t,e){t||Pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hj(){return Ev()==="http:"||Ev()==="https:"}function Ev(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hj()||NP()||"connection"in navigator)?navigator.onLine:!0}function pj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wn(n>e,"Short delay should be less than long delay!"),this.isMobile=Ip()||v1()}get(){return fj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t,e){Wn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new Ea(3e4,6e4);function gm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ii(t,e,n,r,s={}){return Qb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ei(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return kP()||(c.referrerPolicy="no-referrer"),Hb.fetch()(qb(t,t.config.apiHost,n,a),c)})}async function Qb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},mj),e);try{const s=new vj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Za(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Za(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Za(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Za(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Wb(t,u,c);$n(t,u)}}catch(s){if(s instanceof Dr)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function yj(t,e,n,r,s={}){const i=await Ii(t,e,n,r,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}function qb(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?mm(t.config,s):`${t.config.apiScheme}://${s}`}class vj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),gj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(t,e){return Ii(t,"POST","/v1/accounts:delete",e)}async function Gb(t,e){return Ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xj(t,e=!1){const n=Ot(t),r=await n.getIdToken(e),s=ym(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:vo(yd(s.auth_time)),issuedAtTime:vo(yd(s.iat)),expirationTime:vo(yd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yd(t){return Number(t)*1e3}function ym(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cl("JWT malformed, contained fewer than 3 sections"),null;try{const s=sc(n);return s?JSON.parse(s):(Cl("Failed to decode base64 JWT payload"),null)}catch(s){return Cl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Cv(t){const e=ym(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dr&&wj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vo(this.lastLoginAt),this.creationTime=vo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Xo(t,Gb(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Kb(i.providerUserInfo):[],a=Ej(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new sf(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Sj(t){const e=Ot(t);await Sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ej(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Kb(t){return t.map(e=>{var{providerId:n}=e,r=fm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cj(t,e){const n=await Qb(t,{},async()=>{const r=Ei({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=qb(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Hb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Tj(t,e){return Ii(t,"POST","/v2/accounts:revokeToken",gm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=Cv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Cj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ys;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ys,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class An{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Xo(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xj(this,e)}reload(){return Sj(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new An(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(ts(this.auth));const e=await this.getIdToken();return await Xo(this,_j(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:b,isAnonymous:E,providerData:C,stsTokenManager:S}=n;K(v&&S,e,"internal-error");const k=Ys.fromJSON(this.name,S);K(typeof v=="string",e,"internal-error"),Gn(h,e.name),Gn(f,e.name),K(typeof b=="boolean",e,"internal-error"),K(typeof E=="boolean",e,"internal-error"),Gn(p,e.name),Gn(g,e.name),Gn(x,e.name),Gn(w,e.name),Gn(m,e.name),Gn(y,e.name);const F=new An({uid:v,auth:e,email:f,emailVerified:b,displayName:h,isAnonymous:E,photoURL:g,phoneNumber:p,tenantId:x,stsTokenManager:k,createdAt:m,lastLoginAt:y});return C&&Array.isArray(C)&&(F.providerData=C.map(B=>Object.assign({},B))),w&&(F._redirectEventId=w),F}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ys;s.updateFromServerResponse(n);const i=new An({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Sc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Kb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ys;a.updateFromIdToken(r);const l=new An({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new sf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;function Rn(t){Wn(t instanceof Function,"Expected a class definition");let e=Tv.get(t);return e?(Wn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Yb.type="NONE";const kv=Yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e,n){return`firebase:${t}:${e}:${n}`}class Xs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Tl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Tl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?An._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xs(Rn(kv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Rn(kv);const o=Tl(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=An._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Xs(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Xs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nS(e))return"Blackberry";if(rS(e))return"Webos";if(Jb(e))return"Safari";if((e.includes("chrome/")||Zb(e))&&!e.includes("edge/"))return"Chrome";if(tS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Xb(t=gt()){return/firefox\//i.test(t)}function Jb(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zb(t=gt()){return/crios\//i.test(t)}function eS(t=gt()){return/iemobile/i.test(t)}function tS(t=gt()){return/android/i.test(t)}function nS(t=gt()){return/blackberry/i.test(t)}function rS(t=gt()){return/webos/i.test(t)}function vm(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kj(t=gt()){var e;return vm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Nj(){return IP()&&document.documentMode===10}function sS(t=gt()){return vm(t)||tS(t)||rS(t)||nS(t)||/windows phone/i.test(t)||eS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t,e=[]){let n;switch(t){case"Browser":n=Nv(gt());break;case"Worker":n=`${Nv(gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ci}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(t,e={}){return Ii(t,"GET","/v2/passwordPolicy",gm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=6;class Rj{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Aj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.beforeStateQueue=new Ij(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$b,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Xs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gb(this,{idToken:e}),r=await An._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(ts(this));const n=e?Ot(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Pj(this),n=new Rj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ga("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Tj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Xs.create(this,[Rn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&dj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _m(t){return Ot(t)}class Iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=BP(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jj(t){xm=t}function Mj(t){return xm.loadJS(t)}function Dj(){return xm.gapiScript}function Lj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e){const n=Rp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(oc(i,e??{}))return s;$n(s,"already-initialized")}return n.initialize({options:e})}function Bj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Vj(t,e,n){const r=_m(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=oS(e),{host:o,port:a}=zj(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Uj()}function oS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zj(t){const e=oS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Pv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Pv(o)}}}function Pv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Uj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e){return yj(t,"POST","/v1/accounts:signInWithIdp",gm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="http://localhost";class hs extends aS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=fm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new hs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){const e={requestUri:$j,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ei(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends lS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Ca{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hs._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rr.credential(n,r)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Ca{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Ca{constructor(){super("twitter.com")}static credential(e,n){return hs._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ir.credential(n,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await An._fromIdTokenResponse(e,r,s),o=Av(r);return new mi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Av(r);return new mi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Av(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends Dr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ec(e,n,r,s)}}function cS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ec._fromErrorAndOperation(t,i,e,r):i})}async function Wj(t,e,n=!1){const r=await Xo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return mi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj(t,e,n=!1){const{auth:r}=t;if(cr(r.app))return Promise.reject(ts(r));const s="reauthenticate";try{const i=await Xo(t,cS(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=ym(i.idToken);K(o,r,"internal-error");const{sub:a}=o;return K(t.uid===a,r,"user-mismatch"),mi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(t,e,n=!1){if(cr(t.app))return Promise.reject(ts(t));const r="signIn",s=await cS(t,r,e),i=await mi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function qj(t,e,n,r){return Ot(t).onIdTokenChanged(e,n,r)}function Gj(t,e,n){return Ot(t).beforeAuthStateChanged(e,n)}const Cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cc,"1"),this.storage.removeItem(Cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=1e3,Yj=10;class dS extends uS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Nj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Yj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Kj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dS.type="LOCAL";const Xj=dS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS extends uS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hS.type="SESSION";const fS=hS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new yu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await Jj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=wm("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return window}function eM(t){mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function tM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rM(){return pS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="firebaseLocalStorageDb",sM=1,Tc="firebaseLocalStorage",gS="fbase_key";class Ta{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vu(t,e){return t.transaction([Tc],e?"readwrite":"readonly").objectStore(Tc)}function iM(){const t=indexedDB.deleteDatabase(mS);return new Ta(t).toPromise()}function of(){const t=indexedDB.open(mS,sM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tc,{keyPath:gS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tc)?e(r):(r.close(),await iM(),e(await of()))})})}async function Rv(t,e,n){const r=vu(t,!0).put({[gS]:e,value:n});return new Ta(r).toPromise()}async function oM(t,e){const n=vu(t,!1).get(e),r=await new Ta(n).toPromise();return r===void 0?null:r.value}function Ov(t,e){const n=vu(t,!0).delete(e);return new Ta(n).toPromise()}const aM=800,lM=3;class yS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await of(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yu._getInstance(rM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tM(),!this.activeServiceWorker)return;this.sender=new Zj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await of();return await Rv(e,Cc,"1"),await Ov(e,Cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ov(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=vu(s,!1).getAll();return new Ta(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yS.type="LOCAL";const cM=yS;new Ea(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t,e){return e?Rn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends aS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dM(t){return Qj(t.auth,new bm(t),t.bypassAuthState)}function hM(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),Hj(n,new bm(t),t.bypassAuthState)}async function fM(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),Wj(n,new bm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dM;case"linkViaPopup":case"linkViaRedirect":return fM;case"reauthViaPopup":case"reauthViaRedirect":return hM;default:$n(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=new Ea(2e3,1e4);class Ds extends vS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){Wn(this.filter.length===1,"Popup operations only handle one event");const e=wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pM.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="pendingRedirect",kl=new Map;class gM extends vS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kl.get(this.auth._key());if(!e){try{const r=await yM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kl.set(this.auth._key(),e)}return this.bypassAuthState||kl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yM(t,e){const n=xM(e),r=_M(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function vM(t,e){kl.set(t._key(),e)}function _M(t){return Rn(t._redirectPersistence)}function xM(t){return Tl(mM,t.config.apiKey,t.name)}async function wM(t,e,n=!1){if(cr(t.app))return Promise.reject(ts(t));const r=_m(t),s=uM(r,e),o=await new gM(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=10*60*1e3;class SM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_S(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bM&&this.cachedEventUids.clear(),this.cachedEventUids.has(jv(e))}saveEventToCache(e){this.cachedEventUids.add(jv(e)),this.lastProcessedEventTime=Date.now()}}function jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _S({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _S(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(t,e={}){return Ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kM=/^https?/;async function NM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CM(t);for(const n of e)try{if(IM(n))return}catch{}$n(t,"unauthorized-domain")}function IM(t){const e=rf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kM.test(n))return!1;if(TM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new Ea(3e4,6e4);function Mv(){const t=mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AM(t){return new Promise((e,n)=>{var r,s,i;function o(){Mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mv(),n(pn(t,"network-request-failed"))},timeout:PM.get()})}if(!((s=(r=mn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=mn().gapi)===null||i===void 0)&&i.load)o();else{const a=Lj("iframefcb");return mn()[a]=()=>{gapi.load?o():n(pn(t,"network-request-failed"))},Mj(`${Dj()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Nl=null,e})}let Nl=null;function RM(t){return Nl=Nl||AM(t),Nl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new Ea(5e3,15e3),jM="__/auth/iframe",MM="emulator/auth/iframe",DM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FM(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mm(e,MM):`https://${t.config.authDomain}/${jM}`,r={apiKey:e.apiKey,appName:t.name,v:Ci},s=LM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ei(r).slice(1)}`}async function BM(t){const e=await RM(t),n=mn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:FM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=pn(t,"network-request-failed"),a=mn().setTimeout(()=>{i(o)},OM.get());function l(){mn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zM=500,UM=600,$M="_blank",WM="http://localhost";class Dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HM(t,e,n,r=zM,s=UM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},VM),{width:r.toString(),height:s.toString(),top:i,left:o}),c=gt().toLowerCase();n&&(a=Zb(c)?$M:n),Xb(c)&&(e=e||WM,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(kj(c)&&a!=="_self")return QM(e||"",a),new Dv(null);const h=window.open(e||"",a,u);K(h,t,"popup-blocked");try{h.focus()}catch{}return new Dv(h)}function QM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="__/auth/handler",GM="emulator/auth/handler",KM=encodeURIComponent("fac");async function Lv(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ci,eventId:s};if(e instanceof lS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Lh(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Ca){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${KM}=${encodeURIComponent(l)}`:"";return`${YM(t)}?${Ei(a).slice(1)}${c}`}function YM({config:t}){return t.emulator?mm(t,GM):`https://${t.authDomain}/${qM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="webStorageSupport";class XM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fS,this._completeRedirectFn=wM,this._overrideRedirectResult=vM}async _openPopup(e,n,r,s){var i;Wn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Lv(e,n,r,rf(),s);return HM(e,o,wm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Lv(e,n,r,rf(),s);return eM(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BM(e),r=new SM(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vd,{type:vd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[vd];o!==void 0&&n(!!o),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sS()||Jb()||vm()}}const JM=XM;var Fv="@firebase/auth",Bv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tD(t){ai(new ls("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iS(t)},c=new Oj(r,s,i,l);return Bj(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ai(new ls("auth-internal",e=>{const n=_m(e.getProvider("auth").getImmediate());return(r=>new ZM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(Fv,Bv,eD(t)),br(Fv,Bv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=5*60,rD=y1("authIdTokenMaxAge")||nD;let Vv=null;const sD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rD)return;const s=n==null?void 0:n.token;Vv!==s&&(Vv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iD(t=S1()){const e=Rp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Fj(t,{popupRedirectResolver:JM,persistence:[cM,Xj,fS]}),r=y1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=sD(i.toString());Gj(n,o,()=>o(n.currentUser)),qj(n,a=>o(a))}}const s=m1("auth");return s&&Vj(n,`http://${s}`),n}function oD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}jj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=pn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",oD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tD("Browser");const aD={apiKey:"AIzaSyA8DPWqf2NPA9baAonfnMA9AvvKtqtE6kU",authDomain:"icctquizbeesystem.firebaseapp.com",databaseURL:"https://icctquizbeesystem-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"icctquizbeesystem",storageBucket:"icctquizbeesystem.firebasestorage.app",messagingSenderId:"864990587552",appId:"1:864990587552:web:df611eb19455e4c58677c5",measurementId:"G-P19DDBDZ8Q"},xS=b1(aD),se=ij(xS);iD(xS);let el;const lD=new Uint8Array(16);function cD(){if(!el&&(el=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!el))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return el(lD)}const Xe=[];for(let t=0;t<256;++t)Xe.push((t+256).toString(16).slice(1));function uD(t,e=0){return Xe[t[e+0]]+Xe[t[e+1]]+Xe[t[e+2]]+Xe[t[e+3]]+"-"+Xe[t[e+4]]+Xe[t[e+5]]+"-"+Xe[t[e+6]]+Xe[t[e+7]]+"-"+Xe[t[e+8]]+Xe[t[e+9]]+"-"+Xe[t[e+10]]+Xe[t[e+11]]+Xe[t[e+12]]+Xe[t[e+13]]+Xe[t[e+14]]+Xe[t[e+15]]}const dD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zv={randomUUID:dD};function af(t,e,n){if(zv.randomUUID&&!t)return zv.randomUUID();t=t||{};const r=t.random||(t.rng||cD)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,uD(r)}function Bt({className:t,...e}){return d.jsx("input",{className:o1("rounded-sm p-2 text-lg font-semibold outline outline-2 outline-gray-300",t),...e})}const Sm=_.createContext({});function Em(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const Cm=typeof window<"u",wS=Cm?_.useLayoutEffect:_.useEffect,_u=_.createContext(null),Tm=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class hD extends _.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function fD({children:t,isPresent:e,anchorX:n}){const r=_.useId(),s=_.useRef(null),i=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=_.useContext(Tm);return _.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:u,right:h}=i.current;if(e||!s.current||!a||!l)return;const f=n==="left"?`left: ${u}`:`right: ${h}`;s.current.dataset.motionPopId=r;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${f}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),d.jsx(hD,{isPresent:e,childRef:s,sizeRef:i,children:_.cloneElement(t,{ref:s})})}const pD=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a})=>{const l=Em(mD),c=_.useId();let u=!0,h=_.useMemo(()=>(u=!1,{id:c,initial:e,isPresent:n,custom:s,onExitComplete:f=>{l.set(f,!0);for(const p of l.values())if(!p)return;r&&r()},register:f=>(l.set(f,!1),()=>l.delete(f))}),[n,l,r]);return i&&u&&(h={...h}),_.useMemo(()=>{l.forEach((f,p)=>l.set(p,!1))},[n]),_.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(fD,{isPresent:n,anchorX:a,children:t})),d.jsx(_u.Provider,{value:h,children:t})};function mD(){return new Map}function bS(t=!0){const e=_.useContext(_u);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=_.useId();_.useEffect(()=>{if(t)return s(i)},[t]);const o=_.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const tl=t=>t.key||"";function Uv(t){const e=[];return _.Children.forEach(t,n=>{_.isValidElement(n)&&e.push(n)}),e}const $v=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left"})=>{const[l,c]=bS(o),u=_.useMemo(()=>Uv(t),[t]),h=o&&!l?[]:u.map(tl),f=_.useRef(!0),p=_.useRef(u),g=Em(()=>new Map),[x,w]=_.useState(u),[m,y]=_.useState(u);wS(()=>{f.current=!1,p.current=u;for(let E=0;E<m.length;E++){const C=tl(m[E]);h.includes(C)?g.delete(C):g.get(C)!==!0&&g.set(C,!1)}},[m,h.length,h.join("-")]);const v=[];if(u!==x){let E=[...u];for(let C=0;C<m.length;C++){const S=m[C],k=tl(S);h.includes(k)||(E.splice(C,0,S),v.push(S))}return i==="wait"&&v.length&&(E=v),y(Uv(E)),w(u),null}const{forceRender:b}=_.useContext(Sm);return d.jsx(d.Fragment,{children:m.map(E=>{const C=tl(E),S=o&&!l?!1:u===m||h.includes(C),k=()=>{if(g.has(C))g.set(C,!0);else return;let F=!0;g.forEach(B=>{B||(F=!1)}),F&&(b==null||b(),y(p.current),o&&(c==null||c()),r&&r())};return d.jsx(pD,{isPresent:S,initial:!f.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,onExitComplete:S?void 0:k,anchorX:a,children:E},C)})})};function km(t,e){t.indexOf(e)===-1&&t.push(e)}function Nm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let SS=()=>{};const lf={useManualTiming:!1};function Im(t){let e;return()=>(e===void 0&&(e=t()),e)}const $t=t=>t,Jo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Pm{constructor(){this.subscriptions=[]}add(e){return km(this.subscriptions,e),()=>Nm(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gn=t=>t*1e3,yn=t=>t/1e3;function ES(t,e){return e?t*(1e3/e):0}const gD=Im(()=>window.ScrollTimeline!==void 0);class yD{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(gD()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class vD extends yD{then(e,n){return this.finished.finally(e).then(()=>{})}}const Wv={value:null},Am=t=>Array.isArray(t)&&typeof t[0]=="number",_D={};function xD(t,e){const n=Im(t);return()=>_D[e]??n()}const Zo=xD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),CS=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(i/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},eo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,cf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eo([0,.65,.55,1]),circOut:eo([.55,0,1,.45]),backIn:eo([.31,.01,.66,-.59]),backOut:eo([.33,1.53,.69,.99])};function TS(t,e){if(t)return typeof t=="function"&&Zo()?CS(t,e):Am(t)?eo(t):Array.isArray(t)?t.map(n=>TS(n,e)||cf.easeOut):cf[t]}function wD(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const h=TS(a,s);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal",pseudoElement:c})}function Rm(t){return typeof t=="function"&&"applyToOptions"in t}function Om(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const kc=2e4;function jm(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<kc;)e+=n,r=t.next(e);return e>=kc?1/0:e}function bD(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(jm(r),kc);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:yn(s)}}function kS(t){return!!(typeof t=="function"&&Zo()||!t||typeof t=="string"&&(t in cf||Zo())||Am(t)||Array.isArray(t)&&t.every(kS))}function Hv(t,e){t.timeline=e,t.onfinish=null}const nl=["read","resolveKeyframes","update","preRender","render","postRender"];function SD(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(h){o.has(h)&&(u.schedule(h),t()),l++,h(a)}const u={schedule:(h,f=!1,p=!1)=>{const x=p&&s?n:r;return f&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),e&&Wv.value&&Wv.value.frameloop[e].push(l),l=0,n.clear(),s=!1,i&&(i=!1,u.process(h))}};return u}const ED=40;function NS(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=nl.reduce((m,y)=>(m[y]=SD(i,e?y:void 0),m),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:f}=o,p=()=>{const m=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(m-s.timestamp,ED),1),s.timestamp=m,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),h.process(s),f.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(p))},g=()=>{n=!0,r=!0,s.isProcessing||t(p)};return{schedule:nl.reduce((m,y)=>{const v=o[y];return m[y]=(b,E=!1,C=!1)=>(n||g(),v.schedule(b,E,C)),m},{}),cancel:m=>{for(let y=0;y<nl.length;y++)o[nl[y]].cancel(m)},state:s,steps:o}}const{schedule:Mm}=NS(queueMicrotask,!1),{schedule:Ce,cancel:Pr,state:Ze,steps:_d}=NS(typeof requestAnimationFrame<"u"?requestAnimationFrame:$t,!0);let Il;function CD(){Il=void 0}const vn={now:()=>(Il===void 0&&vn.set(Ze.isProcessing||lf.useManualTiming?Ze.timestamp:performance.now()),Il),set:t=>{Il=t,queueMicrotask(CD)}},Yt={x:!1,y:!1};function IS(){return Yt.x||Yt.y}function TD(t){return t==="x"||t==="y"?Yt[t]?null:(Yt[t]=!0,()=>{Yt[t]=!1}):Yt.x||Yt.y?null:(Yt.x=Yt.y=!0,()=>{Yt.x=Yt.y=!1})}function kD(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function PS(t,e){const n=kD(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function Qv(t){return!(t.pointerType==="touch"||IS())}function ND(t,e,n={}){const[r,s,i]=PS(t,n),o=a=>{if(!Qv(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=h=>{Qv(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const AS=(t,e)=>e?t===e?!0:AS(t,e.parentElement):!1,Dm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ID=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function PD(t){return ID.has(t.tagName)||t.tabIndex!==-1}const to=new WeakSet;function qv(t){return e=>{e.key==="Enter"&&t(e)}}function xd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const AD=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=qv(()=>{if(to.has(n))return;xd(n,"down");const s=qv(()=>{xd(n,"up")}),i=()=>xd(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Gv(t){return Dm(t)&&!IS()}function RD(t,e,n={}){const[r,s,i]=PS(t,n),o=a=>{const l=a.currentTarget;if(!Gv(a)||to.has(l))return;to.add(l);const c=e(l,a),u=(p,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!Gv(p)||!to.has(l))&&(to.delete(l),typeof c=="function"&&c(p,{success:g}))},h=p=>{u(p,l===window||l===document||n.useGlobalTarget||AS(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a instanceof HTMLElement&&(a.addEventListener("focus",c=>AD(c,s)),!PD(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}const Kv=30,OD=t=>!isNaN(parseFloat(t));class jD{constructor(e,n={}){this.version="12.7.4",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=vn.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=vn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=OD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Pm);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=vn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Kv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Kv);return ES(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ea(t,e){return new jD(t,e)}const RS=_.createContext({strict:!1}),Yv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gi={};for(const t in Yv)gi[t]={isEnabled:e=>Yv[t].some(n=>!!e[n])};function MD(t){for(const e in t)gi[e]={...gi[e],...t[e]}}const DD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||DD.has(t)}let OS=t=>!Nc(t);function LD(t){t&&(OS=e=>e.startsWith("on")?!Nc(e):t(e))}try{LD(require("@emotion/is-prop-valid").default)}catch{}function FD(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(OS(s)||n===!0&&Nc(s)||!e&&!Nc(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function BD(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const xu=_.createContext({});function wu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ta(t){return typeof t=="string"||Array.isArray(t)}const Lm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fm=["initial",...Lm];function bu(t){return wu(t.animate)||Fm.some(e=>ta(t[e]))}function jS(t){return!!(bu(t)||t.variants)}function VD(t,e){if(bu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ta(n)?n:void 0,animate:ta(r)?r:void 0}}return t.inherit!==!1?e:{}}function zD(t){const{initial:e,animate:n}=VD(t,_.useContext(xu));return _.useMemo(()=>({initial:e,animate:n}),[Xv(e),Xv(n)])}function Xv(t){return Array.isArray(t)?t.join(" "):t}const UD=Symbol.for("motionComponentSymbol");function Ls(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $D(t,e,n){return _.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ls(n)&&(n.current=r))},[e])}const Bm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WD="framerAppearId",MS="data-"+Bm(WD),DS=_.createContext({});function HD(t,e,n,r,s){var x,w;const{visualElement:i}=_.useContext(xu),o=_.useContext(RS),a=_.useContext(_u),l=_.useContext(Tm).reducedMotion,c=_.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=_.useContext(DS);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&QD(c.current,n,s,h);const f=_.useRef(!1);_.useInsertionEffect(()=>{u&&f.current&&u.update(n,a)});const p=n[MS],g=_.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,p)));return wS(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),Mm.render(u.render),g.current&&u.animationState&&u.animationState.animateChanges())}),_.useEffect(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)==null||m.call(window,p)}),g.current=!1))}),u}function QD(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:LS(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Ls(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function LS(t){if(t)return t.options.allowProjection!==!1?t.projection:LS(t.parent)}function qD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&MD(t);function i(a,l){let c;const u={..._.useContext(Tm),...a,layoutId:GD(a)},{isStatic:h}=u,f=zD(a),p=r(a,h);if(!h&&Cm){KD();const g=YD(u);c=g.MeasureLayout,f.visualElement=HD(s,p,u,e,g.ProjectionNode)}return d.jsxs(xu.Provider,{value:f,children:[c&&f.visualElement?d.jsx(c,{visualElement:f.visualElement,...u}):null,n(s,a,$D(p,f.visualElement,l),p,h,f.visualElement)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=_.forwardRef(i);return o[UD]=s,o}function GD({layoutId:t}){const e=_.useContext(Sm).id;return e&&t!==void 0?e+"-"+t:t}function KD(t,e){_.useContext(RS).strict}function YD(t){const{drag:e,layout:n}=gi;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const FS=t=>e=>typeof e=="string"&&e.startsWith(t),Vm=FS("--"),XD=FS("var(--"),zm=t=>XD(t)?JD.test(t.split("/*")[0].trim()):!1,JD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,na={};function ZD(t){for(const e in t)na[e]=t[e],Vm(e)&&(na[e].isCSSVariable=!0)}const Pi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xs=new Set(Pi);function BS(t,{layout:e,layoutId:n}){return xs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!na[t]||t==="opacity")}const ct=t=>!!(t&&t.getVelocity),VS=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hn=(t,e,n)=>n>e?e:n<t?t:n,Ai={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ra={...Ai,transform:t=>Hn(0,1,t)},rl={...Ai,default:1},ka=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Yn=ka("deg"),_n=ka("%"),$=ka("px"),eL=ka("vh"),tL=ka("vw"),Jv={..._n,parse:t=>_n.parse(t)/100,transform:t=>_n.transform(t*100)},nL={borderWidth:$,borderTopWidth:$,borderRightWidth:$,borderBottomWidth:$,borderLeftWidth:$,borderRadius:$,radius:$,borderTopLeftRadius:$,borderTopRightRadius:$,borderBottomRightRadius:$,borderBottomLeftRadius:$,width:$,maxWidth:$,height:$,maxHeight:$,top:$,right:$,bottom:$,left:$,padding:$,paddingTop:$,paddingRight:$,paddingBottom:$,paddingLeft:$,margin:$,marginTop:$,marginRight:$,marginBottom:$,marginLeft:$,backgroundPositionX:$,backgroundPositionY:$},rL={rotate:Yn,rotateX:Yn,rotateY:Yn,rotateZ:Yn,scale:rl,scaleX:rl,scaleY:rl,scaleZ:rl,skew:Yn,skewX:Yn,skewY:Yn,distance:$,translateX:$,translateY:$,translateZ:$,x:$,y:$,z:$,perspective:$,transformPerspective:$,opacity:ra,originX:Jv,originY:Jv,originZ:$},Zv={...Ai,transform:Math.round},Um={...nL,...rL,zIndex:Zv,size:$,fillOpacity:ra,strokeOpacity:ra,numOctaves:Zv},sL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iL=Pi.length;function oL(t,e,n){let r="",s=!0;for(let i=0;i<iL;i++){const o=Pi[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=VS(a,Um[o]);if(!l){s=!1;const u=sL[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function $m(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(xs.has(l)){o=!0;continue}else if(Vm(l)){s[l]=c;continue}else{const u=VS(c,Um[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=oL(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const Wm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zS(t,e,n){for(const r in e)!ct(e[r])&&!BS(r,n)&&(t[r]=e[r])}function aL({transformTemplate:t},e){return _.useMemo(()=>{const n=Wm();return $m(n,e,t),Object.assign({},n.vars,n.style)},[e])}function lL(t,e){const n=t.style||{},r={};return zS(r,n,t),Object.assign(r,aL(t,e)),r}function cL(t,e){const n={},r=lL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const uL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hm(t){return typeof t!="string"||t.includes("-")?!1:!!(uL.indexOf(t)>-1||/[A-Z]/u.test(t))}const dL={offset:"stroke-dashoffset",array:"stroke-dasharray"},hL={offset:"strokeDashoffset",array:"strokeDasharray"};function fL(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?dL:hL;t[i.offset]=$.transform(-r);const o=$.transform(e),a=$.transform(n);t[i.array]=`${o} ${a}`}function e0(t,e,n){return typeof t=="string"?t:$.transform(e+n*t)}function pL(t,e,n){const r=e0(e,t.x,t.width),s=e0(n,t.y,t.height);return`${r} ${s}`}function Qm(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if($m(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:g}=t;f.transform&&(g&&(p.transform=f.transform),delete f.transform),g&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=pL(g,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&fL(f,o,a,l,!1)}const US=()=>({...Wm(),attrs:{}}),qm=t=>typeof t=="string"&&t.toLowerCase()==="svg";function mL(t,e,n,r){const s=_.useMemo(()=>{const i=US();return Qm(i,e,qm(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};zS(i,t.style,t),s.style={...i,...s.style}}return s}function gL(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(Hm(n)?mL:cL)(r,i,o,n),c=FD(r,typeof n=="string",t),u=n!==_.Fragment?{...c,...l,ref:s}:{},{children:h}=r,f=_.useMemo(()=>ct(h)?h.get():h,[h]);return _.createElement(n,{...u,children:f})}}function t0(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Gm(t,e,n,r){if(typeof e=="function"){const[s,i]=t0(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=t0(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const uf=t=>Array.isArray(t),yL=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),vL=t=>uf(t)?t[t.length-1]||0:t;function Pl(t){const e=ct(t)?t.get():t;return yL(e)?e.toValue():e}function _L({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:xL(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const $S=t=>(e,n)=>{const r=_.useContext(xu),s=_.useContext(_u),i=()=>_L(t,e,r,s);return n?i():Em(i)};function xL(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=Pl(i[f]);let{initial:o,animate:a}=t;const l=bu(t),c=jS(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!wu(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const g=Gm(t,f[p]);if(g){const{transitionEnd:x,transition:w,...m}=g;for(const y in m){let v=m[y];if(Array.isArray(v)){const b=u?v.length-1:0;v=v[b]}v!==null&&(s[y]=v)}for(const y in x)s[y]=x[y]}}}return s}function Km(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(ct(r[o])||e.style&&ct(e.style[o])||BS(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const wL={useVisualState:$S({scrapeMotionValuesFromProps:Km,createRenderState:Wm})};function WS(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function HS(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const QS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qS(t,e,n,r){HS(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(QS.has(s)?s:Bm(s),e.attrs[s])}function GS(t,e,n){const r=Km(t,e,n);for(const s in t)if(ct(t[s])||ct(e[s])){const i=Pi.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const n0=["x","y","width","height","cx","cy","r"],bL={useVisualState:$S({scrapeMotionValuesFromProps:GS,createRenderState:US,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(xs.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<n0.length;a++){const l=n0[a];t[l]!==e[l]&&(o=!0)}o&&Ce.read(()=>{WS(n,r),Ce.render(()=>{Qm(r,s,qm(n.tagName),t.transformTemplate),qS(n,r)})})}})};function SL(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...Hm(r)?bL:wL,preloadedFeatures:t,useRender:gL(s),createVisualElement:e,Component:r};return qD(o)}}function sa(t,e,n){const r=t.getProps();return Gm(r,e,n!==void 0?n:r.custom,t)}const KS=new Set(["width","height","top","left","right","bottom",...Pi]);function EL(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ea(n))}function CL(t,e){const n=sa(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=vL(i[o]);EL(t,o,a)}}function TL(t){return!!(ct(t)&&t.add)}function df(t,e){const n=t.getValue("willChange");if(TL(n))return n.add(e);if(!n&&lf.WillChange){const r=new lf.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function YS(t){return t.props[MS]}const XS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,kL=1e-7,NL=12;function IL(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=XS(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>kL&&++a<NL);return o}function Na(t,e,n,r){if(t===e&&n===r)return $t;const s=i=>IL(i,0,1,t,n);return i=>i===0||i===1?i:XS(s(i),e,r)}const JS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ZS=t=>e=>1-t(1-e),eE=Na(.33,1.53,.69,.99),Ym=ZS(eE),tE=JS(Ym),nE=t=>(t*=2)<1?.5*Ym(t):.5*(2-Math.pow(2,-10*(t-1))),Xm=t=>1-Math.sin(Math.acos(t)),rE=ZS(Xm),sE=JS(Xm),iE=t=>/^0[^.\s]+$/u.test(t);function PL(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||iE(t):!0}const _o=t=>Math.round(t*1e5)/1e5,Jm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function AL(t){return t==null}const RL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zm=(t,e)=>n=>!!(typeof n=="string"&&RL.test(n)&&n.startsWith(t)||e&&!AL(n)&&Object.prototype.hasOwnProperty.call(n,e)),oE=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Jm);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},OL=t=>Hn(0,255,t),wd={...Ai,transform:t=>Math.round(OL(t))},Yr={test:Zm("rgb","red"),parse:oE("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wd.transform(t)+", "+wd.transform(e)+", "+wd.transform(n)+", "+_o(ra.transform(r))+")"};function jL(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const hf={test:Zm("#"),parse:jL,transform:Yr.transform},Fs={test:Zm("hsl","hue"),parse:oE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+_n.transform(_o(e))+", "+_n.transform(_o(n))+", "+_o(ra.transform(r))+")"},at={test:t=>Yr.test(t)||hf.test(t)||Fs.test(t),parse:t=>Yr.test(t)?Yr.parse(t):Fs.test(t)?Fs.parse(t):hf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Yr.transform(t):Fs.transform(t)},ML=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function DL(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Jm))==null?void 0:e.length)||0)+(((n=t.match(ML))==null?void 0:n.length)||0)>0}const aE="number",lE="color",LL="var",FL="var(",r0="${}",BL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ia(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(BL,l=>(at.test(l)?(r.color.push(i),s.push(lE),n.push(at.parse(l))):l.startsWith(FL)?(r.var.push(i),s.push(LL),n.push(l)):(r.number.push(i),s.push(aE),n.push(parseFloat(l))),++i,r0)).split(r0);return{values:n,split:a,indexes:r,types:s}}function cE(t){return ia(t).values}function uE(t){const{split:e,types:n}=ia(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===aE?i+=_o(s[o]):a===lE?i+=at.transform(s[o]):i+=s[o]}return i}}const VL=t=>typeof t=="number"?0:t;function zL(t){const e=cE(t);return uE(t)(e.map(VL))}const Ar={test:DL,parse:cE,createTransformer:uE,getAnimatableNone:zL},UL=new Set(["brightness","contrast","saturate","opacity"]);function $L(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Jm)||[];if(!r)return t;const s=n.replace(r,"");let i=UL.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const WL=/\b([a-z-]*)\(.*?\)/gu,ff={...Ar,getAnimatableNone:t=>{const e=t.match(WL);return e?e.map($L).join(" "):t}},HL={...Um,color:at,backgroundColor:at,outlineColor:at,fill:at,stroke:at,borderColor:at,borderTopColor:at,borderRightColor:at,borderBottomColor:at,borderLeftColor:at,filter:ff,WebkitFilter:ff},dE=t=>HL[t];function hE(t,e){let n=dE(t);return n!==ff&&(n=Ar),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QL=new Set(["auto","none","0"]);function qL(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!QL.has(i)&&ia(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=hE(n,s)}const Xr=t=>t*180/Math.PI,pf=t=>{const e=Xr(Math.atan2(t[1],t[0]));return mf(e)},GL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:pf,rotateZ:pf,skewX:t=>Xr(Math.atan(t[1])),skewY:t=>Xr(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},mf=t=>(t=t%360,t<0&&(t+=360),t),s0=pf,i0=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),o0=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),KL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:i0,scaleY:o0,scale:t=>(i0(t)+o0(t))/2,rotateX:t=>mf(Xr(Math.atan2(t[6],t[5]))),rotateY:t=>mf(Xr(Math.atan2(-t[2],t[0]))),rotateZ:s0,rotate:s0,skewX:t=>Xr(Math.atan(t[4])),skewY:t=>Xr(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function a0(t){return t.includes("scale")?1:0}function gf(t,e){if(!t||t==="none")return a0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=KL,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=GL,s=a}if(!s)return a0(e);const i=r[e],o=s[1].split(",").map(XL);return typeof i=="function"?i(o):o[i]}const YL=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return gf(n,e)};function XL(t){return parseFloat(t.trim())}const l0=t=>t===Ai||t===$,JL=new Set(["x","y","z"]),ZL=Pi.filter(t=>!JL.has(t));function e3(t){const e=[];return ZL.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>gf(e,"x"),y:(t,{transform:e})=>gf(e,"y")};yi.translateX=yi.x;yi.translateY=yi.y;const ns=new Set;let yf=!1,vf=!1;function fE(){if(vf){const t=Array.from(ns).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=e3(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vf=!1,yf=!1,ns.forEach(t=>t.complete()),ns.clear()}function pE(){ns.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(vf=!0)})}function t3(){pE(),fE()}class eg{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ns.add(this),yf||(yf=!0,Ce.read(pE),Ce.resolveKeyframes(fE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ns.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ns.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const mE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),n3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function r3(t){const e=n3.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function gE(t,e,n=1){const[r,s]=r3(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return mE(o)?parseFloat(o):o}return zm(s)?gE(s,e,n+1):s}const yE=t=>e=>e.test(t),s3={test:t=>t==="auto",parse:t=>t},vE=[Ai,$,_n,Yn,tL,eL,s3],c0=t=>vE.find(yE(t));class _E extends eg{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),zm(c))){const u=gE(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!KS.has(r)||e.length!==2)return;const[s,i]=e,o=c0(s),a=c0(i);if(o!==a)if(l0(o)&&l0(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)PL(e[s])&&r.push(s);r.length&&qL(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=yi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const u0=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ar.test(t)||t==="0")&&!t.startsWith("url("));function i3(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function o3(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=u0(s,e),a=u0(i,e);return!o||!a?!1:i3(t)||(n==="spring"||Rm(n))&&r}const a3=t=>t!==null;function Su(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(a3),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const l3=40;class xE{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=vn.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>l3?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&t3(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=vn.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!o3(e,r,s,i))if(o)this.options.duration=0;else{l&&l(Su(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Pe=(t,e,n)=>t+(e-t)*n;function bd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function c3({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=bd(l,a,t+1/3),i=bd(l,a,t),o=bd(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Ic(t,e){return n=>n>0?e:t}const Sd=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},u3=[hf,Yr,Fs],d3=t=>u3.find(e=>e.test(t));function d0(t){const e=d3(t);if(!e)return!1;let n=e.parse(t);return e===Fs&&(n=c3(n)),n}const h0=(t,e)=>{const n=d0(t),r=d0(e);if(!n||!r)return Ic(t,e);const s={...n};return i=>(s.red=Sd(n.red,r.red,i),s.green=Sd(n.green,r.green,i),s.blue=Sd(n.blue,r.blue,i),s.alpha=Pe(n.alpha,r.alpha,i),Yr.transform(s))},h3=(t,e)=>n=>e(t(n)),Ia=(...t)=>t.reduce(h3),_f=new Set(["none","hidden"]);function f3(t,e){return _f.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function p3(t,e){return n=>Pe(t,e,n)}function tg(t){return typeof t=="number"?p3:typeof t=="string"?zm(t)?Ic:at.test(t)?h0:y3:Array.isArray(t)?wE:typeof t=="object"?at.test(t)?h0:m3:Ic}function wE(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>tg(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function m3(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=tg(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function g3(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}const y3=(t,e)=>{const n=Ar.createTransformer(e),r=ia(t),s=ia(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?_f.has(t)&&!s.values.length||_f.has(e)&&!r.values.length?f3(t,e):Ia(wE(g3(r,s),s.values),n):Ic(t,e)};function bE(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Pe(t,e,n):tg(t)(t,e)}const v3=5;function SE(t,e,n){const r=Math.max(e-v3,0);return ES(n-t(r),e-r)}const je={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},f0=.001;function _3({duration:t=je.duration,bounce:e=je.bounce,velocity:n=je.velocity,mass:r=je.mass}){let s,i,o=1-e;o=Hn(je.minDamping,je.maxDamping,o),t=Hn(je.minDuration,je.maxDuration,yn(t)),o<1?(s=c=>{const u=c*o,h=u*t,f=u-n,p=xf(c,o),g=Math.exp(-h);return f0-f/p*g},i=c=>{const h=c*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-h),x=xf(Math.pow(c,2),o);return(-s(c)+f0>0?-1:1)*((f-p)*g)/x}):(s=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-.001+u*h},i=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=w3(s,i,a);if(t=gn(t),isNaN(l))return{stiffness:je.stiffness,damping:je.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const x3=12;function w3(t,e,n){let r=n;for(let s=1;s<x3;s++)r=r-t(r)/e(r);return r}function xf(t,e){return t*Math.sqrt(1-e*e)}const b3=["duration","bounce"],S3=["stiffness","damping","mass"];function p0(t,e){return e.some(n=>t[n]!==void 0)}function E3(t){let e={velocity:je.velocity,stiffness:je.stiffness,damping:je.damping,mass:je.mass,isResolvedFromDuration:!1,...t};if(!p0(t,S3)&&p0(t,b3))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Hn(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:je.mass,stiffness:s,damping:i}}else{const n=_3(t);e={...e,...n,mass:je.mass},e.isResolvedFromDuration=!0}return e}function Pc(t=je.visualDuration,e=je.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=E3({...n,velocity:-yn(n.velocity||0)}),g=f||0,x=c/(2*Math.sqrt(l*u)),w=o-i,m=yn(Math.sqrt(l/u)),y=Math.abs(w)<5;r||(r=y?je.restSpeed.granular:je.restSpeed.default),s||(s=y?je.restDelta.granular:je.restDelta.default);let v;if(x<1){const E=xf(m,x);v=C=>{const S=Math.exp(-x*m*C);return o-S*((g+x*m*w)/E*Math.sin(E*C)+w*Math.cos(E*C))}}else if(x===1)v=E=>o-Math.exp(-m*E)*(w+(g+m*w)*E);else{const E=m*Math.sqrt(x*x-1);v=C=>{const S=Math.exp(-x*m*C),k=Math.min(E*C,300);return o-S*((g+x*m*w)*Math.sinh(k)+E*w*Math.cosh(k))/E}}const b={calculatedDuration:p&&h||null,next:E=>{const C=v(E);if(p)a.done=E>=h;else{let S=0;x<1&&(S=E===0?gn(g):SE(v,E,C));const k=Math.abs(S)<=r,F=Math.abs(o-C)<=s;a.done=k&&F}return a.value=a.done?o:C,a},toString:()=>{const E=Math.min(jm(b),kc),C=CS(S=>b.next(E*S).value,E,30);return E+"ms "+C},toTransition:()=>{}};return b}Pc.applyToOptions=t=>{const e=bD(t,100,Pc);return t.ease=Zo()?e.ease:"easeOut",t.duration=gn(e.duration),t.type="keyframes",t};function m0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},p=k=>a!==void 0&&k<a||l!==void 0&&k>l,g=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let x=n*e;const w=h+x,m=o===void 0?w:o(w);m!==w&&(x=m-h);const y=k=>-x*Math.exp(-k/r),v=k=>m+y(k),b=k=>{const F=y(k),B=v(k);f.done=Math.abs(F)<=c,f.value=f.done?m:B};let E,C;const S=k=>{p(f.value)&&(E=k,C=Pc({keyframes:[f.value,g(f.value)],velocity:SE(v,k,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:k=>{let F=!1;return!C&&E===void 0&&(F=!0,b(k),S(k)),E!==void 0&&k>=E?C.next(k-E):(!F&&b(k),f)}}}const C3=Na(.42,0,1,1),T3=Na(0,0,.58,1),EE=Na(.42,0,.58,1),k3=t=>Array.isArray(t)&&typeof t[0]!="number",N3={linear:$t,easeIn:C3,easeInOut:EE,easeOut:T3,circIn:Xm,circInOut:sE,circOut:rE,backIn:Ym,backInOut:tE,backOut:eE,anticipate:nE},g0=t=>{if(Am(t)){SS(t.length===4);const[e,n,r,s]=t;return Na(e,n,r,s)}else if(typeof t=="string")return N3[t];return t};function I3(t,e,n){const r=[],s=n||bE,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||$t:e;a=Ia(l,a)}r.push(a)}return r}function P3(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(SS(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=I3(e,r,s),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=Jo(t[h],t[h+1],u);return a[h](f)};return n?u=>c(Hn(t[0],t[i-1],u)):c}function A3(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Jo(0,e,r);t.push(Pe(n,1,s))}}function R3(t){const e=[0];return A3(e,t.length-1),e}function O3(t,e){return t.map(n=>n*e)}function j3(t,e){return t.map(()=>e||EE).splice(0,t.length-1)}function Ac({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=k3(r)?r.map(g0):g0(r),i={done:!1,value:e[0]},o=O3(n&&n.length===e.length?n:R3(e),t),a=P3(o,e,{ease:Array.isArray(s)?s:j3(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const M3=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ce.update(e,!0),stop:()=>Pr(e),now:()=>Ze.isProcessing?Ze.timestamp:vn.now()}},D3={decay:m0,inertia:m0,tween:Ac,keyframes:Ac,spring:Pc},L3=t=>t/100;class ng extends xE{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||eg,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=Rm(n)?n:D3[n]||Ac;let l,c;a!==Ac&&typeof e[0]!="number"&&(l=Ia(L3,bE(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=jm(u));const{calculatedDuration:h}=u,f=h+s,p=f*(r+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return i.next(0);const{delay:f,repeat:p,repeatType:g,repeatDelay:x,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const m=this.currentTime-f*(this.speed>=0?1:-1),y=this.speed>=0?m<0:m>u;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let v=this.currentTime,b=i;if(p){const k=Math.min(this.currentTime,u)/h;let F=Math.floor(k),B=k%1;!B&&k>=1&&(B=1),B===1&&F--,F=Math.min(F,p+1),!!(F%2)&&(g==="reverse"?(B=1-B,x&&(B-=x/h)):g==="mirror"&&(b=o)),v=Hn(0,1,B)*h}const E=y?{done:!1,value:l[0]}:b.next(v);a&&(E.value=a(E.value));let{done:C}=E;!y&&c!==null&&(C=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return S&&s!==void 0&&(E.value=Su(l,this.options,s)),w&&w(E.value),S&&this.finish(),E}get duration(){const{resolved:e}=this;return e?yn(e.calculatedDuration):0}get time(){return yn(this.currentTime)}set time(e){e=gn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=yn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=M3,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const F3=new Set(["opacity","clipPath","filter","transform"]),B3=Im(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Rc=10,V3=2e4;function z3(t){return Rm(t.type)||t.type==="spring"||!kS(t.ease)}function U3(t,e){const n=new ng({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<V3;)r=n.sample(i),s.push(r.value),i+=Rc;return{times:void 0,keyframes:s,duration:i-Rc,ease:"linear"}}const CE={anticipate:nE,backInOut:tE,circInOut:sE};function $3(t){return t in CE}class y0 extends xE{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new _E(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&Zo()&&$3(i)&&(i=CE[i]),z3(this.options)){const{onComplete:h,onUpdate:f,motionValue:p,element:g,...x}=this.options,w=U3(e,x);e=w.keyframes,e.length===1&&(e[1]=e[0]),r=w.duration,s=w.times,i=w.ease,o="keyframes"}const u=wD(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(Hv(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(Su(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return yn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return yn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=gn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return $t;const{animation:r}=n;Hv(r,e)}return $t}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:f,...p}=this.options,g=new ng({...p,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),x=gn(this.time);c.setWithVelocity(g.sample(x-Rc).value,g.sample(x).value,Rc)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return B3()&&r&&F3.has(r)&&(r!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const W3={type:"spring",stiffness:500,damping:25,restSpeed:10},H3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Q3={type:"keyframes",duration:.8},q3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},G3=(t,{keyframes:e})=>e.length>2?Q3:xs.has(t)?t.startsWith("scale")?H3(e[1]):W3:q3;function K3({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const rg=(t,e,n,r={},s,i)=>o=>{const a=Om(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-gn(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};K3(a)||(u={...u,...G3(t,u)}),u.duration&&(u.duration=gn(u.duration)),u.repeatDelay&&(u.repeatDelay=gn(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),u.allowFlatten=!a.type&&!a.ease,h&&!i&&e.get()!==void 0){const f=Su(u.keyframes,a);if(f!==void 0)return Ce.update(()=>{u.onUpdate(f),u.onComplete()}),new vD([])}return!i&&y0.supports(u)?new y0(u):new ng(u)};function Y3({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function TE(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const l=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const u in a){const h=t.getValue(u,t.latestValues[u]??null),f=a[u];if(f===void 0||c&&Y3(c,u))continue;const p={delay:n,...Om(i||{},u)};let g=!1;if(window.MotionHandoffAnimation){const w=YS(t);if(w){const m=window.MotionHandoffAnimation(w,u,Ce);m!==null&&(p.startTime=m,g=!0)}}df(t,u),h.start(rg(u,h,f,t.shouldReduceMotion&&KS.has(u)?{type:!1}:p,t,g));const x=h.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{Ce.update(()=>{o&&CL(t,o)})}),l}function wf(t,e,n={}){var l;const r=sa(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(TE(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return X3(t,e,u+c,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function X3(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(J3).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(wf(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function J3(t,e){return t.sortNodePosition(e)}function Z3(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>wf(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=wf(t,e,n);else{const s=typeof e=="function"?sa(t,e,n.custom):e;r=Promise.all(TE(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function kE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const e4=Fm.length;function NE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?NE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<e4;n++){const r=Fm[n],s=t.props[r];(ta(s)||s===!1)&&(e[r]=s)}return e}const t4=[...Lm].reverse(),n4=Lm.length;function r4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Z3(t,n,r)))}function s4(t){let e=r4(t),n=v0(),r=!0;const s=l=>(c,u)=>{var f;const h=sa(t,u,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:g,...x}=h;c={...c,...x,...g}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,u=NE(t.parent)||{},h=[],f=new Set;let p={},g=1/0;for(let w=0;w<n4;w++){const m=t4[w],y=n[m],v=c[m]!==void 0?c[m]:u[m],b=ta(v),E=m===l?y.isActive:null;E===!1&&(g=w);let C=v===u[m]&&v!==c[m]&&b;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),y.protectedKeys={...p},!y.isActive&&E===null||!v&&!y.prevProp||wu(v)||typeof v=="boolean")continue;const S=i4(y.prevProp,v);let k=S||m===l&&y.isActive&&!C&&b||w>g&&b,F=!1;const B=Array.isArray(v)?v:[v];let q=B.reduce(s(m),{});E===!1&&(q={});const{prevResolvedValues:ye={}}=y,ve={...ye,...q},Oe=Y=>{k=!0,f.has(Y)&&(F=!0,f.delete(Y)),y.needsAnimating[Y]=!0;const P=t.getValue(Y);P&&(P.liveStyle=!1)};for(const Y in ve){const P=q[Y],T=ye[Y];if(p.hasOwnProperty(Y))continue;let R=!1;uf(P)&&uf(T)?R=!kE(P,T):R=P!==T,R?P!=null?Oe(Y):f.add(Y):P!==void 0&&f.has(Y)?Oe(Y):y.protectedKeys[Y]=!0}y.prevProp=v,y.prevResolvedValues=q,y.isActive&&(p={...p,...q}),r&&t.blockInitialAnimation&&(k=!1),k&&(!(C&&S)||F)&&h.push(...B.map(Y=>({animation:Y,options:{type:m}})))}if(f.size){const w={};if(typeof c.initial!="boolean"){const m=sa(t,Array.isArray(c.initial)?c.initial[0]:c.initial);m&&m.transition&&(w.transition=m.transition)}f.forEach(m=>{const y=t.getBaseTarget(m),v=t.getValue(m);v&&(v.liveStyle=!0),w[m]=y??null}),h.push({animation:w})}let x=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=v0(),r=!0}}}function i4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!kE(e,t):!1}function Br(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function v0(){return{animate:Br(!0),whileInView:Br(),whileHover:Br(),whileTap:Br(),whileDrag:Br(),whileFocus:Br(),exit:Br()}}class Lr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class o4 extends Lr{constructor(e){super(e),e.animationState||(e.animationState=s4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let a4=0;class l4 extends Lr{constructor(){super(...arguments),this.id=a4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const c4={animation:{Feature:o4},exit:{Feature:l4}};function oa(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Pa(t){return{point:{x:t.pageX,y:t.pageY}}}const u4=t=>e=>Dm(e)&&t(e,Pa(e));function xo(t,e,n,r){return oa(t,e,u4(n),r)}function IE({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function d4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function h4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const PE=1e-4,f4=1-PE,p4=1+PE,AE=.01,m4=0-AE,g4=0+AE;function ft(t){return t.max-t.min}function y4(t,e,n){return Math.abs(t-e)<=n}function _0(t,e,n,r=.5){t.origin=r,t.originPoint=Pe(e.min,e.max,t.origin),t.scale=ft(n)/ft(e),t.translate=Pe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=f4&&t.scale<=p4||isNaN(t.scale))&&(t.scale=1),(t.translate>=m4&&t.translate<=g4||isNaN(t.translate))&&(t.translate=0)}function wo(t,e,n,r){_0(t.x,e.x,n.x,r?r.originX:void 0),_0(t.y,e.y,n.y,r?r.originY:void 0)}function x0(t,e,n){t.min=n.min+e.min,t.max=t.min+ft(e)}function v4(t,e,n){x0(t.x,e.x,n.x),x0(t.y,e.y,n.y)}function w0(t,e,n){t.min=e.min-n.min,t.max=t.min+ft(e)}function bo(t,e,n){w0(t.x,e.x,n.x),w0(t.y,e.y,n.y)}const b0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bs=()=>({x:b0(),y:b0()}),S0=()=>({min:0,max:0}),Fe=()=>({x:S0(),y:S0()});function Mt(t){return[t("x"),t("y")]}function Ed(t){return t===void 0||t===1}function bf({scale:t,scaleX:e,scaleY:n}){return!Ed(t)||!Ed(e)||!Ed(n)}function Hr(t){return bf(t)||RE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function RE(t){return E0(t.x)||E0(t.y)}function E0(t){return t&&t!=="0%"}function Oc(t,e,n){const r=t-n,s=e*r;return n+s}function C0(t,e,n,r,s){return s!==void 0&&(t=Oc(t,s,r)),Oc(t,n,r)+e}function Sf(t,e=0,n=1,r,s){t.min=C0(t.min,e,n,r,s),t.max=C0(t.max,e,n,r,s)}function OE(t,{x:e,y:n}){Sf(t.x,e.translate,e.scale,e.originPoint),Sf(t.y,n.translate,n.scale,n.originPoint)}const T0=.999999999999,k0=1.0000000000001;function _4(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&zs(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,OE(t,o)),r&&Hr(i.latestValues)&&zs(t,i.latestValues))}e.x<k0&&e.x>T0&&(e.x=1),e.y<k0&&e.y>T0&&(e.y=1)}function Vs(t,e){t.min=t.min+e,t.max=t.max+e}function N0(t,e,n,r,s=.5){const i=Pe(t.min,t.max,s);Sf(t,e,n,i,r)}function zs(t,e){N0(t.x,e.x,e.scaleX,e.scale,e.originX),N0(t.y,e.y,e.scaleY,e.scale,e.originY)}function jE(t,e){return IE(h4(t.getBoundingClientRect(),e))}function x4(t,e,n){const r=jE(t,n),{scroll:s}=e;return s&&(Vs(r.x,s.offset.x),Vs(r.y,s.offset.y)),r}const ME=({current:t})=>t?t.ownerDocument.defaultView:null,I0=(t,e)=>Math.abs(t-e);function w4(t,e){const n=I0(t.x,e.x),r=I0(t.y,e.y);return Math.sqrt(n**2+r**2)}class DE{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Td(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=w4(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=h,{timestamp:x}=Ze;this.history.push({...g,timestamp:x});const{onStart:w,onMove:m}=this.handlers;f||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Cd(f,this.transformPagePoint),Ce.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Td(h.type==="pointercancel"?this.lastMoveEventInfo:Cd(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,w),g&&g(h,w)},!Dm(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Pa(e),a=Cd(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ze;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Td(a,this.history)),this.removeListeners=Ia(xo(this.contextWindow,"pointermove",this.handlePointerMove),xo(this.contextWindow,"pointerup",this.handlePointerUp),xo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Pr(this.updatePoint)}}function Cd(t,e){return e?{point:e(t.point)}:t}function P0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Td({point:t},e){return{point:t,delta:P0(t,LE(e)),offset:P0(t,b4(e)),velocity:S4(e,.1)}}function b4(t){return t[0]}function LE(t){return t[t.length-1]}function S4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=LE(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>gn(e)));)n--;if(!r)return{x:0,y:0};const i=yn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function E4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Pe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Pe(n,t,r.max):Math.min(t,n)),t}function A0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function C4(t,{top:e,left:n,bottom:r,right:s}){return{x:A0(t.x,n,s),y:A0(t.y,e,r)}}function R0(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function T4(t,e){return{x:R0(t.x,e.x),y:R0(t.y,e.y)}}function k4(t,e){let n=.5;const r=ft(t),s=ft(e);return s>r?n=Jo(e.min,e.max-r,t.min):r>s&&(n=Jo(t.min,t.max-s,e.min)),Hn(0,1,n)}function N4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ef=.35;function I4(t=Ef){return t===!1?t=0:t===!0&&(t=Ef),{x:O0(t,"left","right"),y:O0(t,"top","bottom")}}function O0(t,e,n){return{min:j0(t,e),max:j0(t,n)}}function j0(t,e){return typeof t=="number"?t:t[e]||0}const P4=new WeakMap;class A4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fe(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Pa(u).point)},i=(u,h)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TD(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mt(w=>{let m=this.getAxisMotionValue(w).get()||0;if(_n.test(m)){const{projection:y}=this.visualElement;if(y&&y.layout){const v=y.layout.layoutBox[w];v&&(m=ft(v)*(parseFloat(m)/100))}}this.originPoint[w]=m}),g&&Ce.postRender(()=>g(u,h)),df(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:x}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:w}=h;if(p&&this.currentDirection===null){this.currentDirection=R4(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),x&&x(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Mt(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new DE(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ME(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ce.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!sl(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=E4(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Ls(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=C4(r.layoutBox,e):this.constraints=!1,this.elastic=I4(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Mt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=N4(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ls(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=x4(r,s.root,this.visualElement.getTransformPagePoint());let o=T4(s.layout.layoutBox,i);if(n){const a=n(d4(o));this.hasMutatedConstraints=!!a,a&&(o=IE(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Mt(u=>{if(!sl(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return df(this.visualElement,e),r.start(rg(e,r,0,n,this.visualElement,!1))}stopAnimation(){Mt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Mt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Mt(n=>{const{drag:r}=this.getProps();if(!sl(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Pe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ls(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Mt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=k4({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Mt(o=>{if(!sl(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Pe(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;P4.set(this.visualElement,this);const e=this.visualElement.current,n=xo(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ls(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ce.read(r);const o=oa(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Mt(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Ef,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function sl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function R4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class O4 extends Lr{constructor(e){super(e),this.removeGroupControls=$t,this.removeListeners=$t,this.controls=new A4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$t}unmount(){this.removeGroupControls(),this.removeListeners()}}const M0=t=>(e,n)=>{t&&Ce.postRender(()=>t(e,n))};class j4 extends Lr{constructor(){super(...arguments),this.removePointerDownListener=$t}onPointerDown(e){this.session=new DE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ME(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:M0(e),onStart:M0(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Ce.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=xo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Al={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function D0(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qi={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if($.test(t))t=parseFloat(t);else return t;const n=D0(t,e.target.x),r=D0(t,e.target.y);return`${n}% ${r}%`}},M4={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ar.parse(t);if(s.length>5)return r;const i=Ar.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Pe(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class D4 extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;ZD(L4),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Al.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Mm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FE(t){const[e,n]=bS(),r=_.useContext(Sm);return d.jsx(D4,{...t,layoutGroup:r,switchLayoutGroup:_.useContext(DS),isPresent:e,safeToRemove:n})}const L4={borderRadius:{...qi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qi,borderTopRightRadius:qi,borderBottomLeftRadius:qi,borderBottomRightRadius:qi,boxShadow:M4};function F4(t,e,n){const r=ct(t)?t:ea(t);return r.start(rg("",r,e,n)),r.animation}function B4(t){return t instanceof SVGElement&&t.tagName!=="svg"}const V4=(t,e)=>t.depth-e.depth;class z4{constructor(){this.children=[],this.isDirty=!1}add(e){km(this.children,e),this.isDirty=!0}remove(e){Nm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(V4),this.isDirty=!1,this.children.forEach(e)}}function U4(t,e){const n=vn.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Pr(r),t(i-e))};return Ce.read(r,!0),()=>Pr(r)}const BE=["TopLeft","TopRight","BottomLeft","BottomRight"],$4=BE.length,L0=t=>typeof t=="string"?parseFloat(t):t,F0=t=>typeof t=="number"||$.test(t);function W4(t,e,n,r,s,i){s?(t.opacity=Pe(0,n.opacity??1,H4(r)),t.opacityExit=Pe(e.opacity??1,0,Q4(r))):i&&(t.opacity=Pe(e.opacity??1,n.opacity??1,r));for(let o=0;o<$4;o++){const a=`border${BE[o]}Radius`;let l=B0(e,a),c=B0(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||F0(l)===F0(c)?(t[a]=Math.max(Pe(L0(l),L0(c),r),0),(_n.test(c)||_n.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Pe(e.rotate||0,n.rotate||0,r))}function B0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const H4=VE(0,.5,rE),Q4=VE(.5,.95,$t);function VE(t,e,n){return r=>r<t?0:r>e?1:n(Jo(t,e,r))}function V0(t,e){t.min=e.min,t.max=e.max}function jt(t,e){V0(t.x,e.x),V0(t.y,e.y)}function z0(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function U0(t,e,n,r,s){return t-=e,t=Oc(t,1/n,r),s!==void 0&&(t=Oc(t,1/s,r)),t}function q4(t,e=0,n=1,r=.5,s,i=t,o=t){if(_n.test(e)&&(e=parseFloat(e),e=Pe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Pe(i.min,i.max,r);t===i&&(a-=e),t.min=U0(t.min,e,n,a,s),t.max=U0(t.max,e,n,a,s)}function $0(t,e,[n,r,s],i,o){q4(t,e[n],e[r],e[s],e.scale,i,o)}const G4=["x","scaleX","originX"],K4=["y","scaleY","originY"];function W0(t,e,n,r){$0(t.x,e,G4,n?n.x:void 0,r?r.x:void 0),$0(t.y,e,K4,n?n.y:void 0,r?r.y:void 0)}function H0(t){return t.translate===0&&t.scale===1}function zE(t){return H0(t.x)&&H0(t.y)}function Q0(t,e){return t.min===e.min&&t.max===e.max}function Y4(t,e){return Q0(t.x,e.x)&&Q0(t.y,e.y)}function q0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function UE(t,e){return q0(t.x,e.x)&&q0(t.y,e.y)}function G0(t){return ft(t.x)/ft(t.y)}function K0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class X4{constructor(){this.members=[]}add(e){km(this.members,e),e.scheduleRender()}remove(e){if(Nm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function J4(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:p,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const kd=["","X","Y","Z"],Z4={visibility:"hidden"},Y0=1e3;let e6=0;function Nd(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function $E(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=YS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ce,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&$E(r)}function WE({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=e6++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(r6),this.nodes.forEach(l6),this.nodes.forEach(c6),this.nodes.forEach(s6)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new z4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Pm),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=B4(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=U4(f,250),Al.hasAnimatedSinceResize&&(Al.hasAnimatedSinceResize=!1,this.nodes.forEach(J0))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||p6,{onLayoutAnimationStart:w,onLayoutAnimationComplete:m}=u.getProps(),y=!this.targetLayout||!UE(this.targetLayout,g),v=!f&&p;if(this.options.layoutRoot||this.resumeFrom||v||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const b={...Om(x,"layout"),onPlay:w,onComplete:m};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||J0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(u6),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$E(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(X0);return}this.isUpdating||this.nodes.forEach(o6),this.isUpdating=!1,this.nodes.forEach(a6),this.nodes.forEach(t6),this.nodes.forEach(n6),this.clearAllSnapshots();const a=vn.now();Ze.delta=Hn(0,1e3/60,a-Ze.timestamp),Ze.timestamp=a,Ze.isProcessing=!0,_d.update.process(Ze),_d.preRender.process(Ze),_d.render.process(Ze),Ze.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Mm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(i6),this.sharedNodes.forEach(d6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ft(this.snapshot.measuredBox.x)&&!ft(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Fe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!zE(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Hr(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),m6(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Fe();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(g6))){const{scroll:u}=this.root;u&&(Vs(a.x,u.offset.x),Vs(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=Fe();if(jt(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&jt(a,o),Vs(a.x,h.offset.x),Vs(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Fe();jt(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&zs(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Hr(u.latestValues)&&zs(l,u.latestValues)}return Hr(this.latestValues)&&zs(l,this.latestValues),l}removeTransform(o){const a=Fe();jt(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Hr(c.latestValues))continue;bf(c.latestValues)&&c.updateSnapshot();const u=Fe(),h=c.measurePageBox();jt(u,h),W0(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Hr(this.latestValues)&&W0(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ze.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=Ze.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fe(),this.relativeTargetOrigin=Fe(),bo(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Fe(),this.targetWithTransforms=Fe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),v4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jt(this.target,this.layout.layoutBox),OE(this.target,this.targetDelta)):jt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fe(),this.relativeTargetOrigin=Fe(),bo(this.relativeTargetOrigin,this.target,p.target),jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||bf(this.parent.latestValues)||RE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ze.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;jt(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;_4(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Fe());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(z0(this.prevProjectionDelta.x,this.projectionDelta.x),z0(this.prevProjectionDelta.y,this.projectionDelta.y)),wo(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!K0(this.projectionDelta.x,this.prevProjectionDelta.x)||!K0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bs(),this.projectionDelta=Bs(),this.projectionDeltaWithTransform=Bs()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Bs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Fe(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,x=p!==g,w=this.getStack(),m=!w||w.members.length<=1,y=!!(x&&!m&&this.options.crossfade===!0&&!this.path.some(f6));this.animationProgress=0;let v;this.mixTargetDelta=b=>{const E=b/1e3;Z0(h.x,o.x,E),Z0(h.y,o.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bo(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h6(this.relativeTarget,this.relativeTargetOrigin,f,E),v&&Y4(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Fe()),jt(v,this.relativeTarget)),x&&(this.animationValues=u,W4(u,c,this.latestValues,E,y,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ce.update(()=>{Al.hasAnimatedSinceResize=!0,this.currentAnimation=F4(0,Y0,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Y0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&HE(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Fe();const h=ft(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=ft(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}jt(a,l),zs(a,u),wo(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new X4),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Nd("z",o,c,this.animationValues);for(let u=0;u<kd.length;u++)Nd(`rotate${kd[u]}`,o,c,this.animationValues),Nd(`skew${kd[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Z4;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=Pl(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Pl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Hr(this.latestValues)&&(p.transform=l?l({},""):"none",this.hasProjected=!1),p}const u=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=J4(this.projectionDeltaWithTransform,this.treeScale,u),l&&(a.transform=l(u,a.transform));const{x:h,y:f}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,c.animationValues?a.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const p in na){if(u[p]===void 0)continue;const{correct:g,applyTo:x,isCSSVariable:w}=na[p],m=a.transform==="none"?u[p]:g(u[p],c);if(x){const y=x.length;for(let v=0;v<y;v++)a[x[v]]=m}else w?this.options.visualElement.renderState.vars[p]=m:a[p]=m}return this.options.layoutId&&(a.pointerEvents=c===this?Pl(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(X0),this.root.sharedNodes.clear()}}}function t6(t){t.updateLayout()}function n6(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Mt(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=ft(f);f.min=r[h].min,f.max=f.min+p}):HE(i,e.layoutBox,r)&&Mt(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=ft(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=Bs();wo(a,r,e.layoutBox);const l=Bs();o?wo(l,t.applyTransform(s,!0),e.measuredBox):wo(l,r,e.layoutBox);const c=!zE(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const g=Fe();bo(g,e.layoutBox,f.layoutBox);const x=Fe();bo(x,r,p.layoutBox),UE(g,x)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function r6(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function s6(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function i6(t){t.clearSnapshot()}function X0(t){t.clearMeasurements()}function o6(t){t.isLayoutDirty=!1}function a6(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function J0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function l6(t){t.resolveTargetDelta()}function c6(t){t.calcProjection()}function u6(t){t.resetSkewAndRotation()}function d6(t){t.removeLeadSnapshot()}function Z0(t,e,n){t.translate=Pe(e.translate,0,n),t.scale=Pe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function e_(t,e,n,r){t.min=Pe(e.min,n.min,r),t.max=Pe(e.max,n.max,r)}function h6(t,e,n,r){e_(t.x,e.x,n.x,r),e_(t.y,e.y,n.y,r)}function f6(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const p6={duration:.45,ease:[.4,0,.1,1]},t_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),n_=t_("applewebkit/")&&!t_("chrome/")?Math.round:$t;function r_(t){t.min=n_(t.min),t.max=n_(t.max)}function m6(t){r_(t.x),r_(t.y)}function HE(t,e,n){return t==="position"||t==="preserve-aspect"&&!y4(G0(e),G0(n),.2)}function g6(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const y6=WE({attachResizeListener:(t,e)=>oa(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Id={current:void 0},QE=WE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Id.current){const t=new y6({});t.mount(window),t.setOptions({layoutScroll:!0}),Id.current=t}return Id.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),v6={pan:{Feature:j4},drag:{Feature:O4,ProjectionNode:QE,MeasureLayout:FE}};function s_(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Ce.postRender(()=>i(e,Pa(e)))}class _6 extends Lr{mount(){const{current:e}=this.node;e&&(this.unmount=ND(e,(n,r)=>(s_(this.node,r,"Start"),s=>s_(this.node,s,"End"))))}unmount(){}}class x6 extends Lr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ia(oa(this.node.current,"focus",()=>this.onFocus()),oa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function i_(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Ce.postRender(()=>i(e,Pa(e)))}class w6 extends Lr{mount(){const{current:e}=this.node;e&&(this.unmount=RD(e,(n,r)=>(i_(this.node,r,"Start"),(s,{success:i})=>i_(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Cf=new WeakMap,Pd=new WeakMap,b6=t=>{const e=Cf.get(t.target);e&&e(t)},S6=t=>{t.forEach(b6)};function E6({root:t,...e}){const n=t||document;Pd.has(n)||Pd.set(n,{});const r=Pd.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(S6,{root:t,...e})),r[s]}function C6(t,e,n){const r=E6(e);return Cf.set(t,n),r.observe(t),()=>{Cf.delete(t),r.unobserve(t)}}const T6={some:0,all:1};class k6 extends Lr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:T6[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return C6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(N6(e,n))&&this.startObserver()}unmount(){}}function N6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const I6={inView:{Feature:k6},tap:{Feature:w6},focus:{Feature:x6},hover:{Feature:_6}},P6={layout:{ProjectionNode:QE,MeasureLayout:FE}},Tf={current:null},qE={current:!1};function A6(){if(qE.current=!0,!!Cm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Tf.current=t.matches;t.addListener(e),e()}else Tf.current=!1}const R6=[...vE,at,Ar],O6=t=>R6.find(yE(t)),j6=new WeakMap;function M6(t,e,n){for(const r in e){const s=e[r],i=n[r];if(ct(s))t.addValue(r,s);else if(ct(i))t.addValue(r,ea(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,ea(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const o_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class D6{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=vn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ce.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=bu(n),this.isVariantNode=jS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const g=f[p];l[p]!==void 0&&ct(g)&&g.set(l[p],!1)}}mount(e){this.current=e,j6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),qE.current||A6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Pr(this.notifyUpdate),Pr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=xs.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ce.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gi){const n=gi[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<o_.length;r++){const s=o_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=M6(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ea(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(mE(r)||iE(r))?r=parseFloat(r):!O6(r)&&Ar.test(n)&&(r=hE(e,n)),this.setBaseTarget(e,ct(r)?r.get():r)),ct(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Gm(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ct(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Pm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class GE extends D6{constructor(){super(...arguments),this.KeyframeResolver=_E}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ct(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function L6(t){return window.getComputedStyle(t)}class F6 extends GE{constructor(){super(...arguments),this.type="html",this.renderInstance=HS}readValueFromInstance(e,n){if(xs.has(n))return YL(e,n);{const r=L6(e),s=(Vm(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return jE(e,n)}build(e,n,r){$m(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Km(e,n,r)}}class B6 extends GE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Fe,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&WS(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(xs.has(n)){const r=dE(n);return r&&r.default||0}return n=QS.has(n)?n:Bm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return GS(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&Ce.postRender(this.updateDimensions)}build(e,n,r){Qm(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){qS(e,n,r,s)}mount(e){this.isSVGTag=qm(e.tagName),super.mount(e)}}const V6=(t,e)=>Hm(t)?new B6(e):new F6(e,{allowProjection:t!==_.Fragment}),z6=SL({...c4,...I6,...v6,...P6},V6),Kn=BD(z6),U6=t=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),$6=t=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),W6=t=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})}),a_={easy:{color:"bg-green-500",label:"Easy",icon:"⭐"},intermediate:{color:"bg-blue-500",label:"Intermediate",icon:"⭐⭐"},hard:{color:"bg-orange-500",label:"Hard",icon:"⭐⭐⭐"},difficult:{color:"bg-red-500",label:"Difficult",icon:"⭐⭐⭐⭐"},"tie-breaker":{color:"bg-purple-500",label:"Tie Breaker",icon:"🏆"}};function H6({question:t,quizId:e,participantId:n,isHost:r}){const[s,i]=_.useState((t==null?void 0:t.timer)||30),[o,a]=_.useState(null),[l,c]=_.useState(null),[u,h]=_.useState(!1),[f,p]=_.useState(!1),[g,x]=_.useState(null),[w,m]=_.useState(!1),[y,v]=_.useState({show:!1,score:0}),[b,E]=_.useState(!1),C=_.useRef(null),S=_.useRef(null);_.useRef(null);const k=_.useRef(null),F=_.useRef(null),B=_.useRef(null),q=u?l:o;_.useEffect(()=>{const P=async()=>{if(!(r||!n||!t))try{const T=re(se,`quizzes/${e}/answers/${t.id}/${n}`),R=await It(T);if(R.exists()){const D=R.val();c(D.answer),h(!0),t.showCorrectAnswer&&p(!0)}}catch(T){console.error("Error checking existing answer:",T)}};return a(null),c(null),h(!1),p(!1),i((t==null?void 0:t.timer)||30),m(!1),v({show:!1,score:0}),C.current&&clearTimeout(C.current),S.current&&clearInterval(S.current),P(),()=>{k.current&&(Zi(k.current),k.current=null),F.current&&(Zi(F.current),F.current=null),B.current&&(Zi(B.current),B.current=null),C.current&&clearTimeout(C.current),S.current&&clearInterval(S.current)}},[e,t,n,r]),_.useEffect(()=>{if(!e||!t||!t.id)return;const P=async()=>{try{const D=re(se,".info/serverTimeOffset");tt(D,V=>{const X=V.val()||0,le=Date.now()+X;x(le),T()}),B.current=D}catch(D){console.error("Error syncing server time:",D),T()}},T=()=>{if(r||!t)return;let D=t.timer;if(t.startedAt){const V=Math.floor((Date.now()-t.startedAt)/1e3);D=Math.max(0,t.timer-V)}if(i(D),D<=0){m(!0);return}S.current=setInterval(()=>{i(V=>{const X=V-1;return X<=0?(clearInterval(S.current),m(!0),0):X})},1e3)};P();const R=re(se,`quizzes/${e}/questions/${t.id}/showCorrectAnswer`);return k.current=R,tt(R,D=>{D.exists()&&D.val()===!0&&p(!0)}),()=>{C.current&&clearTimeout(C.current),S.current&&clearInterval(S.current)}},[e,t,r]),_.useEffect(()=>{if(r||!n||!t||!t.id)return;const P=re(se,`quizzes/${e}/answers/${t.id}/${n}`);F.current=P;const T=tt(P,R=>{if(R.exists()){const D=R.val();c(D.answer),h(!0)}});return()=>{Zi(P,T)}},[e,t,n,r]);const ye=P=>{t.type==="multiple-choice"?(a(P),ve(P)):a(P)},ve=async(P=null)=>{if(u||s===0||w)return;m(!0);const T=t.type==="multiple-choice"?P!==null?P:q:o.trim();let R=T;if(t.type==="multiple-choice"){const de={A:0,B:1,C:2,D:3};R=de[T]!==void 0?de[T]:T}const D=Date.now(),V=g?D-g:0,X=Date.now()-V;let le=!1;if(t.type==="multiple-choice")if(Array.isArray(t.correctAnswers)&&t.correctAnswers.length>0){const de={A:0,B:1,C:2,D:3},U={0:"A",1:"B",2:"C",3:"D"};le=t.correctAnswers.map(I=>typeof I=="number"?U[I]:(de[I]!==void 0,I)).includes(T)}else t.correctAnswer!==void 0&&(typeof t.correctAnswer=="number"?le=R===t.correctAnswer:le=T===t.correctAnswer);else{const de=t.correctAnswer?t.correctAnswer.toLowerCase().trim():"";le=T.toLowerCase().trim()===de}let ue=0;le&&(t.difficulty==="tie-breaker"?ue=t.points||500:ue=t.points||1e3);try{const de=re(se,`quizzes/${e}/answers/${t.id}/${n}`);if(await yo(de,{answer:R,isCorrect:le,score:ue,submittedAt:X}),le&&ue>0){const U=re(se,`quizzes/${e}/participants/${n}`),N=await It(U);if(N.exists()){const A=(N.val().score||0)+ue;await yo(U,{score:A,lastUpdated:X})}}h(!0),c(T),le&&ue>0&&(v({show:!0,score:ue}),setTimeout(()=>{v({show:!1,score:0})},2e3)),me.success(t.type==="multiple-choice"?"Answer auto-submitted!":"Answer submitted successfully!",{duration:2e3,icon:"🚀",style:{borderRadius:"10px",background:"#333",color:"#fff"}}),t.showCorrectAnswer&&p(!0)}catch(de){console.error("Error submitting answer:",de),me.error("Failed to submit answer. Please try again."),m(!1)}},Oe=P=>{u||s===0||w||a(P.target.value)},H=P=>{P.key==="Enter"&&o&&!u&&s>0&&!w&&ve(o)};if(!t)return d.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center animate-pulse",children:[d.jsx("div",{className:"w-12 h-12 mx-auto mb-4 rounded-full bg-gray-300"}),d.jsx("div",{className:"h-4 w-3/4 mx-auto mb-2 rounded bg-gray-300"}),d.jsx("div",{className:"h-4 w-1/2 mx-auto rounded bg-gray-300"})]});const ae=t.difficulty||"intermediate",Y=a_[ae]||a_.intermediate;return d.jsxs("div",{className:"p-6 relative",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gray-200",children:d.jsx(Kn.div,{className:`h-full ${s<10?"bg-red-500":"bg-primary"}`,initial:{width:"100%"},animate:{width:`${s/t.timer*100}%`},transition:{duration:1,ease:"linear"}})}),d.jsxs("div",{className:"flex justify-between items-center mb-6 mt-2",children:[d.jsxs("div",{className:"relative",onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:[d.jsxs("div",{className:`px-3 py-1.5 rounded-full ${Y.color||"bg-gray-500"} text-white flex items-center gap-2`,children:[d.jsx("span",{className:"text-xs font-bold",children:Y.label||"Standard"}),d.jsx("span",{children:Y.icon||"⭐"})]}),d.jsx($v,{children:b&&d.jsxs(Kn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-full left-0 mt-2 bg-white p-3 rounded-lg shadow-lg z-10 w-64",children:[d.jsxs("p",{className:"text-sm font-semibold mb-1",children:[Y.label||"Standard"," Difficulty"]}),t.difficulty==="tie-breaker"?d.jsx("p",{className:"text-xs text-gray-600",children:"Tie-breaker: First correct answer gets full points. Each subsequent correct answer gets 5 fewer points."}):d.jsxs("p",{className:"text-xs text-gray-600",children:["Correct answer: ",t.points," points. Incorrect: 0 points."]})]})})]}),d.jsxs(Kn.div,{animate:{scale:s<10?[1,1.1,1]:1},transition:{duration:.5,repeat:s<10?1/0:0},className:`px-4 py-2 rounded-full ${s<10?"bg-red-500":"bg-primary"} text-white flex items-center gap-2`,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),d.jsx("span",{className:"font-bold",children:s})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h2",{className:"text-2xl font-bold mb-2",children:t.title}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.type==="multiple-choice"?"bg-primary/10 text-primary":"bg-amber-100 text-amber-800"}`,children:t.type==="multiple-choice"?"Multiple Choice":"Fill in the blank"}),t.type==="multiple-choice"&&d.jsxs(Kn.div,{initial:{scale:1},animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"ml-2 px-3 py-1 rounded-full bg-gradient-to-r from-blue-500 to-primary text-white text-sm flex items-center shadow-md",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Auto-submit on click"]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold mb-2",children:t.text}),d.jsxs("div",{className:"text-gray-500 flex items-center",children:[d.jsxs("span",{className:"font-medium",children:[t.points," points"]}),t.difficulty==="tie-breaker"&&d.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full",children:"Tie-breaker"})]})]}),t.type==="multiple-choice"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:["A","B","C","D"].map((P,T)=>{if(!t.options||!t.options[T])return null;const R=o===P,D=l===P,V={0:"A",1:"B",2:"C",3:"D"};let X=!1;if(Array.isArray(t.correctAnswers)&&t.correctAnswers.length>0)X=t.correctAnswers.map(U=>typeof U=="number"?V[U]:U).includes(P);else if(t.correctAnswer!==void 0){const de=typeof t.correctAnswer=="number"?V[t.correctAnswer]:t.correctAnswer;X=P===de}const le=l===P&&!X,ue=f&&X;return d.jsxs(Kn.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:T*.1},className:`relative flex items-center p-4 border-2 rounded-lg shadow-sm transition-all duration-300 ${R||D?"border-primary":"border-gray-200"} ${l?"cursor-default":"cursor-pointer hover:border-primary hover:shadow-md"} ${ue?"bg-green-50 border-green-500":le?"bg-red-50 border-red-500":"bg-white"}`,onClick:()=>{!l&&!w&&ye(P)},whileTap:{scale:.98},whileHover:{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},disabled:l||w,children:[d.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full mr-4 ${R||D?"bg-primary text-white":"bg-gray-100 text-gray-700"} ${ue?"bg-green-500 text-white":le?"bg-red-500 text-white":""}`,children:P}),d.jsx("div",{className:"flex-1 text-left font-medium",children:t.options[T]}),(R||D||f)&&d.jsxs("div",{className:"absolute right-4",children:[ue&&d.jsx(U6,{className:"w-6 h-6 text-green-500"}),le&&d.jsx($6,{className:"w-6 h-6 text-red-500"}),!l&&!ue&&d.jsx(W6,{className:"w-6 h-6 text-primary animate-pulse"})]}),!l&&!w&&d.jsx(Kn.div,{className:"absolute inset-0 bg-primary rounded-lg pointer-events-none",initial:{opacity:0},whileTap:{opacity:.2,transition:{duration:.1}},exit:{opacity:0}})]},P)})}),!l&&!w&&d.jsxs("div",{className:"mt-4 text-sm text-gray-600 flex items-center justify-center",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),d.jsx("span",{children:"Your answer will be automatically submitted when you click an option."})]})]}),t.type==="fill-in-blank"&&d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:"Your answer",value:u?l||"":o||"",onChange:Oe,onKeyDown:H,disabled:u||s===0||w,className:"w-full p-4 pr-12 border-2 border-primary/30 focus:border-primary rounded-lg transition-all text-lg"}),o&&!u&&d.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:u||s===0||w,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),f&&d.jsxs(Kn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4",children:[d.jsxs("p",{className:"font-bold text-green-700 flex items-center gap-2",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Correct answer:"]}),d.jsx("p",{className:"bg-green-100 p-3 rounded-lg border border-green-200 mt-1 font-medium",children:t.correctAnswer})]})]}),r&&d.jsxs("div",{className:"border-t mt-6 pt-4",children:[d.jsx("div",{className:"font-bold mb-2 text-primary",children:"Host Information"}),d.jsxs("p",{className:"bg-gray-100 p-3 rounded-lg",children:["Correct answer: ",t.type==="multiple-choice"?(()=>{const P={0:"A",1:"B",2:"C",3:"D"};return(Array.isArray(t.correctAnswers)&&t.correctAnswers.length>0?t.correctAnswers:t.correctAnswer!==void 0?[t.correctAnswer]:[]).map(R=>{const D=typeof R=="number"?P[R]:R,V=D.charCodeAt(0)-65;return`Option ${D}: ${t.options[V]}`}).join(", ")})():t.correctAnswer]}),t.difficulty==="tie-breaker"&&d.jsxs("div",{className:"mt-2 text-sm text-gray-600 bg-purple-50 p-2 rounded",children:[d.jsx("p",{className:"font-semibold",children:"Tie-breaker scoring:"}),d.jsxs("p",{children:["First correct answer: ",t.points," points"]}),d.jsxs("p",{children:["Second correct answer: ",t.points-5," points"]}),d.jsxs("p",{children:["Third correct answer: ",t.points-10," points"]}),d.jsx("p",{children:"And so on (-5 points per position)"})]})]}),u&&d.jsx("div",{className:"mt-6 p-4 bg-blue-100 rounded-lg text-center",children:d.jsxs("p",{className:"text-blue-800 font-medium",children:["Your answer has been submitted.",f&&q!==null&&(()=>{const P={0:"A",1:"B",2:"C",3:"D"};let T=!1;if(t.type==="multiple-choice"){if(Array.isArray(t.correctAnswers)&&t.correctAnswers.length>0)T=t.correctAnswers.map(D=>typeof D=="number"?P[D]:D).includes(q);else if(t.correctAnswer!==void 0){const R=typeof t.correctAnswer=="number"?P[t.correctAnswer]:t.correctAnswer;T=q===R}}else{const R=t.correctAnswer?t.correctAnswer.toLowerCase().trim():"";T=q.toLowerCase().trim()===R}return T?d.jsx("span",{className:"text-green-700 font-bold",children:" Correct!"}):d.jsx("span",{className:"text-red-700 font-bold",children:" Not correct."})})()]})}),s===0&&!u&&d.jsx("div",{className:"mt-6 p-4 bg-yellow-100 rounded-lg text-center",children:d.jsx("p",{className:"text-yellow-800 font-bold",children:"Time's up! You didn't submit an answer in time."})}),d.jsx($v,{children:y.show&&d.jsx(Kn.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:-60,scale:1.2},exit:{opacity:0,y:-120,scale:.8},transition:{duration:1.5},className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:d.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-3 rounded-full font-bold text-xl shadow-lg",children:["+",y.score," points!"]})})}),t.type==="fill-in-blank"&&d.jsx("button",{className:`mt-6 px-6 py-3 rounded-md bg-primary text-white font-bold shadow-md hover:bg-primary-dark transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed ${l?"opacity-50 cursor-not-allowed":""}`,onClick:()=>ve(o),disabled:l||!o||w,children:l?"Answer Submitted":"Submit Answer"})]})}var KE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l_=On.createContext&&On.createContext(KE),Q6=["attr","size","title"];function q6(t,e){if(t==null)return{};var n=G6(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function G6(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jc.apply(this,arguments)}function c_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Mc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c_(Object(n),!0).forEach(function(r){K6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K6(t,e,n){return e=Y6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y6(t){var e=X6(t,"string");return typeof e=="symbol"?e:e+""}function X6(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YE(t){return t&&t.map((e,n)=>On.createElement(e.tag,Mc({key:n},e.attr),YE(e.child)))}function Fr(t){return e=>On.createElement(J6,jc({attr:Mc({},t.attr)},e),YE(t.child))}function J6(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=q6(t,Q6),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),On.createElement("svg",jc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Mc(Mc({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&On.createElement("title",null,i),t.children)};return l_!==void 0?On.createElement(l_.Consumer,null,n=>e(n)):e(KE)}function u_(t){return Fr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(t)}function Z6(t){return Fr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function sg(t){return Fr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(t)}function e5(t){return Fr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z"},child:[]}]})(t)}function Ad(t){return Fr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function t5(t){return Fr({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M215.03 72.04L126.06 161H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V89.02c0-21.47-25.96-31.98-40.97-16.98zm123.2 108.08c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 229.28 336 242.62 336 257c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.87z"},child:[]}]})(t)}function n5(t){return Fr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(t)}function r5(t){return Fr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}function Dc({quizId:t,participantId:e=null,showTeams:n=!0,animateEntrance:r=!0,compact:s=!1}){var v;const[i,o]=_.useState([]),[a,l]=_.useState([]),[c,u]=_.useState(!0),[h,f]=_.useState(null),[p,g]=_.useState("individual"),[x,w]=_.useState(null);_.useEffect(()=>{if(!t){console.log("EnhancedLeaderboard: No quizId provided"),u(!1),f("Quiz ID is required");return}console.log(`EnhancedLeaderboard: Loading data for quiz ${t}`);const b=re(se,`quizzes/${t}/participants`),E=tt(b,async C=>{try{if(C.exists()){const S=C.val(),k=re(se,`quizzes/${t}/questions`),F=await It(k),B=[];if(F.exists()){const H=F.val();Object.entries(H).forEach(([ae,Y])=>{Y.difficulty==="tie-breaker"&&B.push(ae)})}let q=Object.keys(S).map(H=>({id:H,...S[H],name:S[H].name||"Anonymous",team:S[H].team||"No Team",score:S[H].score||0,tieBreakerRank:null}));if(B.length>0)for(const H of B){const ae=re(se,`quizzes/${t}/answers/${H}`),Y=await It(ae);if(Y.exists()){const P=Y.val(),T=[];Object.entries(P).forEach(([R,D])=>{D.scoreEarned>0&&T.push({participantId:R,timestamp:D.timestamp})}),T.sort((R,D)=>R.timestamp-D.timestamp),T.forEach((R,D)=>{const V=q.find(X=>X.id===R.participantId);if(V){const X=D+1;(V.tieBreakerRank===null||X<V.tieBreakerRank)&&(V.tieBreakerRank=X)}})}}q.sort((H,ae)=>{const Y=ae.score-H.score;return Y!==0?Y:H.tieBreakerRank!==null&&ae.tieBreakerRank!==null?H.tieBreakerRank-ae.tieBreakerRank:H.tieBreakerRank!==null?-1:ae.tieBreakerRank!==null?1:H.lastAnswerAt&&ae.lastAnswerAt?H.lastAnswerAt-ae.lastAnswerAt:0});let ye=1,ve=q.length>0?q[0].score:0,Oe={};if(q.forEach((H,ae)=>{H.score!==ve?(ye=ae+1,ve=H.score,Oe={}):H.tieBreakerRank!==null&&(Oe[ve]||(Oe[ve]={rankCounter:ye,participants:[]}),Oe[ve].participants.push(H)),H.displayRank=ye}),e){const H=q.find(ae=>ae.id===e);H&&w(H.displayRank)}if(n){const H={};q.forEach(T=>{T.team&&(H[T.team]||(H[T.team]={name:T.team,members:[],totalScore:0,averageScore:0}),H[T.team].members.push({id:T.id,name:T.name,score:T.score}),H[T.team].totalScore+=T.score)});const ae=Object.values(H).map(T=>(T.averageScore=T.members.length>0?Math.round(T.totalScore/T.members.length):0,T.memberCount=T.members.length,T));ae.sort((T,R)=>R.totalScore-T.totalScore);let Y=1,P=ae.length>0?ae[0].totalScore:0;ae.forEach((T,R)=>{T.totalScore!==P&&(Y=R+1,P=T.totalScore),T.displayRank=Y}),l(ae)}o(q),f(null)}else o([]),l([])}catch(S){console.error("EnhancedLeaderboard: Error processing data",S),f(S.message)}finally{u(!1)}},C=>{console.error("EnhancedLeaderboard: Firebase error",C),f(C.message),u(!1)});return()=>E()},[t,e,n]);const m=({rank:b,small:E=!1})=>b===1?d.jsx(sg,{className:`${E?"text-xl":"text-2xl md:text-3xl"} text-yellow-500`,"aria-label":"1st Place"}):b===2?d.jsx(u_,{className:`${E?"text-lg":"text-xl md:text-2xl"} text-slate-400`,"aria-label":"2nd Place"}):b===3?d.jsx(u_,{className:`${E?"text-lg":"text-xl md:text-2xl"} text-amber-700`,"aria-label":"3rd Place"}):b<=5?d.jsx(Z6,{className:`${E?"text-sm":"text-lg md:text-xl"} text-purple-500`,"aria-label":`${b}th Place`}):d.jsx("span",{className:`text-gray-600 ${E?"text-base":"text-lg md:text-xl font-semibold"}`,children:b}),y=(b,E)=>{let C="transition-all duration-300 ease-in-out";return r&&(C+=" animate-fadeIn opacity-0",C+=` [animation-delay:${b*.05}s]`),b<3?b===0?C+=" bg-yellow-50 border-yellow-200":b===1?C+=" bg-slate-50 border-slate-200":b===2&&(C+=" bg-amber-50 border-amber-200"):C+=" bg-white hover:bg-gray-50",E?C+=" border-l-4 border-primary font-bold relative":C+=" border-l-4 border-transparent",C};return c?d.jsxs("div",{className:"w-full py-8 flex flex-col items-center justify-center glass-panel animate-pulse",children:[d.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-primary border-t-transparent rounded-full"}),d.jsx("p",{className:"mt-4 text-primary font-medium",children:"Loading Scoreboard..."})]}):h?d.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[d.jsx("strong",{className:"font-bold",children:"Error!"}),d.jsxs("span",{className:"block sm:inline",children:[" ",h]})]}):i.length===0?d.jsxs("div",{className:"w-full py-8 text-center glass-panel",children:[d.jsx(Ad,{className:"mx-auto text-5xl text-gray-300 mb-4"}),d.jsx("p",{className:"text-gray-500 font-medium",children:"No participants have joined yet."})]}):s?d.jsxs("div",{className:`glass-panel p-4 rounded-xl overflow-hidden ${r?"anim-show":""}`,children:[d.jsx("h3",{className:"text-xl font-bold mb-3 text-center text-primary",children:"Top Performers"}),d.jsx("div",{className:"space-y-2",children:i.slice(0,5).map((b,E)=>{const C=e&&b.id===e;return d.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${y(E,C)}`,children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"mr-3 flex-shrink-0 w-8",children:d.jsx(m,{rank:E+1,small:!0})}),d.jsx("div",{className:"truncate max-w-[180px]",title:b.name,children:b.name})]}),d.jsx("div",{className:"font-bold text-primary",children:b.score})]},b.id)})}),x&&x>5&&d.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:d.jsxs("div",{className:"flex items-center justify-between p-2 bg-primary/10 rounded-lg",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"mr-3 text-primary font-bold",children:x}),d.jsx("div",{className:"font-medium",children:"You"})]}),d.jsx("div",{className:"font-bold text-primary",children:((v=i[x-1])==null?void 0:v.score)||0})]})})]}):d.jsxs("div",{className:`glass-panel p-6 rounded-xl overflow-hidden ${r?"anim-show":""}`,children:[d.jsx("h2",{className:"text-2xl font-bold mb-6 text-center bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Leaderboard"}),n&&a.length>0&&d.jsxs("div",{className:"flex rounded-lg overflow-hidden mb-6 border border-gray-200",children:[d.jsxs("button",{className:`flex-1 py-2 px-4 font-medium text-sm transition-all ${p==="individual"?"bg-primary text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100"}`,onClick:()=>g("individual"),children:[d.jsx(e5,{className:"inline mr-2"})," Individual"]}),d.jsxs("button",{className:`flex-1 py-2 px-4 font-medium text-sm transition-all ${p==="team"?"bg-primary text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100"}`,onClick:()=>g("team"),children:[d.jsx(Ad,{className:"inline mr-2"})," Team"]})]}),p==="individual"&&d.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"w-[15%] py-4 px-4 md:px-6 text-left text-base md:text-lg font-bold uppercase tracking-wider text-primary",children:"Rank"}),d.jsx("th",{scope:"col",className:"w-[40%] py-4 px-4 md:px-6 text-left text-base md:text-lg font-bold uppercase tracking-wider text-primary",children:"Name"}),n&&d.jsx("th",{scope:"col",className:"w-[25%] py-4 px-4 md:px-6 text-left text-base md:text-lg font-bold uppercase tracking-wider text-primary",children:"Team"}),d.jsx("th",{scope:"col",className:"w-[20%] py-4 px-4 md:px-6 text-right text-base md:text-lg font-bold uppercase tracking-wider text-primary",children:"Score"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:i.map((b,E)=>{const C=e&&b.id===e;return d.jsxs("tr",{className:y(E,C),children:[d.jsx("td",{className:"py-4 px-4 md:px-6 whitespace-nowrap",children:d.jsx("div",{className:"flex items-center",children:d.jsx(m,{rank:b.displayRank||E+1})})}),d.jsx("td",{className:"py-4 px-4 md:px-6 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center group relative",children:[d.jsx("span",{className:"font-medium text-base md:text-lg truncate max-w-[180px] md:max-w-[250px]",title:b.name,children:b.name}),C&&d.jsx("span",{className:"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-primary text-white",children:"You"}),d.jsx("div",{className:"absolute left-0 bottom-full hidden group-hover:block bg-gray-800 text-white text-sm rounded px-2 py-1 z-50",children:b.name})]})}),n&&d.jsxs("td",{className:"py-4 px-4 md:px-6 whitespace-nowrap text-gray-700 group relative",children:[d.jsx("span",{className:"truncate block text-base md:text-lg max-w-[120px] md:max-w-[180px]",title:b.team,children:b.team}),d.jsx("div",{className:"absolute left-0 bottom-full hidden group-hover:block bg-gray-800 text-white text-sm rounded px-2 py-1 z-50",children:b.team})]}),d.jsx("td",{className:"py-4 px-4 md:px-6 whitespace-nowrap text-right font-bold text-xl md:text-2xl text-primary",children:b.score})]},b.id)})})]})}),p==="team"&&a&&a.length>0&&d.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"w-[15%] py-4 px-4 md:px-6 text-left text-base md:text-lg font-bold uppercase tracking-wider text-primary",children:"Rank"}),d.jsx("th",{scope:"col",className:"w-[40%] py-4 px-4 md:px-6 text-left text-base md:text-lg font-bold uppercase tracking-wider text-primary",children:"Team"}),d.jsx("th",{scope:"col",className:"w-[15%] py-4 px-4 md:px-6 text-center text-base md:text-lg font-bold uppercase tracking-wider text-primary",children:"Members"}),d.jsx("th",{scope:"col",className:"w-[30%] py-4 px-4 md:px-6 text-right text-base md:text-lg font-bold uppercase tracking-wider text-primary",children:"Score"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:a.map((b,E)=>{const C=e&&b.members.some(S=>S.id===e);return d.jsxs("tr",{className:y(E,C),children:[d.jsx("td",{className:"py-4 px-4 md:px-6 whitespace-nowrap",children:d.jsx("div",{className:"flex items-center",children:d.jsx(m,{rank:E+1})})}),d.jsx("td",{className:"py-4 px-4 md:px-6 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center group relative",children:[d.jsx("span",{className:"font-medium text-base md:text-lg truncate max-w-[180px] md:max-w-[250px]",title:b.name,children:b.name}),C&&d.jsx("span",{className:"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-primary text-white",children:"Your Team"}),d.jsx("div",{className:"absolute left-0 bottom-full hidden group-hover:block bg-gray-800 text-white text-sm rounded px-2 py-1 z-50",children:b.name})]})}),d.jsx("td",{className:"py-4 px-4 md:px-6 whitespace-nowrap text-center",children:d.jsx("span",{className:"text-base md:text-lg text-gray-700",children:b.memberCount})}),d.jsx("td",{className:"py-4 px-4 md:px-6 whitespace-nowrap text-right",children:d.jsxs("div",{className:"flex flex-col items-end",children:[d.jsx("span",{className:"font-bold text-xl md:text-2xl text-primary",children:b.totalScore}),d.jsxs("span",{className:"text-gray-500 text-sm md:text-base",children:["Avg: ",b.averageScore]})]})})]},b.name)})})]})}),p==="team"&&(!a||a.length===0)&&d.jsxs("div",{className:"p-8 text-center bg-gray-50 rounded-lg border border-gray-200",children:[d.jsx(Ad,{className:"mx-auto text-4xl text-gray-300 mb-3"}),d.jsx("p",{className:"text-gray-500",children:"No teams available"})]})]})}function s5({size:t="md",className:e=""}){const n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},r=n[t]||n.md;return d.jsx("div",{className:`animate-spin rounded-full border-4 border-primary border-t-transparent ${r} ${e}`})}function d_({quizId:t,teamFilter:e}){const[n,r]=_.useState([]),[s,i]=_.useState(!0);return _.useEffect(()=>{if(!t)return;const o=re(se,`quizzes/${t}/participants`);return tt(o,a=>{const l=a.val();if(l){const c=Object.entries(l).map(([u,h])=>{const f=sessionStorage.getItem("participantId");if(u===f){const g=sessionStorage.getItem("participantName"),x=sessionStorage.getItem("participantTeam");return{id:u,...h,name:g||h.name||`Participant-${u.slice(-4)}`,team:x||h.team||`Team-Participant-${u.slice(-4)}`}}return{id:u,...h,name:h.name||`Participant-${u.slice(-4)}`,team:h.team||`Team-Participant-${u.slice(-4)}`}}).filter(u=>!e||u.team===e).sort((u,h)=>u.name.localeCompare(h.name));r(c)}else r([]);i(!1)}),()=>Zi(o)},[t,e]),s?d.jsxs("div",{className:"flex justify-center items-center h-32",children:[d.jsx(s5,{size:"md"}),d.jsx("span",{className:"ml-2",children:"Loading participants..."})]}):n.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:e?`No participants found in team "${e}"`:"No participants have joined this quiz yet"}):d.jsx("div",{className:"overflow-y-auto max-h-96 mt-2",children:d.jsxs("table",{className:"min-w-full",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(o=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 group relative",children:[d.jsx("div",{className:"truncate max-w-[200px]",title:o.name,children:o.name}),d.jsx("div",{className:"absolute left-0 bottom-full hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-50",children:o.name})]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 group relative",children:[d.jsx("div",{className:"truncate max-w-[150px]",title:o.team,children:o.team}),d.jsx("div",{className:"absolute left-0 bottom-full hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-50",children:o.team})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:o.score||0})]},o.id))})]})})}var XE={exports:{}};(function(t,e){(function(n,r){t.exports=r(_)})(typeof self<"u"?self:eC,function(n){return function(r){var s={};function i(o){if(s[o])return s[o].exports;var a=s[o]={i:o,l:!1,exports:{}};return r[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=r,i.c=s,i.d=function(o,a,l){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:l})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var c in o)i.d(l,c,(function(u){return o[u]}).bind(null,c));return l},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=2)}([function(r,s){r.exports=n},function(r,s,i){var o={linear:function(a,l,c,u){return(c-l)*a/u+l},easeInQuad:function(a,l,c,u){return(c-l)*(a/=u)*a+l},easeOutQuad:function(a,l,c,u){return-(c-l)*(a/=u)*(a-2)+l},easeInOutQuad:function(a,l,c,u){var h=c-l;return(a/=u/2)<1?h/2*a*a+l:-h/2*(--a*(a-2)-1)+l},easeInCubic:function(a,l,c,u){return(c-l)*(a/=u)*a*a+l},easeOutCubic:function(a,l,c,u){return(c-l)*((a=a/u-1)*a*a+1)+l},easeInOutCubic:function(a,l,c,u){var h=c-l;return(a/=u/2)<1?h/2*a*a*a+l:h/2*((a-=2)*a*a+2)+l},easeInQuart:function(a,l,c,u){return(c-l)*(a/=u)*a*a*a+l},easeOutQuart:function(a,l,c,u){return-(c-l)*((a=a/u-1)*a*a*a-1)+l},easeInOutQuart:function(a,l,c,u){var h=c-l;return(a/=u/2)<1?h/2*a*a*a*a+l:-h/2*((a-=2)*a*a*a-2)+l},easeInQuint:function(a,l,c,u){return(c-l)*(a/=u)*a*a*a*a+l},easeOutQuint:function(a,l,c,u){return(c-l)*((a=a/u-1)*a*a*a*a+1)+l},easeInOutQuint:function(a,l,c,u){var h=c-l;return(a/=u/2)<1?h/2*a*a*a*a*a+l:h/2*((a-=2)*a*a*a*a+2)+l},easeInSine:function(a,l,c,u){var h=c-l;return-h*Math.cos(a/u*(Math.PI/2))+h+l},easeOutSine:function(a,l,c,u){return(c-l)*Math.sin(a/u*(Math.PI/2))+l},easeInOutSine:function(a,l,c,u){return-(c-l)/2*(Math.cos(Math.PI*a/u)-1)+l},easeInExpo:function(a,l,c,u){return a==0?l:(c-l)*Math.pow(2,10*(a/u-1))+l},easeOutExpo:function(a,l,c,u){var h=c-l;return a==u?l+h:h*(1-Math.pow(2,-10*a/u))+l},easeInOutExpo:function(a,l,c,u){var h=c-l;return a===0?l:a===u?l+h:(a/=u/2)<1?h/2*Math.pow(2,10*(a-1))+l:h/2*(2-Math.pow(2,-10*--a))+l},easeInCirc:function(a,l,c,u){return-(c-l)*(Math.sqrt(1-(a/=u)*a)-1)+l},easeOutCirc:function(a,l,c,u){return(c-l)*Math.sqrt(1-(a=a/u-1)*a)+l},easeInOutCirc:function(a,l,c,u){var h=c-l;return(a/=u/2)<1?-h/2*(Math.sqrt(1-a*a)-1)+l:h/2*(Math.sqrt(1-(a-=2)*a)+1)+l},easeInElastic:function(a,l,c,u){var h,f,p,g=c-l;return p=1.70158,a===0?l:(a/=u)==1?l+g:((f=0)||(f=.3*u),(h=g)<Math.abs(g)?(h=g,p=f/4):p=f/(2*Math.PI)*Math.asin(g/h),-h*Math.pow(2,10*(a-=1))*Math.sin((a*u-p)*(2*Math.PI)/f)+l)},easeOutElastic:function(a,l,c,u){var h,f,p,g=c-l;return p=1.70158,a===0?l:(a/=u)==1?l+g:((f=0)||(f=.3*u),(h=g)<Math.abs(g)?(h=g,p=f/4):p=f/(2*Math.PI)*Math.asin(g/h),h*Math.pow(2,-10*a)*Math.sin((a*u-p)*(2*Math.PI)/f)+g+l)},easeInOutElastic:function(a,l,c,u){var h,f,p,g=c-l;return p=1.70158,a===0?l:(a/=u/2)==2?l+g:((f=0)||(f=u*.44999999999999996),(h=g)<Math.abs(g)?(h=g,p=f/4):p=f/(2*Math.PI)*Math.asin(g/h),a<1?h*Math.pow(2,10*(a-=1))*Math.sin((a*u-p)*(2*Math.PI)/f)*-.5+l:h*Math.pow(2,-10*(a-=1))*Math.sin((a*u-p)*(2*Math.PI)/f)*.5+g+l)},easeInBack:function(a,l,c,u,h){return h===void 0&&(h=1.70158),(c-l)*(a/=u)*a*((h+1)*a-h)+l},easeOutBack:function(a,l,c,u,h){return h===void 0&&(h=1.70158),(c-l)*((a=a/u-1)*a*((h+1)*a+h)+1)+l},easeInOutBack:function(a,l,c,u,h){var f=c-l;return h===void 0&&(h=1.70158),(a/=u/2)<1?f/2*(a*a*((1+(h*=1.525))*a-h))+l:f/2*((a-=2)*a*((1+(h*=1.525))*a+h)+2)+l},easeInBounce:function(a,l,c,u){var h=c-l;return h-o.easeOutBounce(u-a,0,h,u)+l},easeOutBounce:function(a,l,c,u){var h=c-l;return(a/=u)<.36363636363636365?h*(7.5625*a*a)+l:a<.7272727272727273?h*(7.5625*(a-=.5454545454545454)*a+.75)+l:a<.9090909090909091?h*(7.5625*(a-=.8181818181818182)*a+.9375)+l:h*(7.5625*(a-=.9545454545454546)*a+.984375)+l},easeInOutBounce:function(a,l,c,u){var h=c-l;return a<u/2?.5*o.easeInBounce(2*a,0,h,u)+l:.5*o.easeOutBounce(2*a-u,0,h,u)+.5*h+l}};r.exports=o},function(r,s,i){r.exports=i(3)},function(r,s,i){i.r(s),i.d(s,"ReactConfetti",function(){return U});var o,a,l=i(0),c=i.n(l),u=i(1),h=i.n(u);function f(N,I){return N+Math.random()*(I-N)}function p(N,I){for(var O=0;O<I.length;O++){var A=I[O];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}function g(N,I,O){return I in N?Object.defineProperty(N,I,{value:O,enumerable:!0,configurable:!0,writable:!0}):N[I]=O,N}(function(N){N[N.Circle=0]="Circle",N[N.Square=1]="Square",N[N.Strip=2]="Strip"})(o||(o={})),function(N){N[N.Positive=1]="Positive",N[N.Negative=-1]="Negative"}(a||(a={}));var x=function(){function N(A,G,M,Q){(function(Eu,Cu){if(!(Eu instanceof Cu))throw new TypeError("Cannot call a class as a function")})(this,N),g(this,"context",void 0),g(this,"radius",void 0),g(this,"x",void 0),g(this,"y",void 0),g(this,"w",void 0),g(this,"h",void 0),g(this,"vx",void 0),g(this,"vy",void 0),g(this,"shape",void 0),g(this,"angle",void 0),g(this,"angularSpin",void 0),g(this,"color",void 0),g(this,"rotateY",void 0),g(this,"rotationDirection",void 0),g(this,"getOptions",void 0),this.getOptions=G;var ie,pe,we=this.getOptions(),Sn=we.colors,qt=we.initialVelocityX,Gt=we.initialVelocityY;this.context=A,this.x=M,this.y=Q,this.w=f(5,20),this.h=f(5,20),this.radius=f(5,10),this.vx=typeof qt=="number"?f(-qt,qt):f(qt.min,qt.max),this.vy=typeof Gt=="number"?f(-Gt,0):f(Gt.min,Gt.max),this.shape=(ie=0,pe=2,Math.floor(ie+Math.random()*(pe-ie+1))),this.angle=f(0,360)*Math.PI/180,this.angularSpin=f(-.2,.2),this.color=Sn[Math.floor(Math.random()*Sn.length)],this.rotateY=f(0,1),this.rotationDirection=f(0,1)?a.Positive:a.Negative}var I,O;return I=N,(O=[{key:"update",value:function(){var A=this.getOptions(),G=A.gravity,M=A.wind,Q=A.friction,ie=A.opacity,pe=A.drawShape;this.x+=this.vx,this.y+=this.vy,this.vy+=G,this.vx+=M,this.vx*=Q,this.vy*=Q,this.rotateY>=1&&this.rotationDirection===a.Positive?this.rotationDirection=a.Negative:this.rotateY<=-1&&this.rotationDirection===a.Negative&&(this.rotationDirection=a.Positive);var we=.1*this.rotationDirection;if(this.rotateY+=we,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=ie,this.context.lineCap="round",this.context.lineWidth=2,pe&&typeof pe=="function")pe.call(this,this.context);else switch(this.shape){case o.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case o.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case o.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}])&&p(I.prototype,O),N}();function w(N,I,O){return I in N?Object.defineProperty(N,I,{value:O,enumerable:!0,configurable:!0,writable:!0}):N[I]=O,N}var m=function N(I,O){var A=this;(function(M,Q){if(!(M instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,N),w(this,"canvas",void 0),w(this,"context",void 0),w(this,"getOptions",void 0),w(this,"x",0),w(this,"y",0),w(this,"w",0),w(this,"h",0),w(this,"lastNumberOfPieces",0),w(this,"tweenInitTime",Date.now()),w(this,"particles",[]),w(this,"particlesGenerated",0),w(this,"removeParticleAt",function(M){A.particles.splice(M,1)}),w(this,"getParticle",function(){var M=f(A.x,A.w+A.x),Q=f(A.y,A.h+A.y);return new x(A.context,A.getOptions,M,Q)}),w(this,"animate",function(){var M=A.canvas,Q=A.context,ie=A.particlesGenerated,pe=A.lastNumberOfPieces,we=A.getOptions(),Sn=we.run,qt=we.recycle,Gt=we.numberOfPieces,Eu=we.debug,Cu=we.tweenFunction,Tu=we.tweenDuration;if(!Sn)return!1;var ku=A.particles.length,Ri=qt?ku:ie,Nu=Date.now();if(Ri<Gt){pe!==Gt&&(A.tweenInitTime=Nu,A.lastNumberOfPieces=Gt);for(var og=A.tweenInitTime,JE=Cu(Nu-og>Tu?Tu:Math.max(0,Nu-og),Ri,Gt,Tu),ag=Math.round(JE-Ri),lg=0;lg<ag;lg++)A.particles.push(A.getParticle());A.particlesGenerated+=ag}return Eu&&(Q.font="12px sans-serif",Q.fillStyle="#333",Q.textAlign="right",Q.fillText("Particles: ".concat(ku),M.width-10,M.height-20)),A.particles.forEach(function(Oi,cg){Oi.update(),(Oi.y>M.height||Oi.y<-100||Oi.x>M.width+100||Oi.x<-100)&&(qt&&Ri<=Gt?A.particles[cg]=A.getParticle():A.removeParticleAt(cg))}),ku>0||Ri<Gt}),this.canvas=I;var G=this.canvas.getContext("2d");if(!G)throw new Error("Could not get canvas context");this.context=G,this.getOptions=O};function y(N,I){var O=Object.keys(N);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(N);I&&(A=A.filter(function(G){return Object.getOwnPropertyDescriptor(N,G).enumerable})),O.push.apply(O,A)}return O}function v(N){for(var I=1;I<arguments.length;I++){var O=arguments[I]!=null?arguments[I]:{};I%2?y(Object(O),!0).forEach(function(A){E(N,A,O[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(O)):y(Object(O)).forEach(function(A){Object.defineProperty(N,A,Object.getOwnPropertyDescriptor(O,A))})}return N}function b(N,I){for(var O=0;O<I.length;O++){var A=I[O];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}function E(N,I,O){return I in N?Object.defineProperty(N,I,{value:O,enumerable:!0,configurable:!0,writable:!0}):N[I]=O,N}var C={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:h.a.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0},S=function(){function N(A,G){var M=this;(function(ie,pe){if(!(ie instanceof pe))throw new TypeError("Cannot call a class as a function")})(this,N),E(this,"canvas",void 0),E(this,"context",void 0),E(this,"_options",void 0),E(this,"generator",void 0),E(this,"rafId",void 0),E(this,"setOptionsWithDefaults",function(ie){var pe={confettiSource:{x:0,y:0,w:M.canvas.width,h:0}};M._options=v(v(v({},pe),C),ie),Object.assign(M,ie.confettiSource)}),E(this,"update",function(){var ie=M.options,pe=ie.run,we=ie.onConfettiComplete,Sn=M.canvas,qt=M.context;pe&&(qt.fillStyle="white",qt.clearRect(0,0,Sn.width,Sn.height)),M.generator.animate()?M.rafId=requestAnimationFrame(M.update):(we&&typeof we=="function"&&M.generator.particlesGenerated>0&&we.call(M,M),M._options.run=!1)}),E(this,"reset",function(){M.generator&&M.generator.particlesGenerated>0&&(M.generator.particlesGenerated=0,M.generator.particles=[],M.generator.lastNumberOfPieces=0)}),E(this,"stop",function(){M.options={run:!1},M.rafId&&(cancelAnimationFrame(M.rafId),M.rafId=void 0)}),this.canvas=A;var Q=this.canvas.getContext("2d");if(!Q)throw new Error("Could not get canvas context");this.context=Q,this.generator=new m(this.canvas,function(){return M.options}),this.options=G,this.update()}var I,O;return I=N,(O=[{key:"options",get:function(){return this._options},set:function(A){var G=this._options&&this._options.run,M=this._options&&this._options.recycle;this.setOptionsWithDefaults(A),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof A.recycle=="boolean"&&A.recycle&&M===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof A.run=="boolean"&&A.run&&G===!1&&this.update()}}])&&b(I.prototype,O),N}();function k(N){return function(I){if(Array.isArray(I))return H(I)}(N)||function(I){if(typeof Symbol<"u"&&Symbol.iterator in Object(I))return Array.from(I)}(N)||Oe(N)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function F(N){return(F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(N)}function B(){return(B=Object.assign||function(N){for(var I=1;I<arguments.length;I++){var O=arguments[I];for(var A in O)Object.prototype.hasOwnProperty.call(O,A)&&(N[A]=O[A])}return N}).apply(this,arguments)}function q(N,I){var O=Object.keys(N);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(N);I&&(A=A.filter(function(G){return Object.getOwnPropertyDescriptor(N,G).enumerable})),O.push.apply(O,A)}return O}function ye(N){for(var I=1;I<arguments.length;I++){var O=arguments[I]!=null?arguments[I]:{};I%2?q(Object(O),!0).forEach(function(A){X(N,A,O[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(O)):q(Object(O)).forEach(function(A){Object.defineProperty(N,A,Object.getOwnPropertyDescriptor(O,A))})}return N}function ve(N,I){return function(O){if(Array.isArray(O))return O}(N)||function(O,A){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(O)))){var G=[],M=!0,Q=!1,ie=void 0;try{for(var pe,we=O[Symbol.iterator]();!(M=(pe=we.next()).done)&&(G.push(pe.value),!A||G.length!==A);M=!0);}catch(Sn){Q=!0,ie=Sn}finally{try{M||we.return==null||we.return()}finally{if(Q)throw ie}}return G}}(N,I)||Oe(N,I)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Oe(N,I){if(N){if(typeof N=="string")return H(N,I);var O=Object.prototype.toString.call(N).slice(8,-1);return O==="Object"&&N.constructor&&(O=N.constructor.name),O==="Map"||O==="Set"?Array.from(N):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?H(N,I):void 0}}function H(N,I){(I==null||I>N.length)&&(I=N.length);for(var O=0,A=new Array(I);O<I;O++)A[O]=N[O];return A}function ae(N,I){if(!(N instanceof I))throw new TypeError("Cannot call a class as a function")}function Y(N,I){for(var O=0;O<I.length;O++){var A=I[O];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}function P(N,I){return(P=Object.setPrototypeOf||function(O,A){return O.__proto__=A,O})(N,I)}function T(N){var I=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var O,A=V(N);if(I){var G=V(this).constructor;O=Reflect.construct(A,arguments,G)}else O=A.apply(this,arguments);return R(this,O)}}function R(N,I){return!I||F(I)!=="object"&&typeof I!="function"?D(N):I}function D(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function V(N){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)})(N)}function X(N,I,O){return I in N?Object.defineProperty(N,I,{value:O,enumerable:!0,configurable:!0,writable:!0}):N[I]=O,N}var le=c.a.createRef(),ue=function(N){(function(M,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(Q&&Q.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Q&&P(M,Q)})(G,N);var I,O,A=T(G);function G(M){var Q;ae(this,G);for(var ie=arguments.length,pe=new Array(ie>1?ie-1:0),we=1;we<ie;we++)pe[we-1]=arguments[we];return X(D(Q=A.call.apply(A,[this,M].concat(pe))),"canvas",c.a.createRef()),X(D(Q),"confetti",void 0),Q.canvas=M.canvasRef||le,Q}return I=G,(O=[{key:"componentDidMount",value:function(){if(this.canvas.current){var M=de(this.props)[0];this.confetti=new S(this.canvas.current,M)}}},{key:"componentDidUpdate",value:function(){var M=de(this.props)[0];this.confetti&&(this.confetti.options=M)}},{key:"componentWillUnmount",value:function(){this.confetti&&this.confetti.stop(),this.confetti=void 0}},{key:"render",value:function(){var M=ve(de(this.props),2),Q=M[0],ie=M[1],pe=ye({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},ie.style);return c.a.createElement("canvas",B({width:Q.width,height:Q.height,ref:this.canvas},ie,{style:pe}))}}])&&Y(I.prototype,O),G}(l.Component);function de(N){var I={},O={},A=[].concat(k(Object.keys(C)),["confettiSource","drawShape","onConfettiComplete"]),G=["canvasRef"];for(var M in N){var Q=N[M];A.includes(M)?I[M]=Q:G.includes(M)?G[M]=Q:O[M]=Q}return[I,O,{}]}X(ue,"defaultProps",ye({},C)),X(ue,"displayName","ReactConfetti");var U=c.a.forwardRef(function(N,I){return c.a.createElement(ue,B({canvasRef:I},N))});s.default=U}]).default})})(XE);var i5=XE.exports;const o5=g_(i5);function ig({active:t=!0,duration:e=0,pieces:n=200,recycle:r=!0,colors:s=["#FFD700","#FFC107","#06BEE1","#2541B2","#FFFFFF","#FF5252","#69F0AE"],confettiProps:i={}}){const[o,a]=_.useState({width:window.innerWidth,height:window.innerHeight}),[l,c]=_.useState(t);return _.useEffect(()=>{const u=()=>{a({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]),_.useEffect(()=>{if(c(t),e&&t){const u=setTimeout(()=>{c(!1)},e);return()=>clearTimeout(u)}},[t,e]),l?d.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none overflow-hidden",style:{position:"fixed",top:0,left:0,bottom:0,right:0},children:d.jsx(o5,{width:o.width,height:o.height,numberOfPieces:n,recycle:r,colors:s,gravity:.1,wind:.01,opacity:.8,tweenDuration:5e3,initialVelocityX:4,initialVelocityY:10,...i})}):null}function a5({quizId:t,onBack:e}){const[n,r]=_.useState([]),[s,i]=_.useState(!0),[o,a]=_.useState(null),[l,c]=_.useState(!0),u=gs();console.log("WinnerCelebration rendering with quizId:",t,"loading:",s),_.useEffect(()=>{if(console.log("WinnerCelebration useEffect running with quizId:",t),!t){console.log("No quizId provided to WinnerCelebration"),i(!1),a("Quiz ID is required");return}console.log("Setting up Firebase listener for quizId:",t);try{const f=re(se,`quizzes/${t}/participants`),p=tt(f,g=>{console.log("Firebase onValue triggered for winners"),i(!1);try{if(!g.exists()){console.log("No participants found"),r([]);return}const x=g.val();console.log("Participants data:",x);let w=Object.keys(x).map(y=>({id:y,name:x[y].name||"Anonymous",team:x[y].team||"No Team",score:x[y].score||0}));console.log("Processed participants array:",w),w.sort((y,v)=>v.score-y.score);const m=w.slice(0,Math.min(3,w.length));console.log(`Found ${m.length} winners:`,m),r(m),a(null)}catch(x){console.error("Error processing winners:",x),a(`Error processing results: ${x.message}`)}},g=>{console.error("Firebase onValue error:",g),i(!1),a(`Firebase error: ${g.message}`)});return()=>{console.log("Cleaning up Firebase listener"),p()}}catch(f){console.error("Error setting up winners listener:",f),a(`Error: ${f.message}`),i(!1)}},[t]);const h=()=>{try{u("/")}catch{window.location.href="/"}};return s?d.jsxs("div",{className:"p-6 text-center",children:[d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-6 h-20 mx-auto",alt:"ICCT School Logo"}),d.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),d.jsx("p",{className:"text-xl font-bold text-primary",children:"Loading winners..."}),d.jsx("p",{className:"text-gray-500 mt-2",children:"Please wait while we gather the results"}),d.jsx(ne,{onClick:()=>i(!1),variant:"secondary",className:"mt-6",children:"Skip Loading"})]}):o?d.jsxs("div",{className:"p-6 text-center",children:[d.jsxs("p",{className:"text-red-500 font-bold",children:["Error: ",o]}),d.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[e&&d.jsx(ne,{onClick:e,variant:"secondary",children:"Back to Results"}),d.jsx(ne,{onClick:h,variant:"primary",children:"Back to Home"})]})]}):n.length===0?d.jsxs("div",{className:"p-6 text-center",children:[d.jsx(sg,{className:"mx-auto text-5xl text-yellow-500 mb-4"}),d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No participants found"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"There are no participants with scores to display."}),d.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[e&&d.jsx(ne,{onClick:e,variant:"secondary",children:"Back to Results"}),d.jsx(ne,{onClick:h,variant:"primary",children:"Back to Home"})]})]}):d.jsxs("div",{className:"winner-celebration relative",children:[l&&d.jsx(ig,{active:!0,pieces:400,recycle:!0}),d.jsxs("div",{className:"mb-6 text-center",children:[d.jsx("h2",{className:"text-3xl font-bold mb-2 animate-pulse text-primary",children:"🏆 Quiz Complete! 🏆"}),d.jsx("p",{className:"text-xl text-gray-700",children:"Here are the top performers"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white shadow-lg rounded-xl p-6 border-4 border-primary/20",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent text-center",children:"Champions"}),d.jsx("div",{className:"space-y-8",children:n.map((f,p)=>d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute -left-3 -top-3 w-12 h-12 flex items-center justify-center rounded-full shadow-lg z-10",style:{background:p===0?"linear-gradient(135deg, #FFD700, #FFC107)":p===1?"linear-gradient(135deg, #C0C0C0, #E0E0E0)":"linear-gradient(135deg, #CD7F32, #B87333)"},children:d.jsx("span",{className:"text-white text-xl font-bold",children:p+1})}),d.jsxs("div",{className:`transform transition duration-500 hover:-translate-y-1 hover:shadow-xl
                  p-4 rounded-lg border-2
                  ${p===0?"bg-yellow-50 border-yellow-300 shadow-yellow-100":p===1?"bg-gray-50 border-gray-300 shadow-gray-100":"bg-amber-50 border-amber-300 shadow-amber-100"}`,children:[d.jsxs("div",{className:"relative group",children:[d.jsx("h4",{className:"text-xl font-bold mb-1 truncate",title:f.name,children:f.name}),d.jsx("div",{className:"absolute left-0 -bottom-6 hidden group-hover:block bg-gray-800 text-white text-sm rounded px-2 py-1 z-50 w-full max-w-xs",children:f.name})]}),f.team&&d.jsxs("div",{className:"relative group",children:[d.jsxs("p",{className:"text-gray-600 mb-2 truncate",title:`Team: ${f.team}`,children:["Team: ",f.team]}),d.jsxs("div",{className:"absolute left-0 -bottom-6 hidden group-hover:block bg-gray-800 text-white text-sm rounded px-2 py-1 z-50",children:["Team: ",f.team]})]}),d.jsxs("div",{className:"flex justify-between items-center mt-2",children:[d.jsx("span",{className:"text-gray-600 text-sm",children:"Final Score"}),d.jsx("span",{className:"font-bold text-2xl text-primary",children:f.score})]})]})]},f.id))})]}),d.jsx("div",{children:d.jsx(Dc,{quizId:t,showTeams:!0,animateEntrance:!0})})]}),d.jsx("div",{className:"text-center mt-10 mb-6",children:d.jsx("h3",{className:"text-xl font-semibold text-blue-700",children:"Thank you all for participating!"})}),d.jsxs("div",{className:"flex justify-center space-x-4 mt-6 mb-10",children:[d.jsx(ne,{onClick:()=>c(!l),variant:"secondary",className:"px-4 py-2",children:l?"Hide Confetti":"Show Confetti"}),e&&d.jsx(ne,{onClick:e,variant:"secondary",className:"px-4 py-2",children:"Back to Results"}),d.jsx(ne,{onClick:h,variant:"primary",className:"px-4 py-2",children:"Back to Home"})]})]})}function h_({quizId:t}){const[e,n]=_.useState([]),[r,s]=_.useState(!0),[i,o]=_.useState(null);if(_.useEffect(()=>{if(!t){s(!1);return}const l=async()=>{try{s(!0);const h=re(se,`quizzes/${t}/questions`),f=await It(h);if(!f.exists()){n([]),s(!1);return}const p=f.val(),g=[];if(Object.entries(p).forEach(([y,v])=>{v.difficulty==="tie-breaker"&&g.push({id:y,text:v.text,answerData:[]})}),g.length===0){n([]),s(!1);return}const x=re(se,`quizzes/${t}/participants`),w=await It(x),m=w.exists()?w.val():{};for(const y of g){const v=re(se,`quizzes/${t}/answers/${y.id}`),b=await It(v);if(b.exists()){const E=b.val(),C=[];Object.entries(E).forEach(([S,k])=>{if(k.scoreEarned>0){const F=m[S]||{name:`Unknown (${S.slice(-4)})`};C.push({participantId:S,name:F.name,team:F.team,timestamp:k.timestamp,timeRemaining:k.timeRemaining})}}),C.sort((S,k)=>S.timestamp-k.timestamp),y.answerData=C}}n(g)}catch(h){console.error("Error fetching tie-breaker data:",h),o("Failed to load tie-breaker statistics")}finally{s(!1)}};l();const c=re(se,`quizzes/${t}/questions`),u=tt(c,()=>{l()});return()=>u()},[t]),r)return d.jsx("div",{className:"flex justify-center items-center p-4",children:d.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(i)return d.jsx("div",{className:"text-center p-4 text-red-500",children:d.jsx("p",{children:i})});if(e.length===0)return d.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[d.jsx("h2",{className:"text-xl font-bold mb-2",children:"Tie-Breaker Statistics"}),d.jsx("p",{className:"text-gray-500",children:"No tie-breaker questions available in this quiz."})]});const a=l=>l?new Date(l).toLocaleTimeString():"N/A";return d.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tie-Breaker Statistics"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"In case of a tie in scores, participants are ranked by who answered tie-breaker questions correctly first."}),e.map((l,c)=>d.jsxs("div",{className:"mb-6",children:[d.jsxs("h3",{className:"font-semibold mb-2",children:["Tie-Breaker Question ",c+1,": ",l.text]}),l.answerData.length===0?d.jsx("p",{className:"text-sm text-gray-500",children:"No correct answers yet."}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-gray-50",children:[d.jsx("th",{className:"p-2 text-left",children:"Order"}),d.jsx("th",{className:"p-2 text-left",children:"Participant"}),d.jsx("th",{className:"p-2 text-left",children:"Team"}),d.jsx("th",{className:"p-2 text-right",children:"Time Remaining"}),d.jsx("th",{className:"p-2 text-right",children:"Timestamp"})]})}),d.jsx("tbody",{children:l.answerData.map((u,h)=>d.jsxs("tr",{className:`border-t ${h===0?"bg-green-50":""}`,children:[d.jsx("td",{className:"p-2 font-bold",children:h===0?"🥇 First":h===1?"🥈 Second":h===2?"🥉 Third":`${h+1}th`}),d.jsx("td",{className:"p-2",children:u.name}),d.jsx("td",{className:"p-2",children:u.team||"N/A"}),d.jsxs("td",{className:"p-2 text-right",children:[u.timeRemaining||"N/A"," sec"]}),d.jsx("td",{className:"p-2 text-right",children:a(u.timestamp)})]},u.participantId))})]})})]},l.id))]})}function f_({quizId:t}){const[e,n]=_.useState([]),[r,s]=_.useState(!0),[i,o]=_.useState(null);return _.useEffect(()=>{if(!t){s(!1),o("Quiz ID is required");return}const a=re(se,`quizzes/${t}/participants`),l=tt(a,c=>{try{if(c.exists()){const u=c.val(),h=Object.keys(u).map(g=>({id:g,...u[g],name:u[g].name||"Anonymous",team:u[g].team||"No Team",score:u[g].score||0})),f={};h.forEach(g=>{const x=g.score;f[x]||(f[x]=[]),f[x].push(g)});const p=Object.entries(f).filter(([g,x])=>x.length>1).map(([g,x])=>({score:parseInt(g),participants:x})).sort((g,x)=>x.score-g.score);n(p),o(null)}else n([])}catch(u){console.error("Error processing participants data:",u),o(u.message)}finally{s(!1)}});return()=>l()},[t]),r?d.jsxs("div",{className:"flex justify-center items-center p-8",children:[d.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-primary border-t-transparent rounded-full"}),d.jsx("p",{className:"ml-3 text-primary font-medium",children:"Finding tied participants..."})]}):i?d.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[d.jsx("p",{className:"font-bold",children:"Error:"}),d.jsx("p",{children:i})]}):e.length===0?d.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[d.jsx(sg,{className:"mx-auto text-5xl text-yellow-500 mb-4"}),d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Tied Scores"}),d.jsx("p",{className:"text-gray-600",children:"All participants have unique scores! No tie-breaker is needed."})]}):d.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[d.jsxs("div",{className:"p-6 border-b border-gray-200",children:[d.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Tied Participants"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"The following participants have identical scores and may require tie-breakers"})]}),d.jsx("div",{className:"divide-y divide-gray-200",children:e.map(a=>d.jsxs("div",{className:"p-5 hover:bg-gray-50 transition-colors",children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Score: ",d.jsx("span",{className:"text-primary",children:a.score})]}),d.jsxs("div",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:[a.participants.length," participants tied"]})]}),d.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),d.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.participants.map(l=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center group relative",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-[200px]",title:l.name,children:l.name}),d.jsx("div",{className:"absolute left-0 bottom-full hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-50",children:l.name})]})}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:d.jsxs("div",{className:"text-sm text-gray-500 truncate max-w-[150px] group relative",title:l.team,children:[l.team,d.jsx("div",{className:"absolute left-0 bottom-full hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-50",children:l.team})]})}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:d.jsx("div",{className:"text-sm font-bold text-primary",children:l.score})})]},l.id))})]})})]},a.score))})]})}function l5({quizId:t}){var ue,de;gs();const[e,n]=_.useState(null),[r,s]=_.useState(0),[i,o]=_.useState(!0),[a,l]=_.useState(!1),[c,u]=_.useState(!1),[h,f]=_.useState(!1),[p,g]=_.useState(!1),[x,w]=_.useState(!0),[m,y]=_.useState(null),[v,b]=_.useState([]),[E,C]=_.useState(null),[S,k]=_.useState(!1),[F,B]=_.useState(!1),{playSound:q}=CI(),[ye,ve]=_.useState(!1);_.useEffect(()=>{if(!t)return;const U=re(se,`quizzes/${t}`);(async()=>{try{const G=await It(U);if(G.exists()){const M=G.val();n(M),M.currentQuestionIndex!==void 0&&s(M.currentQuestionIndex),M.status==="completed"&&g(!0)}w(!1)}catch(G){console.error("Error loading quiz:",G),me.error("Failed to load quiz data"),w(!1)}})();const I=tt(U,G=>{if(G.exists()){const M=G.val();n(M),M.currentQuestionIndex!==void 0&&s(M.currentQuestionIndex),M.status==="completed"&&g(!0)}}),O=re(se,`quizzes/${t}/participants`),A=tt(O,G=>{if(G.exists()){const M=G.val(),Q=Object.values(M).map(ie=>ie.team).filter((ie,pe,we)=>ie&&we.indexOf(ie)===pe);b(["All Participants",...Q])}});return()=>{I(),A()}},[t]);const Oe=async()=>{if(q("click"),!e||!e.questions)return;const U=r+1;if(U>=e.questions.length){await yo(re(se,`quizzes/${t}`),{status:"completed",completedAt:new Date().toISOString()}),g(!0),me.success("Quiz completed!");return}await yo(re(se,`quizzes/${t}`),{currentQuestionIndex:U,currentQuestionStartedAt:cj()}),s(U),k(!1),C(null),me.success(`Moving to Question ${U+1}`)},H=()=>{o(!0),l(!1),u(!1)},ae=()=>{o(!1),l(!0),u(!1)},Y=()=>{o(!1),l(!1),u(!0)},P=()=>{ve(!0),requestAnimationFrame(()=>{f(!0),setTimeout(()=>ve(!1),100)})},T=()=>{console.log("Returning to quiz results from winners view");try{f(!1)}catch(U){console.error("Error returning from winners view:",U),me.error("Failed to return to results. Please refresh the page.")}},R=async()=>{e&&window.confirm("Are you sure you want to end the quiz early? This cannot be undone.")&&(await yo(re(se,`quizzes/${t}`),{status:"completed",completedAt:new Date().toISOString()}),g(!0),me.success("Quiz ended"))},D=U=>{y(U==="All Participants"?null:U)};if(_.useEffect(()=>{if(!t)return;const U=re(se,`quizzes/${t}/timer`),N=tt(U,M=>{M.exists()&&C(M.val())}),I=re(se,`quizzes/${t}/timerRunning`),O=tt(I,M=>{M.exists()&&k(M.val())}),A=re(se,`quizzes/${t}/currentQuestionIndex`),G=tt(A,M=>{M.exists()&&s(M.val())});return()=>{N(),O(),G()}},[t]),x)return d.jsxs("div",{className:"p-4 text-center",children:[d.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),d.jsx("p",{children:"Loading quiz data..."})]});if(!e)return d.jsx("div",{className:"p-4 text-center",children:d.jsx("p",{className:"text-red-500",children:"Quiz not found"})});const V=e.questions[r],X=r===e.questions.length-1,le=()=>d.jsxs("div",{className:"p-4 bg-gradient-to-r from-primary to-secondary text-white flex justify-between items-center rounded-t-lg shadow-md",children:[d.jsx("h1",{className:"text-xl font-bold",children:e.title}),d.jsxs("div",{className:"px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full shadow-inner",children:["Question ",r+1," of ",e.questions.length]})]});return p?d.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[F&&d.jsx(ig,{active:!0,pieces:400,recycle:!0}),h?d.jsx(a5,{quizId:t,onBack:T}):d.jsxs(d.Fragment,{children:[d.jsx("h2",{className:"text-2xl font-bold text-primary mb-6 text-center",children:"Quiz Results"}),d.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[d.jsx(ne,{onClick:H,className:i?"bg-primary text-white":"",children:"Leaderboard"}),d.jsx(ne,{onClick:ae,className:a?"bg-primary text-white":"",children:"Participants"}),d.jsx(ne,{onClick:Y,className:c?"bg-primary text-white":"",children:"Tie-Breakers & Tied Scores"})]}),d.jsx("div",{className:"mb-6",children:d.jsx(ne,{onClick:P,className:"bg-gradient-to-r from-primary to-secondary text-white w-full py-3 text-xl",onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),disabled:ye,children:ye?d.jsxs("span",{className:"flex items-center justify-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading Winners..."]}):d.jsx(d.Fragment,{children:"🏆 Show Winners 🏆"})})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[m&&d.jsxs("div",{className:"mb-4 px-3 py-2 bg-blue-100 text-blue-800 rounded-md",children:[d.jsx("div",{className:"font-semibold",children:"Filtered by team:"}),d.jsx("div",{className:"text-lg",children:m})]}),!c&&!i&&v.length>0&&d.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[d.jsx(ne,{onClick:()=>D(null),variant:m===null?"primary":"secondary",size:"sm",children:"All Teams"}),v.filter(U=>U!=="All Participants").map(U=>d.jsx(ne,{onClick:()=>D(U),variant:m===U?"primary":"secondary",size:"sm",children:U},U))]}),d.jsxs("div",{className:"w-full overflow-x-auto overflow-y-auto",style:{maxHeight:"min(70vh, 600px)"},children:[i&&d.jsx(Dc,{quizId:t,showTeams:!0,animateEntrance:!1}),a&&d.jsx(d_,{quizId:t,teamFilter:m}),c&&d.jsx(h_,{quizId:t}),c&&d.jsx("div",{className:"mt-6",children:d.jsx(f_,{quizId:t})})]})]})]})]}):d.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:e.status==="active"&&V&&d.jsxs(d.Fragment,{children:[le(),d.jsx("div",{className:"bg-white rounded-b-lg shadow-lg p-4 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"lg:col-span-1 bg-gray-50 rounded-lg p-4 h-full",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:"Controls"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[d.jsx("div",{className:"mb-2 text-sm font-medium text-gray-600",children:"View Options"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(ne,{onClick:H,className:`w-full ${i?"bg-primary text-white":""}`,children:"Leaderboard"}),d.jsx(ne,{onClick:ae,className:`w-full ${a?"bg-primary text-white":""}`,children:"Participants"}),d.jsx(ne,{onClick:Y,className:`w-full ${c?"bg-primary text-white":""}`,children:"Tie-Breakers & Tied Scores"})]})]}),d.jsx("div",{className:"border-t border-gray-200 pt-4",children:d.jsx(ne,{onClick:R,variant:"danger",className:"w-full",children:"End Quiz Early"})})]})]}),d.jsxs("div",{className:"lg:col-span-2",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Current Question"}),V?d.jsxs("div",{className:"question-display p-4 border border-gray-200 rounded-lg mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("div",{className:"bg-primary/10 text-primary text-sm font-semibold px-3 py-1 rounded-full",children:((ue=V.difficulty)==null?void 0:ue.charAt(0).toUpperCase())+((de=V.difficulty)==null?void 0:de.slice(1))||"Normal"}),d.jsxs("div",{className:"text-gray-600 font-semibold",children:["Points: ",V.points||100]})]}),d.jsx("h3",{className:"text-xl font-bold mb-4",children:V.text||"No question text available"}),Array.isArray(V.options)&&V.options.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:V.options.map((U,N)=>d.jsx("div",{className:`p-4 rounded-lg border-2 transition-all hover:shadow-md ${V.correctAnswer===N?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`w-8 h-8 rounded-full mr-3 flex items-center justify-center text-lg font-semibold ${V.correctAnswer===N?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,children:String.fromCharCode(65+N)}),d.jsx("span",{className:"text-lg",children:U}),V.correctAnswer===N&&d.jsx("span",{className:"ml-auto text-green-600",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},N))}):V.type==="fill-in-blank"?d.jsx("div",{className:"mt-4 p-4 rounded-lg border-2 border-gray-200",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm font-semibold mr-2",children:"Fill in the blank"}),d.jsx("span",{className:"text-lg",children:V.correctAnswer})]})}):d.jsx("div",{className:"text-gray-500 mt-4",children:"No options available for this question"})]}):d.jsx("div",{className:"p-4 text-center border border-gray-200 rounded-lg",children:d.jsx("p",{children:"No current question available"})})]}),d.jsx("h3",{className:"text-lg font-bold mb-4",children:i?"Leaderboard":a?"Participants":"Tie-Breakers & Tied Scores"}),m&&a&&d.jsxs("div",{className:"mb-4 px-3 py-2 bg-blue-100 text-blue-800 rounded-md",children:[d.jsx("div",{className:"font-semibold",children:"Filtered by team:"}),d.jsx("div",{className:"text-lg",children:m})]}),!c&&!i&&v.length>0&&d.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[d.jsx(ne,{onClick:()=>D(null),variant:m===null?"primary":"secondary",size:"sm",children:"All Teams"}),v.filter(U=>U!=="All Participants").map(U=>d.jsx(ne,{onClick:()=>D(U),variant:m===U?"primary":"secondary",size:"sm",children:U},U))]}),d.jsxs("div",{className:"w-full overflow-x-auto overflow-y-auto",style:{maxHeight:"min(70vh, 600px)"},children:[i&&d.jsx(Dc,{quizId:t,showTeams:!0,animateEntrance:!1}),a&&d.jsx(d_,{quizId:t,teamFilter:m}),c&&d.jsx(h_,{quizId:t}),c&&d.jsx("div",{className:"mt-6",children:d.jsx(f_,{quizId:t})})]})]})]})}),d.jsx("div",{className:"mt-6 flex justify-center",children:X?d.jsx(ne,{onClick:R,variant:"danger",className:"px-8 py-3 text-lg",children:"End Quiz"}):d.jsx(ne,{onClick:Oe,variant:"primary",className:"px-8 py-3 text-lg",children:"Next Question"})})]})})}const Rd=({soundEffect:t="click",onClick:e,children:n,className:r="",disabled:s=!1,type:i="button",...o})=>{const a=su(),l=u=>{t==="click"?a.playClick():t==="success"?a.playSuccess():t==="error"?a.playError():t==="correct"?a.playCorrect():t==="wrong"?a.playWrong():t==="celebration"?a.playCelebration():a.playClick(),e&&e(u)},c=u=>{if(a.playHover(),o.onMouseEnter){o.onMouseEnter(u);const{onMouseEnter:h,...f}=o;o=f}};return d.jsx("button",{type:i,className:`sound-button ${r}`,onClick:l,onMouseEnter:c,disabled:s,...o,children:n})};function c5(){const t=gs(),[e,n]=_.useState("create-questions"),[r,s]=_.useState(""),[i,o]=_.useState({title:"",questions:[]}),[a,l]=_.useState({id:af(),text:"",type:"multiple-choice",options:["","","",""],correctAnswer:0,timer:30,points:100,difficulty:"easy"}),[c,u]=_.useState([]),[h,f]=_.useState(0),[p,g]=_.useState(!1),x=su({pageType:"host",step:e,playBackgroundMusic:!0,playEntranceSound:!0}),m=(S=>{const k=[];for(let F=0;F<S;F++)k.push({id:F,size:Math.random()*20+5,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${Math.random()*20+20}s`,animationDelay:`${Math.random()*5}s`,opacity:Math.random()*.3+.1});return k})(15);_.useEffect(()=>{const S=setTimeout(()=>g(!0),100);if(r){const k=re(se,`quizzes/${r}/participants`),F=tt(k,ye=>{if(ye.exists()){const ve=ye.val(),Oe=Object.keys(ve).map(H=>({id:H,...ve[H]}));Oe.length>c.length&&x.playSuccess(),u(Oe)}else u([])}),B=re(se,`quizzes/${r}`),q=tt(B,ye=>{ye.exists()&&ye.val().status==="active"&&e==="view-participants"&&n("quiz-started")});return()=>{F(),q(),clearTimeout(S)}}return()=>clearTimeout(S)},[r,e,c.length,x]);const y=()=>{if(!i.title){me.error("Please enter a quiz title"),x.playError();return}if(i.questions.length===0){me.error("Please add at least one question"),x.playError();return}const S=Math.floor(1e5+Math.random()*9e5).toString();s(S);const k=re(se,`quizzes/${S}`);wc(k,{...i,createdAt:new Date().toISOString(),status:"waiting"}),x.playSuccess(),x.play("transition"),me.success(`Quiz created! Code: ${S}`),n("view-participants")},v=()=>{if(!a.text){me.error("Question text is required"),x.playError();return}if(a.type==="multiple-choice"){if(a.options.filter(k=>k.trim()!=="").length<2){me.error("Please add at least 2 options"),x.playError();return}if(a.correctAnswer===null){me.error("Please select the correct answer"),x.playError();return}}else if(a.type==="fill-in-blank"&&!a.correctAnswer){me.error("Please enter the correct answer"),x.playError();return}o({...i,questions:[...i.questions,a]}),l({id:af(),text:"",type:"multiple-choice",options:["","","",""],correctAnswer:0,timer:30,points:100,difficulty:"easy"}),x.playSuccess(),me.success("Question added")},b=S=>{o({...i,questions:i.questions.filter(k=>k.id!==S)}),x.play("click"),me.success("Question removed")},E=async()=>{if(c.length===0){me.error("No participants have joined yet"),x.playError();return}try{const S=re(se,`quizzes/${r}`),k=await It(S);if(!k.exists()){me.error("Quiz not found");return}const F=k.val();await wc(S,{...F,title:i.title,questions:i.questions,status:"active",currentQuestionIndex:0,startedAt:new Date().toISOString()}),console.log("Starting quiz with participants:",F.participants),f(3),x.play("countdown");const B=setInterval(()=>{f(q=>(q>1?x.play("countdown"):q===1&&x.play("countdownFinish"),q<=1?(clearInterval(B),n("quiz-started"),0):q-1))},1e3)}catch(S){console.error("Error starting quiz:",S),me.error("Failed to start quiz"),x.playError()}},C=(S,k)=>{const F=[...a.options];F[S]=k,l({...a,options:F})};return d.jsxs("section",{className:"min-h-screen w-full flex flex-col items-center justify-center overflow-hidden relative",children:[d.jsxs("div",{className:"fixed inset-0 -z-10",children:[d.jsx("img",{src:"https://i.imgur.com/NSkjBnJ.jpeg",className:"w-full h-full object-cover",alt:"background"}),m.map(S=>d.jsx("div",{className:"absolute rounded-full bg-white",style:{width:`${S.size}px`,height:`${S.size}px`,left:S.left,top:S.top,opacity:S.opacity,animation:`float ${S.animationDuration} infinite ease-in-out`,animationDelay:S.animationDelay}},S.id))]}),e==="create-questions"&&d.jsxs("div",{className:`max-w-3xl mx-auto transition-all duration-700 ease-out transform ${p?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-6 h-24 mx-auto animate-float",alt:"ICCT School Logo"}),d.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-white",style:{textShadow:"0 0 10px #06BEE1"},children:"Create Quiz"}),d.jsxs("div",{className:"mb-6 bg-white/90 backdrop-blur-sm rounded-lg p-6 shadow-lg",children:[d.jsx("label",{className:"block text-primary text-lg font-bold mb-2",children:"Quiz Title"}),d.jsx(Bt,{value:i.title,onChange:S=>o({...i,title:S.target.value}),placeholder:"Enter quiz title",className:"w-full text-lg font-medium border-2 border-primary/30 focus:border-primary/70 transition-all"})]}),i.questions.length>0&&d.jsxs("div",{className:"mb-8",children:[d.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Questions (",i.questions.length,")"]}),d.jsx("ul",{className:"space-y-4",children:i.questions.map((S,k)=>d.jsx("li",{className:"bg-gray-100 p-4 rounded-lg",children:d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("div",{children:[d.jsxs("span",{className:"font-bold",children:["#",k+1]})," ",S.text,d.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[S.type==="multiple-choice"?"Multiple Choice":"Fill in the Blank"," |",S.timer,"s | ",S.points," pts | ",S.difficulty]})]}),d.jsx("button",{onClick:()=>b(S.id),className:"text-red-500 hover:text-red-700",children:"Remove"})]})},S.id))})]}),d.jsxs("div",{className:"bg-white/90 backdrop-blur-sm shadow-lg rounded-lg p-6 mb-6",children:[d.jsx("h2",{className:"text-xl font-bold mb-4 text-primary",children:"Add New Question"}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Question Text"}),d.jsx(Bt,{value:a.text,onChange:S=>l({...a,text:S.target.value}),placeholder:"Enter question text",className:"w-full"})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Question Type"}),d.jsxs("select",{value:a.type,onChange:S=>l({...a,type:S.target.value,options:S.target.value==="fill-in-blank"?[]:["","","",""],correctAnswer:S.target.value==="fill-in-blank"?"":0}),className:"w-full p-2 border rounded",children:[d.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),d.jsx("option",{value:"fill-in-blank",children:"Fill in the Blank"})]})]}),a.type==="multiple-choice"&&d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Options (Check the correct one)"}),d.jsx("div",{className:"space-y-2",children:a.options.map((S,k)=>d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",checked:a.correctAnswer===k,onChange:()=>l({...a,correctAnswer:k}),className:"mr-2"}),d.jsx(Bt,{value:S,onChange:F=>C(k,F.target.value),placeholder:`Option ${k+1}`,className:"w-full"})]},k))})]}),a.type==="fill-in-blank"&&d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Correct Answer"}),d.jsx(Bt,{value:a.correctAnswer,onChange:S=>l({...a,correctAnswer:S.target.value}),placeholder:"Enter correct answer",className:"w-full"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Timer (seconds)"}),d.jsx(Bt,{type:"number",value:a.timer,onChange:S=>l({...a,timer:Number(S.target.value)}),min:"5",max:"120",className:"w-full"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Points"}),d.jsx(Bt,{type:"number",value:a.points,onChange:S=>l({...a,points:Number(S.target.value)}),min:"10",className:"w-full"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Difficulty"}),d.jsxs("select",{value:a.difficulty,onChange:S=>l({...a,difficulty:S.target.value}),className:"w-full p-2 border rounded",children:[d.jsx("option",{value:"easy",children:"Easy"}),d.jsx("option",{value:"intermediate",children:"Intermediate"}),d.jsx("option",{value:"hard",children:"Hard"}),d.jsx("option",{value:"difficult",children:"Difficult"}),d.jsx("option",{value:"tie-breaker",children:"Tie-Breaker"})]})]})]}),d.jsx(Rd,{onClick:v,className:"w-full bg-gradient-to-r from-primary to-secondary text-white py-3 rounded-lg font-bold text-lg shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all",children:"Add Question"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx(ne,{onClick:()=>{x.playClick(),t("/")},variant:"secondary",className:"bg-white/80 text-primary border-2 border-primary/50 px-6 py-3 rounded-lg font-bold shadow-md hover:bg-white hover:shadow-lg transition-all",onMouseEnter:()=>x.playHover(),children:"Back to Home"}),d.jsx(Rd,{onClick:y,disabled:i.questions.length===0,className:`bg-gradient-to-r from-primary to-secondary text-white px-8 py-3 rounded-lg font-bold shadow-md transition-all ${i.questions.length===0?"opacity-50 cursor-not-allowed":"hover:shadow-lg hover:scale-105"}`,onMouseEnter:()=>x.playHover(),children:"Create Quiz"})]})]}),e==="view-participants"&&d.jsxs("div",{className:`max-w-3xl mx-auto transition-all duration-700 ease-out transform ${p?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-6 h-24 mx-auto animate-float",alt:"ICCT School Logo"}),d.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-white",style:{textShadow:"0 0 10px #06BEE1"},children:"Waiting for Participants"}),d.jsxs("div",{className:"bg-white/90 backdrop-blur-sm shadow-lg rounded-lg p-6 mb-6 transition-all duration-300 hover:shadow-glow",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Quiz Code"}),d.jsx("div",{className:"text-4xl font-bold text-primary animate-pulse",children:r}),d.jsx("p",{className:"text-gray-500 mt-2",children:"Share this code with your participants"})]}),d.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Participants (",c.length,")"]}),c.length===0?d.jsxs("div",{className:"text-center text-gray-500 py-8",children:[d.jsx("div",{className:"w-16 h-16 mx-auto mb-4 border-4 border-primary border-t-transparent rounded-full animate-spin"}),d.jsx("p",{children:"No participants yet..."}),d.jsx("p",{className:"text-sm mt-2",children:"Waiting for people to join..."})]}):d.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:c.map((S,k)=>d.jsxs("li",{className:"bg-gray-100 p-3 rounded-lg flex justify-between items-center transition-all duration-300 hover:bg-gray-200",style:{animation:"fadeIn 0.5s ease forwards",animationDelay:`${k*.1}s`},children:[d.jsxs("div",{className:"flex items-center group relative",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white mr-3",children:S.name.charAt(0).toUpperCase()}),d.jsxs("div",{className:"truncate max-w-[250px]",children:[d.jsx("span",{className:"font-bold",title:S.name,children:S.name}),S.team&&d.jsxs("span",{className:"text-gray-600 ml-2 truncate inline-block",title:S.team,children:["(",S.team,")"]}),d.jsxs("div",{className:"absolute left-0 bottom-full hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 z-50",children:[S.name," ",S.team?`(${S.team})`:""]})]})]}),d.jsx("div",{className:"text-xs text-gray-400",children:new Date(S.joinedAt).toLocaleTimeString()})]},S.id))})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx(ne,{onClick:()=>{x.playClick(),t("/")},variant:"secondary",className:"bg-white/80 text-primary border-2 border-primary/50 px-6 py-3 rounded-lg font-bold shadow-md hover:bg-white hover:shadow-lg transition-all",onMouseEnter:()=>x.playHover(),children:"Cancel Quiz"}),d.jsx(Rd,{onClick:E,disabled:c.length===0,className:`bg-gradient-to-r from-primary to-secondary text-white px-8 py-3 rounded-lg font-bold shadow-md transition-all ${c.length===0?"opacity-50 cursor-not-allowed":"hover:shadow-lg hover:scale-105 animate-pulse-slow"}`,onMouseEnter:()=>c.length>0&&x.playHover(),children:"Start Quiz"})]})]}),e==="quiz-started"&&d.jsxs("div",{className:"w-full max-w-4xl transition-all duration-700 ease-out transform",children:[d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-6 h-16 mx-auto",alt:"ICCT School Logo"}),d.jsx(l5,{quizId:r})]}),h>0&&d.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm z-50",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-accent rounded-full animate-pulse",style:{filter:"blur(20px)",transform:"scale(1.2)"}}),d.jsx("div",{className:"bg-white rounded-full w-40 h-40 flex items-center justify-center relative",children:d.jsx("span",{className:"text-8xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent animate-pulse",children:h})})]})})]})}function p_({children:t}){return d.jsx("div",{className:"z-10 flex w-full max-w-80 flex-col gap-4 rounded-md bg-white p-4 shadow-sm",children:t})}function m_(){const t=gs(),[e,n]=_.useState("enter-code"),[r,s]=_.useState(""),[i,o]=_.useState(""),[a,l]=_.useState(""),[c,u]=_.useState(""),[h,f]=_.useState(null),[p,g]=_.useState(0),[x,w]=_.useState(null),[m,y]=_.useState(null),[v,b]=_.useState(0),[E,C]=_.useState(0),[S,k]=_.useState([]),[F,B]=_.useState(!1),ye=(T=>{const R=[];for(let D=0;D<T;D++)R.push({id:D,size:Math.random()*20+5,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${Math.random()*20+20}s`,animationDelay:`${Math.random()*5}s`,opacity:Math.random()*.3+.1});return R})(15);_.useEffect(()=>{const T=setTimeout(()=>B(!0),100);return()=>{clearTimeout(T)}},[]),_.useEffect(()=>{if(r&&(e==="waiting"||e==="quiz-active"||e==="quiz-completed")){const T=re(se,`quizzes/${r}`),R=tt(T,D=>{if(D.exists()){const V=D.val();if(f(V),V.status==="active"&&e==="waiting"){g(3);const X=setInterval(()=>{g(le=>le<=1?(clearInterval(X),n("quiz-active"),0):le-1)},1e3)}V.status==="completed"&&e!=="quiz-completed"&&(n("quiz-completed"),ve()),e==="quiz-active"&&V.currentQuestionIndex!==void 0&&V.questions&&w(V.questions[V.currentQuestionIndex])}else me.error("The quiz was cancelled by the host"),t("/")});return()=>R()}},[r,e,t,c]);const ve=async()=>{if(!(!r||!c))try{const T=re(se,`quizzes/${r}/participants`),R=await It(T),D=re(se,`quizzes/${r}/questions`),V=await It(D),X=[];if(V.exists()){const le=V.val();Object.entries(le).forEach(([ue,de])=>{de.difficulty==="tie-breaker"&&X.push(ue)})}if(R.exists()){const le=R.val(),ue=Object.keys(le).map(N=>({id:N,...le[N],tieBreakerRank:null}));if(X.length>0)for(const N of X){const I=re(se,`quizzes/${r}/answers/${N}`),O=await It(I);if(O.exists()){const A=O.val(),G=[];Object.entries(A).forEach(([M,Q])=>{Q.scoreEarned>0&&G.push({participantId:M,timestamp:Q.timestamp})}),G.sort((M,Q)=>M.timestamp-Q.timestamp),G.forEach((M,Q)=>{const ie=ue.find(pe=>pe.id===M.participantId);if(ie){const pe=Q+1;(ie.tieBreakerRank===null||pe<ie.tieBreakerRank)&&(ie.tieBreakerRank=pe)}})}}ue.sort((N,I)=>{const O=(I.score||0)-(N.score||0);return O!==0?O:N.tieBreakerRank!==null&&I.tieBreakerRank!==null?N.tieBreakerRank-I.tieBreakerRank:N.tieBreakerRank!==null?-1:I.tieBreakerRank!==null?1:N.lastAnswerAt&&I.lastAnswerAt?N.lastAnswerAt-I.lastAnswerAt:0});const de=ue.findIndex(N=>N.id===c);y(de+1),b(ue.length);const U=ue.find(N=>N.id===c);C((U==null?void 0:U.score)||0),k(ue.slice(0,3))}}catch(T){console.error("Error fetching results:",T),me.error("Failed to load results")}},Oe=()=>{if(!r){me.error("Please enter a quiz code");return}const T=re(se,`quizzes/${r}`);tt(T,R=>{if(R.exists()){const D=R.val();if(D.status==="active"){me.error("The quiz has already started");return}if(D.status==="completed"){me.error("This quiz has already ended");return}f(D),n("enter-info")}else me.error("Invalid quiz code")},{onlyOnce:!0})},H=()=>{if(!i){me.error("Please enter your name");return}const T=re(se,`quizzes/${r}/participants`),R=YO(T);wc(R,{name:i,team:a||null,joinedAt:new Date().toISOString(),score:0}).then(()=>{u(R.key),n("waiting"),me.success("Joined successfully!")}).catch(D=>{me.error("Error joining: "+D.message)})},ae=()=>{let T="🏆",R="Congratulations!",D="bg-blue-500",V="Participant";m===1?(T="🥇",R="You're the Champion!",D="bg-yellow-500",V="Champion"):m===2?(T="🥈",R="Excellent job!",D="bg-gray-400",V="Silver Medalist"):m===3?(T="🥉",R="Well done!",D="bg-amber-600",V="Bronze Medalist"):m<=5?(T="🌟",R="Great effort!",D="bg-purple-500",V="Top Performer"):m<=v/2?(T="👍",R="Nice work!",D="bg-green-500",V="Above Average"):(T="👍",R="Thanks for participating!",D="bg-blue-500",V="Participant");const X=Math.round((v-m)/v*100);return d.jsxs("div",{className:"max-w-3xl mx-auto flex flex-col relative",children:[m<=3&&d.jsx(ig,{active:!0,pieces:m===1?400:m===2?300:250,recycle:!0}),d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-6 h-24 mx-auto animate-float",alt:"ICCT School Logo"}),d.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-white",style:{textShadow:"0 0 10px #06BEE1"},children:"Quiz Complete!"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsx("div",{className:"bg-white/95 backdrop-blur-sm shadow-xl rounded-xl overflow-hidden border-4 border-primary/20 transform transition-all hover:shadow-glow",children:d.jsxs("div",{className:"px-6 pt-6 pb-8 text-center",children:[d.jsxs("div",{className:"relative mb-4",children:[d.jsxs("div",{className:`${D} w-28 h-28 rounded-full mx-auto flex items-center justify-center relative overflow-hidden`,children:[d.jsx("div",{className:"animate-pulse-slow absolute inset-0 opacity-30 bg-white"}),d.jsx("span",{className:"text-6xl relative z-10",children:T})]}),d.jsx("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 ${D} text-white text-xs font-bold py-1 px-3 rounded-full shadow-lg`,children:V})]}),d.jsx("h2",{className:"text-2xl font-bold mb-4 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:R}),d.jsxs("div",{className:"bg-primary/10 rounded-xl p-5 mt-4 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 border-t-8 border-l-8 border-primary/20 w-8 h-8 rounded-tl-md"}),d.jsx("div",{className:"absolute top-0 right-0 border-t-8 border-r-8 border-primary/20 w-8 h-8 rounded-tr-md"}),d.jsx("div",{className:"absolute bottom-0 left-0 border-b-8 border-l-8 border-primary/20 w-8 h-8 rounded-bl-md"}),d.jsx("div",{className:"absolute bottom-0 right-0 border-b-8 border-r-8 border-primary/20 w-8 h-8 rounded-br-md"}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("p",{className:"text-lg font-semibold text-primary",children:"Your Position"}),d.jsxs("div",{className:"flex items-center justify-center my-3",children:[d.jsxs("div",{className:"text-5xl font-bold text-primary",children:[m,d.jsx("sup",{className:"text-lg",children:Y(m)})]}),d.jsxs("div",{className:"ml-3 pl-3 border-l border-gray-300 text-left",children:[d.jsx("div",{className:"text-sm text-gray-500",children:"out of"}),d.jsx("div",{className:"text-xl font-semibold",children:v})]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-1",children:d.jsx("div",{className:"bg-gradient-to-r from-primary to-secondary h-2.5 rounded-full",style:{width:`${X}%`}})}),d.jsxs("p",{className:"text-right text-xs text-gray-500",children:["Top ",X,"%"]})]})]}),d.jsxs("div",{className:"mt-6 bg-gradient-to-r from-primary/10 to-secondary/10 rounded-xl p-5",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Final Score"}),d.jsx("span",{className:"text-2xl font-bold text-secondary",children:E})]}),d.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent my-3"}),a&&d.jsxs("div",{className:"text-center py-1 px-3 bg-white/50 rounded-lg inline-block",children:[d.jsx("span",{className:"text-gray-700",children:"Team: "}),d.jsx("span",{className:"font-semibold text-primary",children:a})]})]})]})}),d.jsx("div",{className:"h-full flex flex-col",children:d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-4 mb-4",children:[d.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-3 text-center text-primary",children:"Leaderboard"}),d.jsx("div",{className:"w-full overflow-x-auto overflow-y-auto",style:{maxHeight:"min(70vh, 600px)"},children:d.jsx("div",{className:"min-w-full text-base md:text-lg",children:d.jsx(Dc,{quizId:r,participantId:c,showTeams:!0,animateEntrance:!1,compact:!1})})})]})})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx(ne,{onClick:()=>t("/"),variant:"secondary",className:"bg-white/90 text-primary border-2 border-primary/50 px-6 py-3 rounded-lg font-bold shadow-md hover:bg-white hover:shadow-lg transition-all",children:"Back to Home"})})]})},Y=T=>{if(T%100===11||T%100===12||T%100===13)return"th";switch(T%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},P=()=>{window.confirm("Are you sure you want to leave the quiz? This action cannot be undone.")&&t("/")};return d.jsxs("section",{className:"min-h-screen w-full flex flex-col items-center justify-center overflow-hidden relative",children:[d.jsxs("div",{className:"fixed inset-0 -z-10",children:[d.jsx("img",{src:"https://i.imgur.com/2qmTd0f.jpeg",className:"w-full h-full object-cover",alt:"background"}),ye.map(T=>d.jsx("div",{className:"absolute rounded-full bg-white",style:{width:`${T.size}px`,height:`${T.size}px`,left:T.left,top:T.top,opacity:T.opacity,animation:`float ${T.animationDuration} infinite ease-in-out`,animationDelay:T.animationDelay}},T.id))]}),d.jsxs("div",{className:"container mx-auto px-4 py-0 min-h-screen flex flex-col justify-center items-center",children:[e==="enter-code"&&d.jsxs("div",{className:`max-w-md mx-auto transition-all duration-700 ease-out transform ${F?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-6 h-24 mx-auto animate-float",alt:"ICCT School Logo"}),d.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-white",style:{textShadow:"0 0 10px #06BEE1"},children:"Join Quiz"}),d.jsxs(p_,{className:"bg-white/90 backdrop-blur-sm rounded-lg p-8 shadow-lg hover:shadow-glow transition-all duration-300 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 bg-primary/10 rounded-br-3xl"}),d.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-secondary/10 rounded-bl-3xl"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-secondary/10 rounded-tr-3xl"}),d.jsx("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-primary/10 rounded-tl-3xl"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-primary text-lg font-bold mb-2",children:"Quiz Code"}),d.jsx(Bt,{value:r,onChange:T=>s(T.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"w-full text-center text-3xl tracking-widest font-bold border-2 border-primary/30 focus:border-primary/70 transition-all"})]}),d.jsx(ne,{onClick:Oe,className:"w-full bg-gradient-to-r from-primary to-secondary text-white py-3 rounded-lg font-bold text-lg shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all",children:"Continue"}),d.jsx(ne,{onClick:()=>t("/"),variant:"secondary",className:"w-full mt-4 bg-white/80 text-primary border-2 border-primary/50 py-2 rounded-lg font-bold shadow-md hover:bg-white hover:shadow-lg transition-all",children:"Back to Home"})]})]})]}),e==="enter-info"&&d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-6 h-24 mx-auto animate-float",alt:"ICCT School Logo"}),d.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-white",style:{textShadow:"0 0 10px #06BEE1"},children:"Your Information"}),d.jsxs(p_,{className:"bg-white/90 backdrop-blur-sm rounded-lg p-8 shadow-lg hover:shadow-glow transition-all duration-300 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 bg-primary/10 rounded-br-3xl"}),d.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-secondary/10 rounded-bl-3xl"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-secondary/10 rounded-tr-3xl"}),d.jsx("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-primary/10 rounded-tl-3xl"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-primary text-lg font-bold mb-2",children:"Your Name"}),d.jsx(Bt,{value:i,onChange:T=>o(T.target.value),placeholder:"Enter your name",className:"w-full border-2 border-primary/30 focus:border-primary/70 transition-all"})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-primary text-lg font-bold mb-2",children:"Team (Optional)"}),d.jsx(Bt,{value:a,onChange:T=>l(T.target.value),placeholder:"Enter your team name",className:"w-full border-2 border-primary/30 focus:border-primary/70 transition-all"})]}),d.jsx(ne,{onClick:H,className:"w-full bg-gradient-to-r from-primary to-secondary text-white py-3 rounded-lg font-bold text-lg shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all",children:"Join Quiz"}),d.jsx(ne,{onClick:()=>n("enter-code"),variant:"secondary",className:"w-full mt-4 bg-white/80 text-primary border-2 border-primary/50 py-2 rounded-lg font-bold shadow-md hover:bg-white hover:shadow-lg transition-all",children:"Back"})]})]})]}),e==="waiting"&&d.jsxs("div",{className:"max-w-md mx-auto text-center",children:[d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-6 h-24 mx-auto animate-float",alt:"ICCT School Logo"}),d.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-white",style:{textShadow:"0 0 10px #06BEE1"},children:"Waiting for Host"}),d.jsxs("div",{className:"bg-white/90 backdrop-blur-sm shadow-lg rounded-lg p-8 mb-6 transform transition-all hover:shadow-glow relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 bg-primary/10 rounded-br-3xl"}),d.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-secondary/10 rounded-bl-3xl"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-secondary/10 rounded-tr-3xl"}),d.jsx("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-primary/10 rounded-tl-3xl"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"animate-pulse",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"w-20 h-20 mx-auto mb-4 border-4 border-primary border-t-transparent rounded-full animate-spin"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:d.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full animate-ping"})})})]}),d.jsx("p",{className:"text-xl font-bold text-primary mb-2",children:"Get Ready!"}),d.jsx("p",{className:"text-gray-600",children:"Waiting for the host to start the quiz..."})]}),d.jsxs("div",{className:"mt-8 bg-primary/10 rounded-lg p-4",children:[d.jsx("p",{className:"font-bold text-primary text-lg",children:h==null?void 0:h.title}),a&&d.jsxs("p",{className:"text-gray-600 mt-2 font-medium",children:["Team: ",d.jsx("span",{className:"text-secondary",children:a})]}),d.jsxs("p",{className:"text-gray-600 mt-2 font-medium",children:["Name: ",d.jsx("span",{className:"text-secondary",children:i})]})]})]})]}),d.jsx(ne,{onClick:P,variant:"secondary",className:"bg-white/80 text-primary border-2 border-primary/50 px-6 py-3 rounded-lg font-bold shadow-md hover:bg-white hover:shadow-lg transition-all",children:"Leave Quiz"})]}),e==="quiz-active"&&d.jsxs("div",{className:"max-w-3xl mx-auto w-full",children:[d.jsx("img",{src:"https://i.imgur.com/7OSw7In.png",className:"mb-4 h-20 mx-auto animate-float",alt:"ICCT School Logo"}),d.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-white",style:{textShadow:"0 0 10px #06BEE1"},children:h==null?void 0:h.title}),d.jsx("div",{className:"bg-white/90 backdrop-blur-sm shadow-lg rounded-lg overflow-hidden border-4 border-primary/20 transform transition-all hover:shadow-glow",children:x?d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 bg-primary/20 rounded-br-2xl"}),d.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-secondary/20 rounded-bl-2xl"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-secondary/20 rounded-tr-2xl"}),d.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 bg-primary/20 rounded-tl-2xl"}),d.jsx("div",{className:"absolute top-0 left-0 h-2 bg-gradient-to-r from-primary via-secondary to-primary w-full animate-gradient-x"}),d.jsx(H6,{question:x,quizId:r,participantId:c,isHost:!1})]}):d.jsxs("div",{className:"p-10 text-center",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-4 border-4 border-primary border-t-transparent rounded-full animate-spin"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center",children:d.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-full animate-ping"})})})]}),d.jsx("h3",{className:"text-2xl font-bold text-primary mb-2",children:"Waiting for next question..."}),d.jsx("p",{className:"text-gray-600",children:"The host is preparing the next challenge for you!"})]})}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx(ne,{onClick:P,variant:"secondary",className:"bg-white/80 text-primary border-2 border-primary/50 px-6 py-3 rounded-lg font-bold shadow-md hover:bg-white hover:shadow-lg transition-all",children:"Leave Quiz"})})]}),e==="quiz-completed"&&ae(),p>0&&d.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm z-50",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-accent rounded-full animate-pulse",style:{filter:"blur(20px)",transform:"scale(1.2)"}}),d.jsx("div",{className:"bg-white rounded-full w-40 h-40 flex items-center justify-center relative",children:d.jsx("span",{className:"text-8xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent animate-pulse",children:p})})]})})]})]})}const u5=()=>{const[t,e]=_.useState(fe.isMuted),[n,r]=_.useState(fe.volume),[s,i]=_.useState(!1),o=su();_.useEffect(()=>{const f=setInterval(()=>{t!==fe.isMuted&&e(fe.isMuted),n!==fe.volume&&r(fe.volume)},1e3);return()=>clearInterval(f)},[t,n]);const a=()=>{const h=fe.toggleMute();e(h),h||o.playClick()},l=h=>{const f=parseFloat(h.target.value);fe.setVolume(f),r(f),!t&&f>0&&o.playClick()},c=()=>{i(h=>!h),t||o.playHover()},u=t?n5:n>.5?r5:t5;return d.jsxs("div",{className:"sound-controls",children:[s&&d.jsxs("div",{className:"sound-controls-panel",children:[d.jsx("div",{className:"volume-control",children:d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:n,onChange:l,className:"volume-slider"})}),d.jsx("button",{className:"mute-toggle-btn",onClick:a,children:t?"Unmute":"Mute"})]}),d.jsx("button",{className:"sound-toggle-btn",onClick:c,"aria-label":"Toggle sound controls",children:d.jsx(u,{size:18,color:t?"#999":"#3b82f6"})})]})};function d5(){const t=gs();eu();const[e,n]=_.useState(""),[r,s]=_.useState(""),[i,o]=_.useState(""),[a,l]=_.useState(1),[c,u]=_.useState(!1),[h,f]=_.useState("");_.useEffect(()=>{const w=sessionStorage.getItem("participantName"),m=sessionStorage.getItem("participantTeam");w&&s(w),m&&o(m)},[]);const p=async w=>{if(w.preventDefault(),f(""),!e.trim()){f("Please enter a quiz code");return}u(!0);try{const m=re(se,`quizzes/${e}`),y=await It(m);if(!y.exists()){f("Quiz not found. Please check the code and try again."),u(!1);return}if(y.val().status!=="waiting"){f("This quiz is no longer accepting participants."),u(!1);return}l(2)}catch(m){console.error("Error checking quiz code:",m),f("An error occurred. Please try again.")}finally{u(!1)}},g=async w=>{if(w.preventDefault(),f(""),!r.trim()){f("Please enter your name");return}if(!i.trim()){f("Please enter your team name");return}u(!0);try{const m=af();sessionStorage.setItem("participantId",m),sessionStorage.setItem("participantName",r),sessionStorage.setItem("participantTeam",i),sessionStorage.setItem("quizCode",e);const y=re(se,`quizzes/${e}/participants/${m}`),v=r.trim()||" ",b=i.trim()||" ";await wc(y,{id:m,name:v,team:b,joinedAt:Date.now(),score:0}),console.log(`Participant joined: ID=${m}, Name=${v}, Team=${b}`),wt.success("Successfully joined the quiz!"),t(`/participant/waiting?code=${e}`)}catch(m){console.error("Error joining quiz:",m),f("Failed to join the quiz. Please try again.")}finally{u(!1)}},x=()=>{l(1),f("")};return d.jsxs("div",{className:"max-w-md mx-auto p-4",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:a===1?"Join a Quiz":"Enter Your Information"}),h&&d.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 mb-4",children:h}),a===1?d.jsxs("form",{onSubmit:p,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"quizCode",className:"block mb-1 font-medium",children:"Quiz Code"}),d.jsx(Bt,{id:"quizCode",value:e,onChange:w=>n(w.target.value),placeholder:"Enter the quiz code",required:!0,className:"w-full"})]}),d.jsx(ne,{type:"submit",disabled:c,className:"w-full",children:c?"Loading...":"Continue"})]}):d.jsxs("form",{onSubmit:g,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block mb-1 font-medium",children:"Your Name"}),d.jsx(Bt,{id:"name",value:r,onChange:w=>s(w.target.value),placeholder:"Enter your full name",required:!0,className:"w-full"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be displayed on the leaderboard"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"team",className:"block mb-1 font-medium",children:"Team Name"}),d.jsx(Bt,{id:"team",value:i,onChange:w=>o(w.target.value),placeholder:"Enter your team name",required:!0,className:"w-full"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teams will be used for grouping on the leaderboard"})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(ne,{type:"button",variant:"outline",onClick:x,className:"flex-1",children:"Back"}),d.jsx(ne,{type:"submit",disabled:c,className:"flex-1",children:c?"Loading...":"Join Quiz"})]})]})]})}function h5(){return _.useEffect(()=>{document.title="ICCT Quiz Bee System";let t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="shortcut icon",document.head.appendChild(t)),t.href="/icon.svg"},[]),d.jsx(d.Fragment,{children:d.jsxs("main",{className:"text-base-[8px] flex flex-col min-h-screen font-montserrat",children:[d.jsxs(vN,{children:[d.jsx(Ur,{path:"/",element:d.jsx(gP,{})}),d.jsx(Ur,{path:"/participant",element:d.jsx(m_,{})}),d.jsx(Ur,{path:"/host",element:d.jsx(c5,{})}),d.jsx(Ur,{path:"/join",element:d.jsx(d5,{})}),d.jsx(Ur,{path:"/participant/waiting",element:d.jsx(m_,{})}),d.jsx(Ur,{path:"*",element:d.jsx(gN,{to:"/",replace:!0})})]}),d.jsx(u5,{})]})})}const f5=()=>d.jsx(pP,{children:t=>d.jsx(u1,{toast:t,style:{...t.style,boxShadow:"rgba(0, 0, 0, 0.25) 0px -4px inset",fontWeight:700},children:({icon:e,message:n})=>d.jsxs(d.Fragment,{children:[e,n]})})});Od.createRoot(document.getElementById("root")).render(d.jsx(On.StrictMode,{children:d.jsx(_I,{children:d.jsx(EN,{children:d.jsx(SI,{children:d.jsxs(EI,{children:[d.jsx(wN,{children:d.jsx(h5,{})}),d.jsx(f5,{})]})})})})}));
